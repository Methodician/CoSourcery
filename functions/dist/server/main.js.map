{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@angular/material/chips/typings/index.d.ts.MatChipList.html","webpack:///./node_modules/@angular/material/dialog/typings/index.d.ts.MatDialogContainer.html","webpack:///./node_modules/@angular/material/form-field/typings/index.d.ts.MatFormField.html","webpack:///./node_modules/@angular/material/icon/typings/index.d.ts.MatIcon.html","webpack:///./node_modules/@angular/material/tooltip/typings/index.d.ts.TooltipComponent.html","webpack:///./node_modules/@angular/router/router.d.ts.ɵEmptyOutletComponent.html","webpack:///./node_modules/@ckeditor/ckeditor5-angular/ckeditor-ckeditor5-angular.d.ts.ɵa.html","webpack:///./src/app/admin/components/data-cleanup/data-cleanup.component.html","webpack:///./src/app/admin/components/data-cleanup/data-cleanup.component.ts","webpack:///./src/app/admin/components/flag-articles/flag-articles.component.html","webpack:///./src/app/admin/components/flag-articles/flag-articles.component.ts","webpack:///./src/app/admin/services/admin.service.ts","webpack:///./src/app/admin/services/data-cleanup.service.ts","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/app.server.module.ts","webpack:///./src/app/components/account/profile-card/profile-card.component.html","webpack:///./src/app/components/account/profile-card/profile-card.component.ts","webpack:///./src/app/components/account/profile-contributions/profile-contributions.component.html","webpack:///./src/app/components/account/profile-contributions/profile-contributions.component.ts","webpack:///./src/app/components/account/profile-form/profile-form.component.html","webpack:///./src/app/components/account/profile-form/profile-form.component.ts","webpack:///./src/app/components/account/profile-view/profile-view.component.html","webpack:///./src/app/components/account/profile-view/profile-view.component.ts","webpack:///./src/app/components/account/profile/profile.component.html","webpack:///./src/app/components/account/profile/profile.component.ts","webpack:///./src/app/components/account/register/register.component.html","webpack:///./src/app/components/account/register/register.component.ts","webpack:///./src/app/components/articles/article-preview-card/article-preview-card.component.html","webpack:///./src/app/components/articles/article-preview-card/article-preview-card.component.ts","webpack:///./src/app/components/articles/article/article.component.html","webpack:///./src/app/components/articles/article/article.component.ts","webpack:///./src/app/components/articles/article/cover-image-display/cover-image-display.component.html","webpack:///./src/app/components/articles/article/cover-image-display/cover-image-display.component.ts","webpack:///./src/app/components/articles/article/cover-image-edit/cover-image-edit.component.html","webpack:///./src/app/components/articles/article/cover-image-edit/cover-image-edit.component.ts","webpack:///./src/app/components/articles/article/title/title-display/title-display.component.html","webpack:///./src/app/components/articles/article/title/title-display/title-display.component.ts","webpack:///./src/app/components/articles/article/title/title-edit/title-edit.component.html","webpack:///./src/app/components/articles/article/title/title-edit/title-edit.component.ts","webpack:///./src/app/components/articles/article/title/title.component.html","webpack:///./src/app/components/articles/article/title/title.component.ts","webpack:///./src/app/components/articles/contributors/contributors.component.html","webpack:///./src/app/components/articles/contributors/contributors.component.ts","webpack:///./src/app/components/comments/comment-list/comment-list.component.html","webpack:///./src/app/components/comments/comment-list/comment-list.component.ts","webpack:///./src/app/components/comments/comment/comment.component.html","webpack:///./src/app/components/comments/comment/comment.component.ts","webpack:///./src/app/components/general/filter-menu/filter-menu.component.html","webpack:///./src/app/components/general/filter-menu/filter-menu.component.ts","webpack:///./src/app/components/general/home/home.component.html","webpack:///./src/app/components/general/home/home.component.ts","webpack:///./src/app/components/general/top-nav/top-nav.component.html","webpack:///./src/app/components/general/top-nav/top-nav.component.ts","webpack:///./src/app/components/general/unauthorized/unauthorized.component.html","webpack:///./src/app/components/general/unauthorized/unauthorized.component.ts","webpack:///./src/app/components/modals/confirm-dialog/confirm-dialog.component.html","webpack:///./src/app/components/modals/confirm-dialog/confirm-dialog.component.ts","webpack:///./src/app/components/modals/edit-timeout-dialog/edit-timeout-dialog.component.html","webpack:///./src/app/components/modals/edit-timeout-dialog/edit-timeout-dialog.component.ts","webpack:///./src/app/components/modals/login-dialog/login-dialog.component.html","webpack:///./src/app/components/modals/login-dialog/login-dialog.component.ts","webpack:///./src/app/components/modals/message-dialog/message-dialog.component.html","webpack:///./src/app/components/modals/message-dialog/message-dialog.component.ts","webpack:///./src/app/directives/click-out.directive.ts","webpack:///./src/app/services/article.service.ts","webpack:///./src/app/services/auth.service.ts","webpack:///./src/app/services/comment.service.ts","webpack:///./src/app/services/notification.service.ts","webpack:///./src/app/services/upload.service.ts","webpack:///./src/app/services/user.service.ts","webpack:///./src/app/shared/class/article-info.ts","webpack:///./src/app/shared/class/auth-info.ts","webpack:///./src/app/shared/class/comment.ts","webpack:///./src/app/shared/class/user-info.ts","webpack:///./src/app/shared/guards/auth.guard.ts","webpack:///./src/app/shared/guards/unsaved-changes.guard.ts","webpack:///./src/app/shared/pipes/reverse-array.pipe.ts","webpack:///./src/app/shared/pipes/truncate-string.pipe.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main-ssr.ts","webpack:///external \"@angular/animations\"","webpack:///external \"@angular/animations/browser\"","webpack:///external \"@angular/cdk/a11y\"","webpack:///external \"@angular/cdk/bidi\"","webpack:///external \"@angular/cdk/keycodes\"","webpack:///external \"@angular/cdk/layout\"","webpack:///external \"@angular/cdk/observers\"","webpack:///external \"@angular/cdk/overlay\"","webpack:///external \"@angular/cdk/platform\"","webpack:///external \"@angular/cdk/portal\"","webpack:///external \"@angular/cdk/scrolling\"","webpack:///external \"@angular/cdk/text-field\"","webpack:///external \"@angular/common\"","webpack:///external \"@angular/common/http\"","webpack:///external \"@angular/core\"","webpack:///external \"@angular/fire\"","webpack:///external \"@angular/fire/auth\"","webpack:///external \"@angular/fire/database\"","webpack:///external \"@angular/fire/firestore\"","webpack:///external \"@angular/fire/storage\"","webpack:///external \"@angular/forms\"","webpack:///external \"@angular/http\"","webpack:///external \"@angular/material\"","webpack:///external \"@angular/material/button\"","webpack:///external \"@angular/material/card\"","webpack:///external \"@angular/material/chips\"","webpack:///external \"@angular/material/core\"","webpack:///external \"@angular/material/dialog\"","webpack:///external \"@angular/material/form-field\"","webpack:///external \"@angular/material/icon\"","webpack:///external \"@angular/material/input\"","webpack:///external \"@angular/material/menu\"","webpack:///external \"@angular/material/progress-spinner\"","webpack:///external \"@angular/material/sidenav\"","webpack:///external \"@angular/material/tabs\"","webpack:///external \"@angular/material/toolbar\"","webpack:///external \"@angular/material/tooltip\"","webpack:///external \"@angular/platform-browser\"","webpack:///external \"@angular/platform-browser/animations\"","webpack:///external \"@angular/platform-server\"","webpack:///external \"@angular/router\"","webpack:///external \"@ckeditor/ckeditor5-angular\"","webpack:///external \"@ckeditor/ckeditor5-build-inline\"","webpack:///external \"algoliasearch/lite\"","webpack:///external \"exif-js\"","webpack:///external \"firebase/app\"","webpack:///external \"firebase/auth\"","webpack:///external \"firebase/database\"","webpack:///external \"firebase/firestore\"","webpack:///external \"firebase/storage\"","webpack:///external \"rxjs\"","webpack:///external \"rxjs/operators\"","webpack:///external \"tslib\""],"names":[],"mappings":"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,EAAE;YACtB,OAAU,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,QAAK,CAAC;SACrC;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAEH,yBAAC;AAAD,CAAC;;;;;;;;;;;;;;;AClBD;AAAA,gFAAgF;AAChF,2EAA2E;AAC3E,gEAAgE;AAEzD,IAAM,WAAW,GAAG;IACzB,QAAQ,EAAE;QACR,MAAM,EAAE,yCAAyC;QACjD,UAAU,EAAE,gCAAgC;QAC5C,WAAW,EAAE,uCAAuC;QACpD,SAAS,EAAE,gBAAgB;QAC3B,aAAa,EAAE,4BAA4B;QAC3C,iBAAiB,EAAE,cAAc;KAClC;IACD,YAAY,EAAE,cAAc;IAC5B,UAAU,EAAE,KAAK;CAClB,CAAC;AAEF;;;;;GAKG;AACH,mEAAmE;;;;;;;;;;;;;;;;;;;;;;ACvBT;;;;;;;;;;;;;;;;;;;;;;;;;ACA1D,gD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,gD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,gD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,+C;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,+C;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,+C;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,kC","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","<div class=\"mat-chip-list-wrapper\"><ng-content></ng-content></div>","<ng-template cdkPortalOutlet></ng-template>","<div class=\"mat-form-field-wrapper\"><div class=\"mat-form-field-flex\" #connectionContainer (click)=\"_control.onContainerClick && _control.onContainerClick($event)\"><ng-container *ngIf=\"appearance == 'outline'\"><div class=\"mat-form-field-outline\"><div class=\"mat-form-field-outline-start\"></div><div class=\"mat-form-field-outline-gap\"></div><div class=\"mat-form-field-outline-end\"></div></div><div class=\"mat-form-field-outline mat-form-field-outline-thick\"><div class=\"mat-form-field-outline-start\"></div><div class=\"mat-form-field-outline-gap\"></div><div class=\"mat-form-field-outline-end\"></div></div></ng-container><div class=\"mat-form-field-prefix\" *ngIf=\"_prefixChildren.length\"><ng-content select=\"[matPrefix]\"></ng-content></div><div class=\"mat-form-field-infix\" #inputContainer><ng-content></ng-content><span class=\"mat-form-field-label-wrapper\"><label class=\"mat-form-field-label\" (cdkObserveContent)=\"updateOutlineGap()\" [cdkObserveContentDisabled]=\"appearance != 'outline'\" [id]=\"_labelId\" [attr.for]=\"_control.id\" [attr.aria-owns]=\"_control.id\" [class.mat-empty]=\"_control.empty && !_shouldAlwaysFloat\" [class.mat-form-field-empty]=\"_control.empty && !_shouldAlwaysFloat\" [class.mat-accent]=\"color == 'accent'\" [class.mat-warn]=\"color == 'warn'\" #label *ngIf=\"_hasFloatingLabel()\" [ngSwitch]=\"_hasLabel()\"><ng-container *ngSwitchCase=\"false\"><ng-content select=\"mat-placeholder\"></ng-content>{{_control.placeholder}}</ng-container><ng-content select=\"mat-label\" *ngSwitchCase=\"true\"></ng-content><span class=\"mat-placeholder-required mat-form-field-required-marker\" aria-hidden=\"true\" *ngIf=\"!hideRequiredMarker && _control.required && !_control.disabled\">&#32;*</span></label></span></div><div class=\"mat-form-field-suffix\" *ngIf=\"_suffixChildren.length\"><ng-content select=\"[matSuffix]\"></ng-content></div></div><div class=\"mat-form-field-underline\" #underline *ngIf=\"appearance != 'outline'\"><span class=\"mat-form-field-ripple\" [class.mat-accent]=\"color == 'accent'\" [class.mat-warn]=\"color == 'warn'\"></span></div><div class=\"mat-form-field-subscript-wrapper\" [ngSwitch]=\"_getDisplayedMessages()\"><div *ngSwitchCase=\"'error'\" [@transitionMessages]=\"_subscriptAnimationState\"><ng-content select=\"mat-error\"></ng-content></div><div class=\"mat-form-field-hint-wrapper\" *ngSwitchCase=\"'hint'\" [@transitionMessages]=\"_subscriptAnimationState\"><div *ngIf=\"hintLabel\" [id]=\"_hintLabelId\" class=\"mat-hint\">{{hintLabel}}</div><ng-content select=\"mat-hint:not([align='end'])\"></ng-content><div class=\"mat-form-field-hint-spacer\"></div><ng-content select=\"mat-hint[align='end']\"></ng-content></div></div></div>","<ng-content></ng-content>","<div class=\"mat-tooltip\" [ngClass]=\"tooltipClass\" [class.mat-tooltip-handset]=\"(_isHandset | async)?.matches\" [@state]=\"_visibility\" (@state.start)=\"_animationStart()\" (@state.done)=\"_animationDone($event)\">{{message}}</div>","<router-outlet></router-outlet>","<ng-template></ng-template>","<p>\r\n  data-cleanup works!\r\n</p>\r\n\r\n<button (click)=\"addUsersToRtdb()\">copy users over</button>\r\n","import { Component, OnInit } from '@angular/core';\r\n// import { DataCleanupService } from '@admin/services/data-cleanup.service';\r\n\r\n@Component({\r\n  selector: 'cos-data-cleanup',\r\n  templateUrl: './data-cleanup.component.html',\r\n  styleUrls: ['./data-cleanup.component.scss'],\r\n})\r\nexport class DataCleanupComponent implements OnInit {\r\n  constructor() // private cleanupSvc: DataCleanupService\r\n  {}\r\n\r\n  ngOnInit() {}\r\n\r\n  addUsersToRtdb() {}\r\n}\r\n","<section>\r\n  <h1>Articles...</h1>\r\n  <table>\r\n    <tr>\r\n      <th>Title</th>\r\n      <th>Revisions</th>\r\n      <th>Author</th>\r\n      <th>Last Updated</th>\r\n      <th></th>\r\n    </tr>\r\n    <tr *ngFor=\"let article of articlePreviews\">\r\n      <td>\r\n        {{ article.title }}\r\n        <!-- <pre>\r\n          {{ article | json }}\r\n        </pre> -->\r\n      </td>\r\n      <td>{{ article.version }}</td>\r\n      <td>\r\n        {{ userFromId(article.authorId)?.displayName() }}\r\n        <!-- <pre>\r\n            {{ userFromId(article.authorId) | json }}\r\n        </pre> -->\r\n      </td>\r\n      <td>{{ article.lastUpdated.toDate() | date: 'dd/MM/yyyy' }}</td>\r\n      <td>\r\n        {{ article.isFlagged || false }}\r\n        <button\r\n          *ngIf=\"!article.isFlagged\"\r\n          (click)=\"flagArticle(article.articleId)\"\r\n        >\r\n          Flag Article\r\n        </button>\r\n        <button\r\n          *ngIf=\"article.isFlagged\"\r\n          (click)=\"unflagArticle(article.articleId)\"\r\n        >\r\n          Remove Flag\r\n        </button>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n</section>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ArticleService } from '@services/article.service';\r\nimport { ArticlePreview } from '@class/article-info';\r\nimport { UserService } from '@services/user.service';\r\nimport { UserMap } from '@class/user-info';\r\nimport { AdminService } from '@admin/services/admin.service';\r\n\r\n@Component({\r\n  selector: 'cos-flag-articles',\r\n  templateUrl: './flag-articles.component.html',\r\n  styleUrls: ['./flag-articles.component.scss'],\r\n})\r\nexport class FlagArticlesComponent implements OnInit {\r\n  articlePreviews: ArticlePreview[];\r\n  userMap: UserMap;\r\n\r\n  constructor(\r\n    private articleSvc: ArticleService,\r\n    private adminSvc: AdminService,\r\n    private userSvc: UserService,\r\n  ) {\r\n    this.userMap = this.userSvc.userMap;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.adminSvc\r\n      .allArticlesRef()\r\n      .valueChanges()\r\n      .subscribe(previews => {\r\n        this.articlePreviews = previews;\r\n      });\r\n  }\r\n\r\n  userFromId = uid => {\r\n    if (this.userMap[uid]) {\r\n      return this.userMap[uid];\r\n    }\r\n    this.userSvc.addUserToMap(uid);\r\n  };\r\n\r\n  flagArticle = articleId => {\r\n    this.articleSvc.flagArticle(articleId);\r\n  };\r\n\r\n  unflagArticle = articleId => {\r\n    this.adminSvc.unflagArticle(articleId);\r\n  };\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ArticleService } from '@services/article.service';\r\nimport {\r\n  AngularFirestoreCollection,\r\n  AngularFirestore,\r\n} from '@angular/fire/firestore';\r\nimport { ArticlePreview } from '@class/article-info';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AdminService {\r\n  constructor(\r\n    private fsdb: AngularFirestore,\r\n    private articleSvc: ArticleService,\r\n  ) {}\r\n\r\n  unflagArticle = (articleId: string) => {\r\n    const previewRef = this.articleSvc.getPreviewRefById(articleId);\r\n    previewRef.update({ isFlagged: false });\r\n  };\r\n\r\n  allArticlesRef(): AngularFirestoreCollection<ArticlePreview> {\r\n    return this.fsdb.collection('articleData/articles/previews', ref =>\r\n      ref.orderBy('lastUpdated', 'desc'),\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n// import { AngularFireDatabase } from '@angular/fire/database';\r\n// import { AngularFirestore } from '@angular/fire/firestore';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class DataCleanupService {\r\n  constructor() // private afdb: AngularFireDatabase,\r\n  // private afs: AngularFirestore\r\n  {}\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { AuthGuard } from '@guards/auth.guard';\r\n\r\nimport { HomeComponent } from '@components/general/home/home.component';\r\nimport { RegisterComponent } from '@components/account/register/register.component';\r\nimport { ArticleComponent } from '@components/articles/article/article.component';\r\nimport { DataCleanupComponent } from '@admin/components/data-cleanup/data-cleanup.component';\r\nimport { ProfileComponent } from '@components/account/profile/profile.component';\r\nimport { UnsavedChangesGuard } from '@guards/unsaved-changes.guard';\r\nimport { UnauthorizedComponent } from '@components/general/unauthorized/unauthorized.component';\r\nimport { FlagArticlesComponent } from '@admin/components/flag-articles/flag-articles.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: HomeComponent },\r\n  { path: 'search/:query', component: HomeComponent },\r\n  { path: 'search', component: HomeComponent },\r\n  { path: 'register', component: RegisterComponent },\r\n  {\r\n    path: 'createarticle',\r\n    canActivate: [AuthGuard],\r\n    canDeactivate: [UnsavedChangesGuard],\r\n    component: ArticleComponent,\r\n  },\r\n  {\r\n    path: 'article/:key',\r\n    canDeactivate: [UnsavedChangesGuard],\r\n    component: ArticleComponent,\r\n  },\r\n  {\r\n    path: 'profile',\r\n    children: [\r\n      {\r\n        path: ':key',\r\n        component: ProfileComponent,\r\n      },\r\n      {\r\n        path: '',\r\n        component: ProfileComponent,\r\n        canActivate: [AuthGuard],\r\n      },\r\n    ],\r\n  },\r\n  { path: 'admin/data-cleanup', component: DataCleanupComponent },\r\n  { path: 'admin/flag-articles', component: FlagArticlesComponent },\r\n  { path: 'unauthorized', component: UnauthorizedComponent },\r\n  { path: '**', redirectTo: '' },\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forRoot(routes, {\r\n      scrollPositionRestoration: 'enabled',\r\n    }),\r\n  ],\r\n  exports: [RouterModule],\r\n})\r\nexport class AppRoutingModule {}\r\n","<cos-top-nav></cos-top-nav>\r\n<router-outlet></router-outlet>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'cos-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n\r\n  constructor() { }\r\n\r\n}\r\n","import { environment } from 'environments/environment';\r\n\r\n// Firebase and AngularFire imports\r\nimport { AngularFireModule } from '@angular/fire';\r\nimport { AngularFireAuthModule } from '@angular/fire/auth';\r\nimport { AngularFirestoreModule } from '@angular/fire/firestore';\r\nimport { AngularFireStorageModule } from '@angular/fire/storage';\r\nimport { AngularFireDatabaseModule } from '@angular/fire/database';\r\n\r\n// Modules\r\nimport { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { AppRoutingModule } from 'app/app-routing.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CKEditorModule } from '@ckeditor/ckeditor5-angular';\r\n\r\n// Angular Material Modules\r\nimport {\r\n  MatButtonModule,\r\n  MatInputModule,\r\n  MatToolbarModule,\r\n  MatIconModule,\r\n  MatMenuModule,\r\n  MatProgressSpinnerModule,\r\n  MatCardModule,\r\n  MatChipsModule,\r\n  MatSidenavModule,\r\n  MatTooltipModule,\r\n  MatTabsModule,\r\n  MatDialogModule,\r\n} from '@angular/material';\r\n\r\n// Services\r\nimport { ArticleService } from '@services/article.service';\r\nimport { AuthService } from '@services/auth.service';\r\nimport { NotificationService } from '@services/notification.service';\r\nimport { UploadService } from '@services/upload.service';\r\nimport { UserService } from '@services/user.service';\r\nimport { CommentService } from '@services/comment.service';\r\nimport { DataCleanupService } from '@admin/services/data-cleanup.service';\r\nimport { AdminService } from '@admin/services/admin.service';\r\n\r\n// Directives\r\nimport { ClickOutDirective } from '@directives/click-out.directive';\r\n\r\n// Pipes\r\nimport { RelatedArticlePipe } from '@pipes/related-article.pipe';\r\nimport { ArticleSearchPipe } from '@pipes/article-search.pipe';\r\nimport { ReverseArrayPipe } from '@pipes/reverse-array.pipe';\r\nimport { SafeHtmlPipe } from '@pipes/safe-html.pipe';\r\nimport { SafeUrlPipe } from '@pipes/safe-url.pipe';\r\nimport { TimeElapsedPipe } from '@pipes/time-elapsed.pipe';\r\nimport { TruncateTagsPipe } from '@pipes/truncate-tags.pipe';\r\nimport { TruncateStringPipe } from '@pipes/truncate-string.pipe';\r\n\r\n// Components\r\nimport { AppComponent } from 'app/app.component';\r\nimport { ArticleComponent } from '@components/articles/article/article.component';\r\nimport { ArticlePreviewCardComponent } from '@components/articles/article-preview-card/article-preview-card.component';\r\nimport { CommentComponent } from '@components/comments/comment/comment.component';\r\nimport { CommentListComponent } from '@components/comments/comment-list/comment-list.component';\r\nimport { DataCleanupComponent } from '@admin/components/data-cleanup/data-cleanup.component';\r\nimport { HomeComponent } from '@components/general/home/home.component';\r\nimport { ProfileComponent } from '@components/account/profile/profile.component';\r\nimport { RegisterComponent } from '@components/account/register/register.component';\r\nimport { TopNavComponent } from '@components/general/top-nav/top-nav.component';\r\nimport { UnauthorizedComponent } from '@components/general/unauthorized/unauthorized.component';\r\nimport { EditTimeoutDialogComponent } from '@modals/edit-timeout-dialog/edit-timeout-dialog.component';\r\nimport { LoginDialogComponent } from '@modals/login-dialog/login-dialog.component';\r\nimport { MessageDialogComponent } from '@modals/message-dialog/message-dialog.component';\r\nimport { ConfirmDialogComponent } from '@modals/confirm-dialog/confirm-dialog.component';\r\nimport { ProfileFormComponent } from '@components/account/profile-form/profile-form.component';\r\nimport { FilterMenuComponent } from '@components/general/filter-menu/filter-menu.component';\r\nimport { ProfileViewComponent } from '@components/account/profile-view/profile-view.component';\r\nimport { ProfileContributionsComponent } from '@components/account/profile-contributions/profile-contributions.component';\r\nimport { ProfileCardComponent } from '@components/account/profile-card/profile-card.component';\r\nimport { ContributorsComponent } from './components/articles/contributors/contributors.component';\r\nimport { CoverImageEditComponent } from './components/articles/article/cover-image-edit/cover-image-edit.component';\r\nimport { CoverImageDisplayComponent } from './components/articles/article/cover-image-display/cover-image-display.component';\r\nimport { FlagArticlesComponent } from './admin/components/flag-articles/flag-articles.component';\r\nimport { TitleEditComponent } from './components/articles/article/title/title-edit/title-edit.component';\r\nimport { TitleDisplayComponent } from './components/articles/article/title/title-display/title-display.component';\r\nimport { TitleComponent } from './components/articles/article/title/title.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    TopNavComponent,\r\n    HomeComponent,\r\n    ProfileComponent,\r\n    RegisterComponent,\r\n    ArticleComponent,\r\n    ArticlePreviewCardComponent,\r\n    RelatedArticlePipe,\r\n    ArticleSearchPipe,\r\n    ReverseArrayPipe,\r\n    SafeHtmlPipe,\r\n    SafeUrlPipe,\r\n    TimeElapsedPipe,\r\n    TruncateTagsPipe,\r\n    TruncateStringPipe,\r\n    ClickOutDirective,\r\n    CommentListComponent,\r\n    DataCleanupComponent,\r\n    CommentComponent,\r\n    UnauthorizedComponent,\r\n    EditTimeoutDialogComponent,\r\n    LoginDialogComponent,\r\n    MessageDialogComponent,\r\n    ConfirmDialogComponent,\r\n    ProfileFormComponent,\r\n    FilterMenuComponent,\r\n    ProfileViewComponent,\r\n    ProfileContributionsComponent,\r\n    ProfileCardComponent,\r\n    ContributorsComponent,\r\n    CoverImageEditComponent,\r\n    CoverImageDisplayComponent,\r\n    FlagArticlesComponent,\r\n    TitleEditComponent,\r\n    TitleDisplayComponent,\r\n    TitleComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule.withServerTransition({ appId: 'CoSourcery' }),\r\n    AppRoutingModule,\r\n    MatButtonModule,\r\n    MatInputModule,\r\n    MatCardModule,\r\n    MatToolbarModule,\r\n    MatMenuModule,\r\n    MatProgressSpinnerModule,\r\n    MatCardModule,\r\n    MatChipsModule,\r\n    MatIconModule,\r\n    MatDialogModule,\r\n    MatSidenavModule,\r\n    MatTooltipModule,\r\n    MatTabsModule,\r\n    BrowserAnimationsModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    CKEditorModule,\r\n    AngularFireModule.initializeApp(environment.fbConfig),\r\n    AngularFireAuthModule,\r\n    AngularFirestoreModule,\r\n    AngularFireStorageModule,\r\n    AngularFireDatabaseModule,\r\n  ],\r\n  entryComponents: [\r\n    EditTimeoutDialogComponent,\r\n    LoginDialogComponent,\r\n    MessageDialogComponent,\r\n    ConfirmDialogComponent,\r\n  ],\r\n  providers: [\r\n    AuthService,\r\n    DataCleanupService,\r\n    AdminService,\r\n    UploadService,\r\n    NotificationService,\r\n    ArticleService,\r\n    UserService,\r\n    CommentService,\r\n  ],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { ServerModule } from '@angular/platform-server';\r\nimport { AppModule } from './app.module';\r\nimport { AppComponent } from './app.component';\r\n\r\n@NgModule({\r\n  imports: [ServerModule, AppModule],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppServerModule {}\r\n","<div *ngIf=\"user\"\r\n         [routerLink]=\"['/profile', user.uid]\"\r\n         class=\"contributors__header\">\r\n  <div class=\"contributors__author-image-wrapper\">\r\n    <img class=\"contributors__author-image\"\r\n         [src]=\"user.displayImageUrl()\"\r\n         alt=\"Author Image\">\r\n  </div>\r\n  <div class=\"contributors__author\">\r\n    <p class=\"contributors__author-detail\"\r\n       [class.contributors__author-detail--highlight]=\"shouldHighlight\"><strong>{{ user.displayName() | truncateString: maxUsernameLength }}</strong></p>\r\n    <em class=\"contributors__author-detail contributors__author-detail_light\">{{ displayText }}</em>\r\n  </div>\r\n</div>","import { Component, OnInit, Input, HostListener } from '@angular/core';\r\nimport { UserInfoOpen } from '@class/user-info';\r\n\r\n@Component({\r\n  selector: 'cos-profile-card',\r\n  templateUrl: './profile-card.component.html',\r\n  styleUrls: ['./profile-card.component.scss'],\r\n})\r\nexport class ProfileCardComponent implements OnInit {\r\n  @HostListener('window:resize', ['$event'])\r\n  onWindowResize($event: any) {\r\n    this.checkWindowSize();\r\n  }\r\n  @Input() user: UserInfoOpen;\r\n  @Input() displayText: string;\r\n  @Input() shouldHighlight = false;\r\n  windowMaxWidth = 435;\r\n  maxUsernameLength;\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit() {\r\n    this.checkWindowSize();\r\n  }\r\n\r\n  checkWindowSize() {\r\n    window.innerWidth < this.windowMaxWidth\r\n      ? (this.maxUsernameLength = 6)\r\n      : (this.maxUsernameLength = 8);\r\n  }\r\n}\r\n","<div *ngIf=\"displayedAuthoredArticles.length > 0\">\r\n  <h3>\r\n      Recent Authored Articles\r\n      <a *ngIf=\"displayedAuthoredArticles.length <= minDisplayNum && authoredArticles.length > minDisplayNum\"\r\n        (click)=\"toggleAllAuthored()\">(show all)</a>\r\n      <a *ngIf=\"displayedAuthoredArticles.length > minDisplayNum\"\r\n        (click)=\"toggleAllAuthored()\">(collapse)</a>\r\n    </h3>\r\n  <div class=\"article-grid\">\r\n    <cos-article-preview-card [userId]=\"loggedInUserId\"\r\n                              [articleData]=\"article\"\r\n                              *ngFor=\"let article of displayedAuthoredArticles \">\r\n    </cos-article-preview-card>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"displayedEditedArticles.length > 0\">\r\n  <h3>\r\n    Recent Edited Articles\r\n    <a *ngIf=\"displayedEditedArticles.length <= minDisplayNum && editedArticles.length > minDisplayNum\"\r\n      (click)=\"toggleAllEdited()\">(show all)</a>\r\n    <a *ngIf=\"displayedEditedArticles.length > minDisplayNum\"\r\n      (click)=\"toggleAllEdited()\">(collapse)</a>\r\n  </h3>\r\n  <div class=\"article-grid\">\r\n    <cos-article-preview-card [userId]=\"loggedInUserId\"\r\n                              [articleData]=\"article\"\r\n                              *ngFor=\"let article of displayedEditedArticles \">\r\n    </cos-article-preview-card>\r\n  </div>\r\n</div>","import { Component, OnInit, Input } from '@angular/core';\r\nimport { ArticlePreview } from 'app/shared/class/article-info';\r\nimport { ArticleService } from 'app/services/article.service';\r\n\r\n@Component({\r\n  selector: 'cos-profile-contributions',\r\n  templateUrl: './profile-contributions.component.html',\r\n  styleUrls: ['./profile-contributions.component.scss']\r\n})\r\nexport class ProfileContributionsComponent implements OnInit {\r\n  @Input() loggedInUserId;\r\n  @Input() minDisplayNum = 3;\r\n\r\n  _profileId;\r\n  @Input() set profileId(profileId: string) {\r\n    this._profileId = profileId;\r\n    this.editedArticlesMap = {};\r\n    this.authoredArticlesMap = {};\r\n    this.setContributionInfo();\r\n  }\r\n  get profileId(): string { return this._profileId; }\r\n\r\n  editedArticles: ArticlePreview[];\r\n  displayedEditedArticles: ArticlePreview[];\r\n  authoredArticles: ArticlePreview[];\r\n  displayedAuthoredArticles: ArticlePreview[];\r\n  editedArticlesMap = {};\r\n  authoredArticlesMap = {};\r\n\r\n  constructor(private articleSvc: ArticleService) { }\r\n\r\n  ngOnInit() {\r\n    this.displayedEditedArticles = [];\r\n    this.displayedAuthoredArticles = [];\r\n    this.setContributionInfo();\r\n  }\r\n\r\n  watchAuthoredArticles() {\r\n    this.articleSvc.getPreviewRefsByAuthor(this.profileId).valueChanges().subscribe(previews => {\r\n      this.authoredArticles = [];\r\n      this.displayedAuthoredArticles = [];\r\n      previews.forEach(preview => {\r\n        this.authoredArticlesMap[preview.articleId] = preview;\r\n      });\r\n\r\n      this.authoredArticles = Object.values(this.authoredArticlesMap);\r\n      this.displayedAuthoredArticles = this.authoredArticles.slice(0, this.minDisplayNum);\r\n\r\n    });\r\n  }\r\n\r\n  watchEditedArticles() {\r\n    this.articleSvc.getPreviewRefsByEditor(this.profileId).valueChanges().subscribe(previews => {\r\n      this.editedArticles = [];\r\n      this.displayedEditedArticles = [];\r\n      previews.forEach(preview => {\r\n        this.editedArticlesMap[preview.articleId] = preview;\r\n      });\r\n\r\n      this.editedArticles = Object.values(this.editedArticlesMap);\r\n      this.displayedEditedArticles = this.editedArticles.slice(0, this.minDisplayNum);\r\n\r\n    });\r\n  }\r\n\r\n  setContributionInfo() {\r\n    this.watchAuthoredArticles();\r\n    this.watchEditedArticles();\r\n  }\r\n\r\n  toggleAllAuthored() {\r\n    if (this.displayedAuthoredArticles.length > this.minDisplayNum) {\r\n      this.displayedAuthoredArticles = this.authoredArticles.slice(0, this.minDisplayNum);\r\n    } else {\r\n      this.displayedAuthoredArticles = this.authoredArticles;\r\n    }\r\n  }\r\n\r\n  toggleAllEdited() {\r\n    if (this.displayedEditedArticles.length > this.minDisplayNum) {\r\n      this.displayedEditedArticles = this.editedArticles.slice(0, this.minDisplayNum);\r\n    } else {\r\n      this.displayedEditedArticles = this.editedArticles;\r\n    }\r\n  }\r\n\r\n}\r\n","<form [formGroup]=\"profileForm\" class=\"profile-card\">\r\n  <div class=\"profile-card__input-group\">\r\n    <section class=\"profile-image\">\r\n      <img\r\n        class=\"profile-image__src\"\r\n        [src]=\"\r\n          profileForm.value.imageUrl\r\n            ? profileForm.value.imageUrl\r\n            : '../../assets/images/logo.svg'\r\n        \"\r\n        alt=\"Profile Image\"\r\n      />\r\n      <input\r\n        class=\"profile-image__input\"\r\n        accept=\"image/*\"\r\n        type=\"file\"\r\n        (change)=\"onSelectProfileImage($event)\"\r\n      />\r\n      <div *ngIf=\"imageUploadPercent$\">\r\n        upload%: {{ imageUploadPercent$ | async }}\r\n      </div>\r\n    </section>\r\n\r\n    <div>\r\n      <mat-form-field class=\"profile-card__input\" [floatLabel]=\"'always'\">\r\n        <mat-label>First Name</mat-label>\r\n        <input\r\n          #firstName\r\n          matInput\r\n          type=\"text\"\r\n          formControlName=\"fName\"\r\n          maxlength=\"30\"\r\n          (blur)=\"trimInput('fName')\"\r\n          required\r\n        />\r\n        <mat-error>Please provide your first name.</mat-error>\r\n        <mat-hint align=\"end\">{{ firstName.value.length }} / 30</mat-hint>\r\n      </mat-form-field>\r\n\r\n      <mat-form-field class=\"profile-card__input\" [floatLabel]=\"'always'\">\r\n        <mat-label>Last Name</mat-label>\r\n        <input\r\n          #lastName\r\n          matInput\r\n          type=\"text\"\r\n          formControlName=\"lName\"\r\n          maxlength=\"30\"\r\n          (blur)=\"trimInput('lName')\"\r\n          required\r\n        />\r\n        <mat-error>Please provide your last name.</mat-error>\r\n        <mat-hint align=\"end\">{{ lastName.value.length }} / 30</mat-hint>\r\n      </mat-form-field>\r\n\r\n      <mat-form-field class=\"profile-card__input\" [floatLabel]=\"'always'\">\r\n        <mat-label>Alias</mat-label>\r\n        <input\r\n          #alias\r\n          matInput\r\n          type=\"text\"\r\n          formControlName=\"alias\"\r\n          maxlength=\"30\"\r\n          (blur)=\"trimInput('alias')\"\r\n        />\r\n        <mat-hint>Alternate display name.</mat-hint>\r\n        <mat-hint align=\"end\">{{ alias?.value.length }} / 30</mat-hint>\r\n      </mat-form-field>\r\n    </div>\r\n  </div>\r\n\r\n  <mat-form-field class=\"profile-card__input\" [floatLabel]=\"'always'\">\r\n    <mat-label>Bio</mat-label>\r\n    <textarea\r\n      #bio\r\n      matInput\r\n      type=\"text\"\r\n      formControlName=\"bio\"\r\n      placeholder=\"Say something about yourself ...\"\r\n      rows=\"5\"\r\n      maxlength=\"500\"\r\n      (blur)=\"trimInput('bio')\"\r\n    >\r\n    </textarea>\r\n    <mat-hint align=\"end\">{{ bio?.value.length }} / 500</mat-hint>\r\n  </mat-form-field>\r\n\r\n  <mat-form-field class=\"profile-card__input\" [floatLabel]=\"'always'\">\r\n    <mat-label>Email</mat-label>\r\n    <!-- Not allowing email updates yet -->\r\n    <input\r\n      matInput\r\n      type=\"email\"\r\n      formControlName=\"email\"\r\n      maxlength=\"50\"\r\n      (blur)=\"trimInput('email')\"\r\n      readonly\r\n      required\r\n    />\r\n    <mat-error>Please provide a valid email address.</mat-error>\r\n  </mat-form-field>\r\n\r\n  <div class=\"profile-card__input-group\">\r\n    <mat-form-field class=\"profile-card__input\" [floatLabel]=\"'always'\">\r\n      <mat-label>City</mat-label>\r\n      <input\r\n        matInput\r\n        type=\"text\"\r\n        formControlName=\"city\"\r\n        maxlength=\"30\"\r\n        (blur)=\"trimInput('city')\"\r\n      />\r\n    </mat-form-field>\r\n\r\n    <mat-form-field class=\"profile-card__input\" [floatLabel]=\"'always'\">\r\n      <mat-label>State</mat-label>\r\n      <input\r\n        matInput\r\n        type=\"text\"\r\n        formControlName=\"state\"\r\n        maxlength=\"2\"\r\n        (blur)=\"trimInput('state')\"\r\n      />\r\n    </mat-form-field>\r\n\r\n    <mat-form-field class=\"profile-card__input\" [floatLabel]=\"'always'\">\r\n      <mat-label>Zip Code</mat-label>\r\n      <input\r\n        matInput\r\n        type=\"text\"\r\n        formControlName=\"zipCode\"\r\n        maxlength=\"5\"\r\n        (blur)=\"trimInput('zipCode')\"\r\n      />\r\n    </mat-form-field>\r\n  </div>\r\n</form>\r\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { UserInfoOpen } from '@class/user-info';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'cos-profile-form',\r\n  templateUrl: './profile-form.component.html',\r\n  styleUrls: ['./profile-form.component.scss']\r\n})\r\nexport class ProfileFormComponent implements OnInit {\r\n  profileForm: FormGroup;\r\n  @Input() formUser;\r\n  @Input() imageUploadPercent$: Observable<number>;\r\n  @Output() profileImageSelected = new EventEmitter<string>();\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.formUser) {\r\n      this.profileForm = this.formBuilder.group({\r\n        alias: [this.formUser.alias, Validators.maxLength(30)],\r\n        fName: [this.formUser.fName, [\r\n          Validators.required,\r\n          Validators.maxLength(30)\r\n        ]],\r\n        lName: [this.formUser.lName, [\r\n          Validators.required,\r\n          Validators.maxLength(30)\r\n        ]],\r\n        uid: [this.formUser.uid, Validators.required],\r\n        imageUrl: this.formUser.imageUrl,\r\n        email: [this.formUser.email, [\r\n          Validators.required,\r\n          Validators.email,\r\n          Validators.maxLength(50)\r\n        ]],\r\n        zipCode: [this.formUser.zipCode, Validators.maxLength(5)],\r\n        bio: [this.formUser.bio, Validators.maxLength(500)],\r\n        city: [this.formUser.city, Validators.maxLength(30)],\r\n        state: [this.formUser.state, Validators.maxLength(2)],\r\n      });\r\n    }\r\n  }\r\n\r\n  trimInput(formControlName) {\r\n    this.profileForm.patchValue(\r\n      { [formControlName]: this.profileForm.value[formControlName].trim() }\r\n    );\r\n  }\r\n\r\n  onSelectProfileImage($event) {\r\n    this.profileImageSelected.emit($event);\r\n  }\r\n\r\n  get valid() {\r\n    return this.profileForm.valid;\r\n  }\r\n\r\n  get pristine() {\r\n    return this.profileForm.pristine;\r\n  }\r\n\r\n  get user(): UserInfoOpen {\r\n    return this.profileForm.value;\r\n  }\r\n}\r\n","<form class=\"profile-card\">\r\n  <div class=\"profile-card__input-group\">\r\n    <section class=\"profile-image\">\r\n      <img\r\n        class=\"profile-image__src\"\r\n        [src]=\"user.imageUrl ? user.imageUrl : '../../assets/images/logo.svg'\"\r\n        alt=\"Profile Image\"\r\n      />\r\n    </section>\r\n\r\n    <div>\r\n      <div class=\"profile-card__input\">\r\n        <h6>First Name</h6>\r\n        <p>{{ user.fName }}</p>\r\n      </div>\r\n\r\n      <div class=\"profile-card__input\">\r\n        <h6>Last Name</h6>\r\n        <p>{{ user.lName }}</p>\r\n      </div>\r\n\r\n      <div class=\"profile-card__input\">\r\n        <h6>Alias</h6>\r\n        <p>{{ user.alias }}</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"profile-card__input\">\r\n    <h6>Bio</h6>\r\n    <p>{{ user.bio }}</p>\r\n  </div>\r\n\r\n  <div class=\"profile-card__input-group\">\r\n    <div class=\"profile-card__input\">\r\n      <h6>City</h6>\r\n      <p>{{ user.city }}</p>\r\n    </div>\r\n\r\n    <div class=\"profile-card__input\">\r\n      <h6>State</h6>\r\n      <p>{{ user.state }}</p>\r\n    </div>\r\n\r\n    <div class=\"profile-card__input\">\r\n      <h6>Zip Code</h6>\r\n      <p>{{ user.zipCode }}</p>\r\n    </div>\r\n  </div>\r\n</form>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { Meta, Title } from '@angular/platform-browser';\r\nimport { UserInfoOpen } from '@class/user-info';\r\n\r\n@Component({\r\n  selector: 'cos-profile-view',\r\n  templateUrl: './profile-view.component.html',\r\n  styleUrls: ['../profile-form/profile-form.component.scss'],\r\n})\r\nexport class ProfileViewComponent implements OnInit {\r\n  @Input() user;\r\n\r\n  constructor(private meta: Meta, private title: Title) {}\r\n\r\n  ngOnInit() {\r\n    this.updateMetaData(this.user);\r\n  }\r\n\r\n  updateMetaData = (user: UserInfoOpen) => {\r\n    const name = user.displayName();\r\n    const { bio, city, state, fName, lName, alias } = user;\r\n\r\n    // ADD PAGE TITLE\r\n    const title = `CoSourcery - ${name}'s Profile`;\r\n    this.title.setTitle(title);\r\n\r\n    // ADD META DESCRIPTION\r\n    let description = name;\r\n\r\n    let fromPlace = '';\r\n    if (city || state) fromPlace += ' from';\r\n    if (city) {\r\n      fromPlace += ` ${city}`;\r\n      if (state) fromPlace += ',';\r\n    }\r\n    if (state) fromPlace += ` ${state}`;\r\n    description += fromPlace;\r\n\r\n    if (bio) {\r\n      description += ` | ${bio}`;\r\n    }\r\n\r\n    this.meta.updateTag({ name: 'description', content: description });\r\n\r\n    // ADD META KEYWORDS\r\n    let keywords = name;\r\n    if (alias) keywords += `, ${alias}`;\r\n    if (fName) keywords += `, ${fName}`;\r\n    if (lName) keywords += `, ${lName}`;\r\n    if (city) keywords += `, ${city}`;\r\n    if (state) keywords += `, ${state}`;\r\n\r\n    if (keywords.length > 0) {\r\n      this.meta.updateTag({ name: 'keywords', content: keywords });\r\n    }\r\n  };\r\n}\r\n","<section class=\"profile\">\r\n\r\n  <h2 class=\"profile__title\">Profile</h2>\r\n\r\n  <!-- View only Profile -->\r\n  <div *ngIf=\"userMap && userMap[profileId] && !editMode\">\r\n    <div class=\"profile__info-wrapper\">\r\n      <div class=\"top-btn-wrapper\">\r\n        <button *ngIf=\"loggedInUserId === profileId\"\r\n                class=\"cos-btn\"\r\n                type=\"button\"\r\n                (click)=\"edit()\">\r\n          Edit\r\n        </button>\r\n      </div>\r\n      <cos-profile-view [user]=\"userMap[profileId]\"></cos-profile-view>\r\n\r\n      <!-- Profile Contributions -->\r\n    </div>\r\n    <div class=\"profile__contributions-wrapper\">\r\n      <cos-profile-contributions [loggedInUserId]=\"loggedInUserId\"\r\n                                 [profileId]=\"profileId\"\r\n                                 [minDisplayNum]=\"minArticleDisplayNum\"></cos-profile-contributions>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Editable Profile Form -->\r\n  <div class=\"profile__form-wrapper\"\r\n       *ngIf=\"profileId && editMode\">\r\n    <div class=\"top-btn-wrapper\">\r\n      <button *ngIf=\"loggedInUserId\"\r\n              class=\"cos-btn\"\r\n              type=\"button\"\r\n              [disabled]=\"!formComponent.valid || formComponent.pristine\"\r\n              (click)=\"onSaveProfileChanges()\">\r\n        Update\r\n      </button>\r\n    </div>\r\n    <cos-profile-form #formComponent\r\n                      [formUser]=\"userMap[profileId]\"\r\n                      [imageUploadPercent$]=\"imageUploadPercent$\"\r\n                      (profileImageSelected)=\"onSelectProfileImage($event)\"></cos-profile-form>\r\n\r\n    <button *ngIf=\"loggedInUserId\"\r\n            class=\"cos-btn\"\r\n            type=\"button\"\r\n            [disabled]=\"!formComponent.valid || formComponent.pristine\"\r\n            (click)=\"onSaveProfileChanges()\">\r\n      Update\r\n    </button>\r\n  </div>\r\n\r\n</section>","import { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\r\nimport { UserService } from '@services/user.service';\r\nimport { UserMap, UserInfoOpen } from '@class/user-info';\r\nimport { AngularFireUploadTask } from '@angular/fire/storage';\r\nimport { Observable } from 'rxjs';\r\nimport { Params, ActivatedRoute, Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'cos-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.scss'],\r\n})\r\nexport class ProfileComponent implements OnInit, OnDestroy {\r\n  @ViewChild('formComponent') formComponent;\r\n  userMap: UserMap;\r\n  dbUser: UserInfoOpen;\r\n  profileId: string;\r\n  loggedInUserId = null;\r\n  profileImageFile: File;\r\n  imageUploadTask: AngularFireUploadTask;\r\n  imageUploadPercent$: Observable<number>;\r\n  tempImageUploadPath: string;\r\n  editMode = false;\r\n  minArticleDisplayNum = 3;\r\n\r\n  constructor(\r\n    private userSvc: UserService,\r\n    private _route: ActivatedRoute,\r\n    private _router: Router,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.userMap = this.userSvc.userMap;\r\n    this.userSvc.userInfo$.subscribe(user => {\r\n      if (user.uid) {\r\n        // explanation: intending to refactor userService to emit a userId observable, but use the userMap wherever possible instead of the userInfo.\r\n        this.loggedInUserId = user.uid;\r\n      } else {\r\n        this.loggedInUserId = null;\r\n      }\r\n      this._route.params.subscribe((params: Params) => {\r\n        if (params['key']) {\r\n          if (!this.userMap[params['key']]) {\r\n            this.userSvc.addUserToMap(params['key']);\r\n          }\r\n          this.editMode = false;\r\n          this.profileId = params['key'];\r\n        } else {\r\n          this.editMode = true;\r\n          this.dbUser = new UserInfoOpen(\r\n            user.alias,\r\n            user.fName,\r\n            user.lName,\r\n            user.uid,\r\n            user.imageUrl,\r\n            user.email,\r\n            user.zipCode,\r\n            user.bio,\r\n            user.city,\r\n            user.state,\r\n          );\r\n          this.profileId = this.loggedInUserId;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.dbUser) {\r\n      this.userMap[this.dbUser.uid] = new UserInfoOpen(\r\n        this.dbUser.alias,\r\n        this.dbUser.fName,\r\n        this.dbUser.lName,\r\n        this.dbUser.uid,\r\n        this.dbUser.imageUrl,\r\n        this.dbUser.email,\r\n        this.dbUser.zipCode,\r\n        this.dbUser.bio,\r\n        this.dbUser.city,\r\n        this.dbUser.state,\r\n      );\r\n    }\r\n    if (this.imageUploadTask) {\r\n      this.cancelUpload(this.imageUploadTask);\r\n    }\r\n    if (this.tempImageUploadPath) {\r\n      this.userSvc.deleteFile(this.tempImageUploadPath);\r\n    }\r\n  }\r\n\r\n  edit() {\r\n    this._router.navigate(['profile']);\r\n  }\r\n\r\n  async onSaveProfileChanges() {\r\n    if (this.profileImageFile) {\r\n      await this.saveProfileImage();\r\n    }\r\n    await this.userSvc.updateUser(this.formComponent.user);\r\n    this._router.navigate(['profile', this.loggedInUserId]);\r\n  }\r\n\r\n  // Cover Image Upload Functions\r\n  async onSelectProfileImage(e: HtmlInputEvent) {\r\n    const profileForm = this.formComponent.profileForm;\r\n    if (this.profileImageFile) {\r\n      this.userSvc.deleteFile(this.tempImageUploadPath);\r\n    }\r\n    this.profileImageFile = e.target.files.item(0);\r\n    const tracker = this.userSvc.uploadTempImage(this.profileImageFile);\r\n    this.imageUploadTask = tracker.task;\r\n    this.imageUploadPercent$ = tracker.task.percentageChanges();\r\n    const snap = await tracker.task.then();\r\n    const url = await tracker.ref.getDownloadURL().toPromise();\r\n    profileForm.patchValue({ imageUrl: url });\r\n    profileForm.markAsDirty();\r\n    this.tempImageUploadPath = snap.metadata.fullPath;\r\n    return;\r\n  }\r\n\r\n  async saveProfileImage() {\r\n    const tracker = this.userSvc.uploadProfileImage(\r\n      this.loggedInUserId,\r\n      this.profileImageFile,\r\n    );\r\n    this.imageUploadTask = tracker.task;\r\n    this.imageUploadPercent$ = tracker.task.percentageChanges();\r\n    const snap = await tracker.task.then();\r\n    const url = await tracker.ref.getDownloadURL().toPromise();\r\n    this.formComponent.profileForm.patchValue({ imageUrl: url });\r\n    // this.dbUser.imageUrl = url;\r\n    this.userSvc.trackUploadedProfileImages(\r\n      this.loggedInUserId,\r\n      snap.metadata.fullPath,\r\n      url,\r\n    );\r\n    this.userSvc.deleteFile(this.tempImageUploadPath);\r\n    return;\r\n  }\r\n\r\n  cancelUpload(task: AngularFireUploadTask) {\r\n    if (task) {\r\n      task.cancel();\r\n    }\r\n  }\r\n}\r\n\r\nexport interface HtmlInputEvent extends Event {\r\n  target: HTMLInputElement & EventTarget;\r\n}\r\n","<form [formGroup]=\"registerForm\"\r\n      class=\"register-form\">\r\n\r\n  <h2 class=\"register-form__title\">Create New Account</h2>\r\n\r\n  <section *ngIf=\"!currentLogin\"\r\n           class=\"register-card\">\r\n    <div class=\"register-card__input-group\">\r\n     <mat-form-field class=\"register-card__input\">\r\n      <mat-label>First Name</mat-label>\r\n      <input #firstName matInput\r\n             type=\"text\"\r\n             formControlName=\"fName\"\r\n             maxlength=\"30\"\r\n             (blur)=\"trimInput('fName')\"\r\n             required/>\r\n      <mat-error>Please provide your first name.</mat-error>\r\n      <mat-hint align=\"end\">{{firstName.value.length}} / 30</mat-hint>\r\n     </mat-form-field>\r\n\r\n     <mat-form-field class=\"register-card__input\">\r\n      <mat-label>Last Name</mat-label>\r\n      <input #lastName matInput\r\n             type=\"text\"\r\n             formControlName=\"lName\"\r\n             maxlength=\"30\"\r\n             (blur)=\"trimInput('lName')\"\r\n             required/>\r\n      <mat-error>Please provide your last name.</mat-error>\r\n      <mat-hint align=\"end\">{{lastName.value.length}} / 30</mat-hint>\r\n     </mat-form-field>\r\n    </div>\r\n\r\n    <mat-form-field class=\"register-card__input\">\r\n     <mat-label>Email</mat-label>\r\n     <input matInput\r\n            type=\"email\"\r\n            formControlName=\"email\"\r\n            maxlength=\"50\"\r\n            (blur)=\"trimInput('email')\"\r\n            required/>\r\n     <mat-error>Please provide a valid email address.</mat-error>\r\n    </mat-form-field>\r\n\r\n    <div class=\"register-card__input-group\">\r\n     <mat-form-field class=\"register-card__input\">\r\n       <mat-label>Password</mat-label>\r\n       <input #password matInput\r\n              type=\"password\"\r\n              formControlName=\"password\"\r\n              maxlength=\"30\"\r\n              required/>\r\n       <mat-error *ngIf=\"password.value.length === 0\">Please create a password.</mat-error>\r\n       <mat-error *ngIf=\"password.value.length > 0\">Password must be at least 6 characters in length.</mat-error>\r\n     </mat-form-field>\r\n\r\n     <mat-form-field class=\"register-card__input\">\r\n       <mat-label>Confirm Password</mat-label>\r\n       <input matInput\r\n              type=\"password\"\r\n              formControlName=\"confirmPass\"\r\n              maxlength=\"30\"\r\n              required/>\r\n       <mat-error>Please confirm your password.</mat-error>\r\n       <mat-hint *ngIf=\"registerForm.errors?.passwordMismatch && registerForm.controls.confirmPass.touched\"\r\n                 class=\"error\">\r\n         Your password does not match.\r\n       </mat-hint>\r\n     </mat-form-field>\r\n    </div>\r\n\r\n    <mat-form-field class=\"register-card__input\">\r\n      <mat-label>Alias (Optional)</mat-label>\r\n      <input #alias matInput\r\n             type=\"text\"\r\n             formControlName=\"alias\"\r\n             maxlength=\"30\"\r\n             (blur)=\"trimInput('alias')\"/>\r\n      <mat-hint>Used as your publicly displayed name.</mat-hint>\r\n      <mat-hint align=\"end\">{{alias.value.length}} / 30</mat-hint>\r\n    </mat-form-field>\r\n\r\n    <button class=\"cos-btn register-form__submit-btn\"\r\n            type=\"button\"\r\n            [disabled]=\"!registerForm.valid\"\r\n            (click)=\"register()\">\r\n      Create User\r\n    </button>\r\n\r\n    <mat-hint *ngIf=\"registerError\"\r\n              class=\"error\"\r\n              align=\"center\">{{registerError}}</mat-hint>\r\n  </section>\r\n\r\n  <section *ngIf=\"currentLogin\"\r\n           class=\"logout-message\">\r\n    <p class=\"logout-message__text\">Current Login:<br/><strong>{{currentLogin}}</strong></p>\r\n    <p class=\"logout-message__text\">Please logout first, before creating a new account.</p>\r\n    <button class=\"cos-btn\"\r\n            (click)=\"onLogOut()\">\r\n      Logout\r\n    </button>\r\n  </section>\r\n</form>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators, ValidatorFn, ValidationErrors } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '@services/auth.service';\r\nimport { UserService } from '@services/user.service';\r\nimport { MatDialog, MatDialogConfig } from '@angular/material';\r\nimport { MessageDialogComponent } from '@modals/message-dialog/message-dialog.component';\r\n\r\n@Component({\r\n  selector: 'cos-register',\r\n  templateUrl: './register.component.html',\r\n  styleUrls: ['./register.component.scss']\r\n})\r\nexport class RegisterComponent implements OnInit {\r\n  currentLogin: string;\r\n  registerForm: FormGroup;\r\n  registerError: string = null;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private authSvc: AuthService,\r\n    private userSvc: UserService,\r\n    private fb: FormBuilder,\r\n    private dialog: MatDialog\r\n  ) {\r\n    this.registerForm = this.fb.group({\r\n      email: ['', [\r\n        Validators.required,\r\n        Validators.email,\r\n        Validators.maxLength(50)\r\n      ]],\r\n      password: ['', [\r\n        Validators.required,\r\n        Validators.minLength(6),\r\n        Validators.maxLength(30)\r\n      ]],\r\n      confirmPass: ['', Validators.required],\r\n      fName: ['', [\r\n        Validators.required,\r\n        Validators.maxLength(30)\r\n      ]],\r\n      lName: ['', [\r\n        Validators.required,\r\n        Validators.maxLength(30)\r\n      ]],\r\n      alias: ['', Validators.maxLength(30)],\r\n      imageUrl: '',\r\n      bio: '',\r\n      city: '',\r\n      state: '',\r\n      zipCode: ''\r\n    },\r\n      { validator: passwordMismatch });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.authSvc.authInfo$.subscribe(userData => {\r\n      this.currentLogin = userData.email;\r\n    });\r\n  }\r\n\r\n  onLogOut() {\r\n    this.authSvc.logout();\r\n  }\r\n\r\n  async register() {\r\n    this.registerError = null;\r\n    const val = this.registerForm.value;\r\n    try {\r\n      const res = await this.authSvc.register(val.email, val.password);\r\n      this.openMessageDialog('Successful Registration', 'Thanks for creating an account!', 'Play nice, make friends, and contribute to the wealth of knowledge we\\'re building together.');\r\n      delete val.password;\r\n      delete val.confirmPass;\r\n      this.authSvc.sendVerificationEmail();\r\n      this.createNewUser(val, res.user.uid);\r\n    } catch (err) {\r\n      this.registerError = err;\r\n    }\r\n  }\r\n\r\n  async createNewUser(formValue, userId: string) {\r\n    try {\r\n      await this.userSvc.createUser(formValue, userId);\r\n      this.router.navigate(['profile']);\r\n    } catch (err) {\r\n      this.openMessageDialog('Registration Error', 'Oops! We might not have saved your user info quite right.', `Error: ${err}`);\r\n    }\r\n  }\r\n\r\n  trimInput(formControlName) {\r\n    this.registerForm.patchValue(\r\n      { [formControlName]: this.registerForm.value[formControlName].trim() }\r\n    );\r\n  }\r\n\r\n  openMessageDialog(title: string, msg1: string, msg2: string = null) {\r\n    const dialogConfig = new MatDialogConfig();\r\n    dialogConfig.disableClose = true;\r\n    dialogConfig.data = {\r\n      dialogTitle: title ? title : null,\r\n      dialogLine1: msg1 ? msg1 : null,\r\n      dialogLine2: msg2 ? msg2 : null\r\n    }\r\n    return this.dialog.open(MessageDialogComponent, dialogConfig);\r\n  }\r\n\r\n}\r\n\r\n// Custom Validator\r\nexport const passwordMismatch: ValidatorFn = (formGroup: FormGroup): ValidationErrors | null => {\r\n  const password = formGroup.get('password').value;\r\n  const retypedPassword = formGroup.get('confirmPass').value;\r\n  return password !== retypedPassword ? { 'passwordMismatch': true } : null;\r\n};\r\n","<article class=\"preview-card\">\r\n\r\n  <a [routerLink]=\"'/article/' + articleData.articleId\">\r\n    <section class=\"card-content\">\r\n      <img class=\"card-content__image\"\r\n           [src]=\"(articleData.imageUrl) ? articleData.imageUrl : '../../assets/images/logo.svg'\"\r\n           [alt]=\"(articleData.imageAlt) ? articleData.imageAlt : 'Cover Image'\">\r\n      <h2 class=\"card-content__title\">{{articleData.title | truncateString: 20}}</h2>\r\n      <p class=\"card-content__date\">Last Updated: {{articleData?.lastUpdated?.toDate() | date}}</p>\r\n      <p>{{articleData.introduction | truncateString: 100}}</p>\r\n    </section>\r\n  </a>\r\n\r\n  <section class=\"card-icons\">\r\n    <div class=\"counter-icons\">\r\n      <div class=\"counter-icons__item\">\r\n        <mat-icon>comment</mat-icon>\r\n        <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_above\"\r\n              style=\"left: 0;\">\r\n          {{articleData.commentCount}} Comment(s)\r\n        </span>\r\n        <span class=\"counter-icons__stat\">{{articleData.commentCount}}</span>\r\n      </div>\r\n      <div class=\"counter-icons__item\">\r\n        <mat-icon>border_color</mat-icon>\r\n        <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_above\">{{articleData.version}} Edit(s)</span>\r\n        <span class=\"counter-icons__stat\">{{articleData.version}}</span>\r\n      </div>\r\n      <div class=\"counter-icons__item\">\r\n        <mat-icon>loyalty</mat-icon>\r\n        <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_above\">{{articleData.tags.length}} Tag(s)</span>\r\n        <span class=\"counter-icons__stat\">{{articleData.tags.length}}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"counter-icons__item bookmark-icon\"\r\n         (click)=\"authCheck() ? bookmarkToggle() : null\">\r\n      <mat-icon>{{isArticleBookmarked && userId ? 'bookmark' : 'bookmark_border'}}</mat-icon>\r\n      <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_above\"\r\n            style=\"right: 0;\">\r\n        {{isArticleBookmarked && userId ? 'Remove Bookmark' : 'Bookmark'}}\r\n      </span>\r\n    </div>\r\n  </section>\r\n\r\n</article>\r\n","import { Component, OnInit, Input, SimpleChanges, OnChanges } from '@angular/core';\r\nimport { ArticleService } from '@services/article.service';\r\nimport { ArticlePreview } from '@class/article-info';\r\nimport { MatDialog } from '@angular/material';\r\nimport { LoginDialogComponent } from '@modals/login-dialog/login-dialog.component';\r\n\r\n@Component({\r\n  selector: 'cos-article-preview-card',\r\n  templateUrl: './article-preview-card.component.html',\r\n  styleUrls: ['./article-preview-card.component.scss']\r\n})\r\n\r\nexport class ArticlePreviewCardComponent implements OnInit, OnChanges {\r\n  @Input() articleData: ArticlePreview;\r\n  @Input() userId: string;\r\n  isArticleBookmarked: boolean;\r\n  constructor(\r\n    private articleSvc: ArticleService,\r\n    private dialog: MatDialog\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.userId) {\r\n      this.checkIfBookmarked();\r\n    }\r\n    const url = this.articleData.imageUrl;\r\n    if (url === 'unset') {\r\n      this.articleSvc.setThumbnailImageUrl(this.articleData.articleId);\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.userId.currentValue) {\r\n      this.checkIfBookmarked();\r\n    }\r\n  }\r\n\r\n  async checkIfBookmarked() {\r\n    const ref = await this.articleSvc.bookmarkedRef(this.userId, this.articleData.articleId);\r\n    ref.valueChanges().subscribe(snapshot => {\r\n      if (snapshot && snapshot.toString().length === 13) {\r\n        this.isArticleBookmarked = true;\r\n      } else {\r\n        this.isArticleBookmarked = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  bookmarkToggle() {\r\n    if (this.userId) {\r\n      if (this.isArticleBookmarked) {\r\n        this.articleSvc.unBookmarkArticle(this.userId, this.articleData.articleId);\r\n      } else {\r\n        this.articleSvc.bookmarkArticle(this.userId, this.articleData.articleId);\r\n      }\r\n    }\r\n  }\r\n\r\n  authCheck() {\r\n    if (this.userId) {\r\n      return true;\r\n    } else {\r\n      this.dialog.open(LoginDialogComponent);\r\n      return false;\r\n    }\r\n  }\r\n\r\n}\r\n","<form #formBoundingBox [formGroup]=\"articleEditForm\" class=\"article-form\">\r\n  <section\r\n    class=\"article-cover-image\"\r\n    (cosClickOut)=\"clickoutCtrl(CtrlNames.coverImage)\"\r\n  >\r\n    <cos-cover-image-display\r\n      [coverImageUrl]=\"coverImageUrl$ | async\"\r\n      [imageAlt]=\"articleState?.imageAlt\"\r\n      [isCtrlActive]=\"isCtrlActive(CtrlNames.coverImage)\"\r\n      (onCtrlToggle)=\"toggleCtrl(CtrlNames.coverImage)\"\r\n    ></cos-cover-image-display>\r\n    <cos-cover-image-edit\r\n      [isCtrlActive]=\"isCtrlActive(CtrlNames.coverImage)\"\r\n      [shouldAbort]=\"shouldAbortTempCoverImage\"\r\n      [parentForm]=\"articleEditForm\"\r\n      (onCoverImageSelected)=\"onSelectCoverImage($event)\"\r\n    ></cos-cover-image-edit>\r\n  </section>\r\n\r\n  <section class=\"article-header\">\r\n    <section\r\n      class=\"article-title\"\r\n      (cosClickOut)=\"clickoutCtrl(CtrlNames.title)\"\r\n    >\r\n      <cos-title\r\n        [parentForm]=\"articleEditForm\"\r\n        [isActive]=\"isCtrlActive(CtrlNames.title)\"\r\n        [title]=\"articleState?.title\"\r\n        (onCtrlToggle)=\"toggleCtrl(CtrlNames.title)\"\r\n      ></cos-title>\r\n    </section>\r\n\r\n    <p class=\"article-date\">\r\n      <span *ngIf=\"formIsInCreateView\"\r\n        >Current Date: {{ articleSvc.tempTimestamp().toDate() | date }}</span\r\n      >\r\n      <span *ngIf=\"!formIsInCreateView\"\r\n        >Last Updated: {{ articleState?.lastUpdated?.toDate() | date }}</span\r\n      >\r\n    </p>\r\n\r\n    <section\r\n      class=\"article-intro\"\r\n      (cosClickOut)=\"clickoutCtrl(CtrlNames.intro)\"\r\n    >\r\n      <p *ngIf=\"!isCtrlActive(CtrlNames.intro)\" class=\"static-display\">\r\n        {{ articleState?.introduction }}\r\n        <span *ngIf=\"articleState?.introduction === ''\"\r\n          >Add an introduction to tell people what your article is about. It can\r\n          be a few words or several sentences, but should be pretty short.</span\r\n        >\r\n      </p>\r\n      <mat-form-field *ngIf=\"isCtrlActive(CtrlNames.intro)\">\r\n        <p>\r\n          <textarea\r\n            #introduction\r\n            matInput\r\n            type=\"text\"\r\n            formControlName=\"introduction\"\r\n            rows=\"3\"\r\n            maxlength=\"300\"\r\n            required\r\n          ></textarea>\r\n        </p>\r\n        <mat-hint align=\"end\">{{ introduction.value.length }} / 300</mat-hint>\r\n        <mat-error>Please add an introduction.</mat-error>\r\n      </mat-form-field>\r\n      <button\r\n        class=\"mat-icon-btn\"\r\n        [ngClass]=\"{ active: isCtrlActive(CtrlNames.intro) }\"\r\n        type=\"button\"\r\n        (click)=\"toggleCtrl(CtrlNames.intro)\"\r\n      >\r\n        <mat-icon>{{\r\n          isCtrlActive(CtrlNames.intro) ? 'clear' : 'edit'\r\n        }}</mat-icon>\r\n        <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">{{\r\n          isCtrlActive(CtrlNames.intro) ? 'Close Intro' : 'Edit Intro'\r\n        }}</span>\r\n      </button>\r\n    </section>\r\n\r\n    <section class=\"article-utils\">\r\n      <div class=\"counters\">\r\n        <div class=\"counters__item\">\r\n          <mat-icon class=\"counters__icon\">comment</mat-icon>\r\n          <span\r\n            class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_above\"\r\n            style=\"left: 0;\"\r\n          >\r\n            {{ articleState?.commentCount }} Comment(s)\r\n          </span>\r\n          <span class=\"counters__item-stat\">{{\r\n            articleState?.commentCount\r\n          }}</span>\r\n        </div>\r\n        <div class=\"counters__item\">\r\n          <mat-icon class=\"counters__icon\">border_color</mat-icon>\r\n          <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_above\"\r\n            >{{ articleState?.version }} Edit(s)</span\r\n          >\r\n          <span class=\"counters__item-stat\">{{ articleState?.version }}</span>\r\n        </div>\r\n        <div class=\"counters__item\">\r\n          <mat-icon class=\"counters__icon\">loyalty</mat-icon>\r\n          <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_above\"\r\n            >{{ articleState?.tags.length }} Tag(s)</span\r\n          >\r\n          <span class=\"counters__item-stat\">{{\r\n            articleState?.tags.length\r\n          }}</span>\r\n        </div>\r\n      </div>\r\n      <div\r\n        *ngIf=\"!articleIsNew\"\r\n        class=\"counters__item counters__item_clickable\"\r\n        (click)=\"authCheck() ? bookmarkToggle() : null\"\r\n      >\r\n        <mat-icon class=\"counters__icon\">{{\r\n          articleIsBookmarked && loggedInUser.uid\r\n            ? 'bookmark'\r\n            : 'bookmark_border'\r\n        }}</mat-icon>\r\n        <span\r\n          class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_above\"\r\n          style=\"right: 0;\"\r\n        >\r\n          {{\r\n            articleIsBookmarked && loggedInUser.uid\r\n              ? 'Remove Bookmark'\r\n              : 'Bookmark'\r\n          }}\r\n        </span>\r\n      </div>\r\n    </section>\r\n    <section class=\"article-attributions\">\r\n      <cos-contributors\r\n        [creatorId]=\"articleState?.authorId\"\r\n        [editorMap]=\"articleState?.editors\"\r\n      >\r\n      </cos-contributors>\r\n    </section>\r\n  </section>\r\n  <section\r\n    #ckeditorBoundingBox\r\n    class=\"article-body\"\r\n    [ngClass]=\"{\r\n      'not-editable': !loggedInUser.uid || !isCtrlActive(CtrlNames.body)\r\n    }\"\r\n  >\r\n    <div\r\n      class=\"article-body__interior\"\r\n      [ngClass]=\"{ border: loggedInUser.uid && isCtrlActive(CtrlNames.body) }\"\r\n    >\r\n      <button\r\n        class=\"mat-icon-btn\"\r\n        [ngClass]=\"{ active: loggedInUser.uid && isCtrlActive(CtrlNames.body) }\"\r\n        [ngStyle]=\"{\r\n          transform: 'translateY(' + ckeditor.toggleBtnOffset + 'px)'\r\n        }\"\r\n        type=\"button\"\r\n        (click)=\"toggleCtrl(CtrlNames.body)\"\r\n      >\r\n        <mat-icon>{{\r\n          loggedInUser.uid && isCtrlActive(CtrlNames.body) ? 'clear' : 'edit'\r\n        }}</mat-icon>\r\n        <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">{{\r\n          loggedInUser.uid && isCtrlActive(CtrlNames.body)\r\n            ? 'Close Body'\r\n            : 'Edit Body'\r\n        }}</span>\r\n      </button>\r\n      <ckeditor\r\n        *ngIf=\"ckeditor.content\"\r\n        (change)=\"onCKEditorChanged($event)\"\r\n        (ready)=\"onCKEditorReady($event)\"\r\n        [data]=\"ckeditor.content\"\r\n        [editor]=\"ckeditor.build\"\r\n        [config]=\"ckeditor.config\"\r\n        [disabled]=\"!loggedInUser.uid || !isCtrlActive(CtrlNames.body)\"\r\n      >\r\n      </ckeditor>\r\n    </div>\r\n  </section>\r\n\r\n  <section class=\"article-tags\" (cosClickOut)=\"clickoutCtrl(CtrlNames.tags)\">\r\n    <h3>Tags</h3>\r\n    <p *ngIf=\"articleState?.tags.length === 0 && !isCtrlActive(CtrlNames.tags)\">\r\n      This article has no tags. Click the edit icon, enter a tag, and press\r\n      enter.\r\n    </p>\r\n    <mat-chip-list *ngIf=\"!isCtrlActive(CtrlNames.tags)\">\r\n      <mat-chip *ngFor=\"let articleTag of articleState?.tags\">{{\r\n        articleTag\r\n      }}</mat-chip>\r\n    </mat-chip-list>\r\n\r\n    <mat-form-field *ngIf=\"isCtrlActive(CtrlNames.tags)\">\r\n      <mat-chip-list #chipList>\r\n        <mat-chip\r\n          *ngFor=\"let articleTag of articleState?.tags\"\r\n          (removed)=\"removeTag(articleTag)\"\r\n        >\r\n          {{ articleTag }}\r\n          <mat-icon matChipRemove>cancel</mat-icon>\r\n        </mat-chip>\r\n        <input\r\n          #tagInput\r\n          [ngClass]=\"{ error: isInvalidTagInput(tagInput.value) }\"\r\n          maxlength=\"25\"\r\n          [matChipInputFor]=\"chipList\"\r\n          [matChipInputSeparatorKeyCodes]=\"matChipInputSeparatorKeyCodes\"\r\n          [matChipInputAddOnBlur]=\"true\"\r\n          (matChipInputTokenEnd)=\"\r\n            isInvalidTagInput(tagInput.value) ? null : addTag($event)\r\n          \"\r\n        />\r\n      </mat-chip-list>\r\n      <mat-hint [ngClass]=\"{ error: isInvalidTagInput(tagInput.value) }\">\r\n        No special characters. Type, then press enter to submit each tag.\r\n      </mat-hint>\r\n      <mat-hint align=\"end\">{{ tagInput.value.length }} / 25</mat-hint>\r\n    </mat-form-field>\r\n    <button\r\n      class=\"mat-icon-btn\"\r\n      [ngClass]=\"{ active: isCtrlActive(CtrlNames.tags) }\"\r\n      type=\"button\"\r\n      (click)=\"toggleCtrl(CtrlNames.tags)\"\r\n    >\r\n      <mat-icon>{{ isCtrlActive(CtrlNames.tags) ? 'clear' : 'edit' }}</mat-icon>\r\n      <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">{{\r\n        isCtrlActive(CtrlNames.tags) ? 'Close Tags' : 'Edit Tags'\r\n      }}</span>\r\n    </button>\r\n  </section>\r\n\r\n  <section class=\"save-undo-abs-position\">\r\n    <div\r\n      class=\"save-undo-sticky-position\"\r\n      [ngClass]=\"{\r\n        extended: articleHasUnsavedChanges(),\r\n        sticky: saveButtonIsSticky,\r\n        disabled: !articleEditForm.valid || !articleHasUnsavedChanges()\r\n      }\"\r\n    >\r\n      <button\r\n        class=\"save-control save-button mat-icon-btn mat-icon-btn_no-shadow\"\r\n        type=\"button\"\r\n        [disabled]=\"!articleEditForm.valid || !articleHasUnsavedChanges()\"\r\n        (click)=\"authCheck() ? saveChanges() : null\"\r\n      >\r\n        <mat-icon>done</mat-icon>\r\n      </button>\r\n\r\n      <div\r\n        *ngIf=\"!articleIsNew\"\r\n        class=\"restore-control flag flag-axle flag-axle-90\"\r\n        [ngClass]=\"{ 'flag-axle-90_active': articleHasUnsavedChanges() }\"\r\n      >\r\n        <div class=\"flag flag-pole flag-pole_right\">\r\n          <button\r\n            class=\"restore-button mat-icon-btn mat-icon-btn_no-shadow\"\r\n            type=\"button\"\r\n            [disabled]=\"!articleHasUnsavedChanges()\"\r\n            (click)=\"cancelChanges()\"\r\n          >\r\n            <mat-icon>replay</mat-icon>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        class=\"flag flag-axle flag-axle-270\"\r\n        [ngClass]=\"{ 'flag-axle-270_active': articleHasUnsavedChanges() }\"\r\n      >\r\n        <div class=\"flag flag-pole flag-pole_left\">\r\n          <div class=\"flag flag-tooltip\">\r\n            <span class=\"flag-tooltip_changes\">Unsaved</span>\r\n            <span class=\"flag-tooltip_save\">Save Article</span>\r\n            <span class=\"flag-tooltip_restore\">Undo Changes</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</form>\r\n\r\n<!-- Top-Level Comment -->\r\n<section *ngIf=\"!articleIsNew\" class=\"article-comments\">\r\n  <section class=\"article-comments__header\">\r\n    <h2 class=\"article-comments__title\">Discussion</h2>\r\n    <button\r\n      *ngIf=\"commentReplyInfo.replyParentKey !== articleId || !loggedInUser.uid\"\r\n      class=\"cos-btn\"\r\n      (click)=\"authCheck() ? enterNewCommentMode() : null\"\r\n    >\r\n      Comment\r\n    </button>\r\n  </section>\r\n\r\n  <section class=\"comment-wrapper_root\">\r\n    <section\r\n      *ngIf=\"commentReplyInfo.replyParentKey === articleId && loggedInUser.uid\"\r\n      class=\"comment-container comment-container_new-reply comment-content-region\"\r\n    >\r\n      <div class=\"comment-container__border-decoration\">\r\n        <div\r\n          class=\"border-endpoint border-endpoint_top border-endpoint_accent-2\"\r\n        ></div>\r\n        <div\r\n          class=\"border-endpoint border-endpoint_bottom border-endpoint_accent-2\"\r\n        ></div>\r\n      </div>\r\n      <cos-comment\r\n        [isBeingEdited]=\"true\"\r\n        [loggedInUser]=\"loggedInUser\"\r\n        [authorInfo]=\"loggedInUser\"\r\n        [comment]=\"newCommentStub\"\r\n      >\r\n      </cos-comment>\r\n      <section class=\"comment-controls\">\r\n        <button\r\n          class=\"mat-icon-btn mat-icon-btn_small\"\r\n          (click)=\"onAddComment()\"\r\n        >\r\n          <mat-icon class=\"mat-icon_small\">check</mat-icon>\r\n          <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\"\r\n            >Save</span\r\n          >\r\n        </button>\r\n        <button\r\n          class=\"mat-icon-btn mat-icon-btn_small\"\r\n          (click)=\"onCancelNewComment()\"\r\n        >\r\n          <mat-icon class=\"mat-icon_small\">clear</mat-icon>\r\n          <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\"\r\n            >Cancel</span\r\n          >\r\n        </button>\r\n      </section>\r\n    </section>\r\n  </section>\r\n\r\n  <!-- Existing Comments -->\r\n  <cos-comment-list\r\n    [isUnderComment]=\"false\"\r\n    [commentReplyInfo]=\"commentReplyInfo\"\r\n    [commentEditInfo]=\"commentEditInfo\"\r\n    [loggedInUser]=\"loggedInUser\"\r\n    [parentKey]=\"articleId\"\r\n    [userMap]=\"userMap\"\r\n    [userKeys]=\"userKeys\"\r\n    [userVotesMap]=\"userVotesMap\"\r\n  >\r\n  </cos-comment-list>\r\n</section>\r\n","import {\r\n  Component,\r\n  ViewChild,\r\n  OnInit,\r\n  OnDestroy,\r\n  HostListener,\r\n} from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport {\r\n  MatChipInputEvent,\r\n  MatDialog,\r\n  MatDialogConfig,\r\n} from '@angular/material';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Meta, Title } from '@angular/platform-browser';\r\nimport { ENTER } from '@angular/cdk/keycodes';\r\nimport { Subscription, Observable, BehaviorSubject } from 'rxjs';\r\nimport { ArticleService } from '@services/article.service';\r\nimport { UserService } from '@services/user.service';\r\nimport * as InlineEditor from '@ckeditor/ckeditor5-build-inline';\r\nimport { ChangeEvent } from '@ckeditor/ckeditor5-angular/ckeditor.component';\r\nimport { AngularFireUploadTask } from '@angular/fire/storage';\r\nimport { UserInfoOpen, UserMap } from '@class/user-info';\r\nimport { CommentService } from '@services/comment.service';\r\nimport { Comment, ParentTypes, KeyMap, VoteDirections } from '@class/comment';\r\nimport { EditTimeoutDialogComponent } from '@modals/edit-timeout-dialog/edit-timeout-dialog.component';\r\nimport { LoginDialogComponent } from '@modals/login-dialog/login-dialog.component';\r\nimport { MessageDialogComponent } from '@modals/message-dialog/message-dialog.component';\r\nimport * as exif from 'exif-js';\r\nimport { ConfirmDialogComponent } from '@modals/confirm-dialog/confirm-dialog.component';\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\nimport { BodyImageMeta, ArticleDetail } from '@class/article-info';\r\n\r\n@Component({\r\n  selector: 'cos-article',\r\n  templateUrl: './article.component.html',\r\n  styleUrls: ['./article.component.scss'],\r\n})\r\nexport class ArticleComponent implements OnInit, OnDestroy {\r\n  @ViewChild('ckeditorBoundingBox') ckeditorBoundingBox;\r\n  @ViewChild('formBoundingBox') formBoundingBox;\r\n  @HostListener('window:beforeunload', ['$event'])\r\n  unloadNotification($event: any) {\r\n    if (this.articleHasUnsavedChanges()) {\r\n      $event.returnValue = true;\r\n    }\r\n  }\r\n  @HostListener('window:keydown', ['$event'])\r\n  onkeydown($event: any) {\r\n    if (this.userIsEditingArticle()) {\r\n      if ($event.ctrlKey && $event.code === 'KeyS') {\r\n        $event.preventDefault();\r\n        this.saveChanges();\r\n      }\r\n    }\r\n  }\r\n  @HostListener('window:scroll')\r\n  onScroll() {\r\n    this.setCkeditorButtonOffset();\r\n    this.setStickySaveButton();\r\n  }\r\n\r\n  loggedInUser: UserInfoOpen = null;\r\n\r\n  // Dialog Tracker for Overriding UnsavedChangesGuard\r\n  dialogIsOpen: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\r\n\r\n  // Article State\r\n  articleId: any;\r\n  articleIsNew: boolean;\r\n  articleIsBookmarked: boolean;\r\n  articleSubscription: Subscription;\r\n  articleEditorSubscription: Subscription;\r\n  currentArticleEditors = {};\r\n\r\n  // Article Form State\r\n  formIsInCreateView: boolean;\r\n  articleEditFormSubscription: Subscription;\r\n  editSessionTimeout;\r\n  saveButtonIsSticky = true;\r\n\r\n  CtrlNames = CtrlNames; // Enum Availablility in HTML Template\r\n  ctrlBeingEdited: CtrlNames = CtrlNames.none;\r\n\r\n  readonly matChipInputSeparatorKeyCodes: number[] = [ENTER];\r\n\r\n  // Cover Image State\r\n  coverImageFile: File;\r\n  shouldAbortTempCoverImage = false;\r\n  coverImageUploadTask: AngularFireUploadTask;\r\n  coverImageUploadPercent$: Observable<number>;\r\n  coverImageUrl$ = new BehaviorSubject<string>(null);\r\n\r\n  articleState: ArticleDetail;\r\n  articleEditForm: FormGroup = this.fb.group({\r\n    articleId: '',\r\n    authorId: '',\r\n    title: ['', [Validators.required, Validators.maxLength(100)]],\r\n    introduction: ['', [Validators.required, Validators.maxLength(300)]],\r\n    body: 'This article is empty.',\r\n    bodyImages: {},\r\n    imageUrl: '',\r\n    imageAlt: ['', Validators.maxLength(100)],\r\n    authorImageUrl: '',\r\n    lastUpdated: null,\r\n    timestamp: 0,\r\n    lastEditorId: '',\r\n    version: 1,\r\n    commentCount: 0,\r\n    viewCount: 0,\r\n    tags: [[], Validators.maxLength(25)],\r\n    isFeatured: false,\r\n    editors: {},\r\n  });\r\n\r\n  // CKEditor setup\r\n  ckEditorReady = false;\r\n  ckeditor = {\r\n    build: InlineEditor,\r\n    config: {\r\n      toolbar: {\r\n        items: [\r\n          'heading',\r\n          'bold',\r\n          'italic',\r\n          'link',\r\n          'bulletedList',\r\n          'numberedList',\r\n          'blockQuote',\r\n          'imageUpload',\r\n          'mediaEmbed',\r\n          'insertTable',\r\n        ],\r\n        viewportTopOffset: 70,\r\n      },\r\n      // fbImageStorage is declared here but set after articleId is set.\r\n      fbImageStorage: {},\r\n    },\r\n    placeholder:\r\n      \"<h2>Creating a New Article</h2><ol><li>Add an eye-catching <strong>Cover Image</strong> above.</li><li>Choose a concise, meaningful, and interesting <strong>Title</strong>.</li><li>Write a brief <strong>Intro</strong> to outline the topic of your article and why it's so cool!</li><li>Add the <strong>Body</strong> of your article by editing this block of content.</li><li>Add some <strong>Tags</strong> below to help people find your article.</li><li>Click <strong>Save Article</strong> when you're done.</li></ol>\",\r\n    content: null,\r\n    toggleBtnOffset: 0,\r\n  };\r\n\r\n  // Top-Level Comments State\r\n  newCommentStub: Comment;\r\n  commentReplyInfo = { replyParentKey: null };\r\n  commentEditInfo = { commentKey: null };\r\n  userMap: UserMap = {};\r\n  userKeys: string[];\r\n  userVotesMap: KeyMap<VoteDirections> = {};\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private meta: Meta,\r\n    private title: Title,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private articleSvc: ArticleService,\r\n    private userSvc: UserService,\r\n    private commentSvc: CommentService,\r\n    private dialog: MatDialog,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.setArticleId();\r\n    this.watchFormChanges();\r\n    this.watchArticle();\r\n    this.initializeArticleState();\r\n    this.watchUserInfo();\r\n    this.watchCurrentEditors();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.articleSubscription.unsubscribe();\r\n    this.articleEditorSubscription.unsubscribe();\r\n    this.articleEditFormSubscription.unsubscribe();\r\n    this.abortChanges();\r\n  }\r\n\r\n  // Form Setup & Breakdown\r\n  initializeArticleState = () => {\r\n    this.articleState = this.articleEditForm.value;\r\n  };\r\n\r\n  setArticleId() {\r\n    this.route.params.subscribe(params => {\r\n      if (params['key']) {\r\n        this.articleId = params['key'];\r\n        this.articleIsNew = false;\r\n      } else {\r\n        this.articleId = this.articleSvc.createArticleId();\r\n        this.articleIsNew = true;\r\n        this.formIsInCreateView = true;\r\n      }\r\n      this.ckeditor.config.fbImageStorage = {\r\n        storageRef: this.articleSvc.createVanillaStorageRef(\r\n          `articleBodyImages/${this.articleId}/`,\r\n        ),\r\n      };\r\n    });\r\n  }\r\n\r\n  watchArticle() {\r\n    this.articleSubscription = this.articleSvc\r\n      .getArticleRefById(this.articleId)\r\n      .valueChanges()\r\n      .subscribe(articleData => {\r\n        this.updateMetaData(articleData);\r\n        this.ckeditor.content = articleData\r\n          ? articleData.body\r\n          : this.ckeditor.placeholder;\r\n        this.setFormData(articleData);\r\n      });\r\n  }\r\n\r\n  watchFormChanges() {\r\n    this.articleEditFormSubscription = this.articleEditForm.valueChanges.subscribe(\r\n      change => {\r\n        this.articleState = change;\r\n        if (this.articleEditForm.dirty) {\r\n          this.setEditSessionTimeout();\r\n          if (!this.userIsEditingArticle()) {\r\n            this.addUserEditingStatus();\r\n          }\r\n        }\r\n      },\r\n    );\r\n  }\r\n\r\n  updateMetaData = (article: ArticleDetail) => {\r\n    const { title, introduction, body, tags } = article;\r\n\r\n    this.title.setTitle(`CoSourcery - ${title}`);\r\n\r\n    const description = this.createMetaDescription(introduction, body);\r\n    this.meta.updateTag({\r\n      name: 'description',\r\n      content: description,\r\n    });\r\n\r\n    const keywords = tags.join(', ').toLowerCase();\r\n    this.meta.updateTag({ name: 'keywords', content: keywords });\r\n  };\r\n\r\n  createMetaDescription = (intro: string, body: string) => {\r\n    const introLength = intro.length;\r\n    if (introLength > 325) return intro.substr(0, 325);\r\n    const lengthToFill = 350 - introLength;\r\n    const cleanBody = body\r\n      .replace(/<\\/?[^>]+(>|$)/g, ' ')\r\n      .replace('&nbsp;', '')\r\n      .replace(/\\s+/g, ' ');\r\n    return intro.concat(' - ').concat(cleanBody.substr(0, lengthToFill));\r\n  };\r\n\r\n  setFormData(data) {\r\n    if (data) {\r\n      this.articleEditForm.patchValue(data);\r\n      this.coverImageUrl$.next(data.imageUrl);\r\n    }\r\n  }\r\n\r\n  onCKEditorChanged({ event, editor }: ChangeEvent) {\r\n    // We're not using CKEditor as a normal FormControl because its scripts would mark the form as \"dirty\" even when the data was coming from DB.\r\n    // This approach allows us to manually mark it as dirty only when the changes are local.\r\n    const contents = editor.getData();\r\n    // If onCKEditorReady hasn't run, this will still run with no images to process.\r\n    if (this.ckEditorReady) {\r\n      // setTimeout with 0 delay still pushes this down the stack so we get the updated body.\r\n      // Otherwise when deleting an image, we'll still process the deleted image.\r\n      setTimeout(() => {\r\n        this.processCKEditorImages();\r\n      }, 0);\r\n    }\r\n    this.articleEditForm.markAsDirty();\r\n    this.articleEditForm.patchValue({ body: contents });\r\n  }\r\n\r\n  onCKEditorReady($event) {\r\n    this.ckEditorReady = true;\r\n    this.processCKEditorImages();\r\n  }\r\n\r\n  // CKEditor image processing (would like to move some of this out side the component)\r\n  processCKEditorImages() {\r\n    const figures = document.getElementsByClassName('image');\r\n    for (let i = 0; i < figures.length; i++) {\r\n      const fig = figures[i];\r\n      const img = fig.firstChild as HTMLImageElement;\r\n      if (img.complete) {\r\n        // Processes images when for one reason or another they are already loaded but may not be rotated.\r\n        this.rotateImage(img);\r\n      } else {\r\n        img.onload = ev$ => {\r\n          // Processes images when form first loaded\r\n          this.rotateImage(img);\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  async rotateImage(img) {\r\n    if (img.src.includes('data:image')) {\r\n      return;\r\n    }\r\n    const storage = firebase.storage();\r\n    const imgPath = storage.refFromURL(img.src).fullPath;\r\n    const imgCode = imgPath.split('/')[imgPath.split('/').length - 1];\r\n\r\n    let rotation: orientationDegrees = 0;\r\n    // check if it's been rotated, if so, don't do any extra stuff\r\n    if (img.style.transform && img.style.transform.includes('rotate')) {\r\n      return;\r\n      // check if it's in the map, if so, set rotation via its orientation\r\n    } else if (this.articleEditForm.value.bodyImages[imgCode]) {\r\n      rotation = this.exifOrientationToDegrees(\r\n        this.articleEditForm.value.bodyImages[imgCode].orientation,\r\n      );\r\n      // else add it to the map with it's correct orientation\r\n    } else {\r\n      let orientation = await this.getExifOrientation(img);\r\n      orientation = orientation ? orientation : 0;\r\n      rotation = this.exifOrientationToDegrees(orientation);\r\n\r\n      const imageObject: BodyImageMeta = {\r\n        path: imgPath,\r\n        orientation: orientation,\r\n      };\r\n\r\n      this.articleEditForm.value.bodyImages[imgCode] = imageObject;\r\n    }\r\n\r\n    img.setAttribute(\r\n      'style',\r\n      `transform:rotate(${rotation}deg); margin: 80px 0 `,\r\n    );\r\n  }\r\n\r\n  getExifOrientation(img): Promise<number> {\r\n    const promise = new Promise<number>((resolve, reject) => {\r\n      try {\r\n        exif.getData(img as any, function() {\r\n          const orientation = exif.getTag(this, 'Orientation');\r\n          return resolve(orientation);\r\n        });\r\n      } catch (error) {\r\n        // console.log('Can\\'t get EXIF', error);\r\n        return reject(error);\r\n      }\r\n    });\r\n    return promise;\r\n  }\r\n\r\n  exifOrientationToDegrees(orientation): orientationDegrees {\r\n    switch (orientation) {\r\n      case 1:\r\n      case 2:\r\n        return 0;\r\n      case 3:\r\n      case 4:\r\n        return 180;\r\n      case 5:\r\n      case 6:\r\n        return 90;\r\n      case 7:\r\n      case 8:\r\n        return 270;\r\n      default:\r\n        return 0;\r\n    }\r\n  }\r\n\r\n  abortChanges() {\r\n    this.shouldAbortTempCoverImage = true;\r\n    this.cancelUpload(this.coverImageUploadTask);\r\n    if (this.articleIsNew) {\r\n      this.articleSvc.deleteArticleRef(this.articleId);\r\n    }\r\n    if (this.articleHasUnsavedChanges()) {\r\n      this.articleSvc.removeArticleEditStatus(\r\n        this.articleId,\r\n        this.loggedInUser.uid,\r\n      );\r\n      clearTimeout(this.editSessionTimeout);\r\n    }\r\n    this.shouldAbortTempCoverImage = false;\r\n  }\r\n\r\n  // Cover Image Upload\r\n  async onSelectCoverImage({ url, coverImageFile }) {\r\n    this.setEditSessionTimeout();\r\n    this.coverImageFile = coverImageFile;\r\n    this.coverImageUrl$.next(url);\r\n    this.addUserEditingStatus();\r\n  }\r\n\r\n  async saveCoverImage() {\r\n    this.shouldAbortTempCoverImage = true;\r\n    const tracker = this.articleSvc.uploadCoverImage(\r\n      this.articleId,\r\n      this.coverImageFile,\r\n    );\r\n    this.coverImageUploadTask = tracker.task;\r\n    this.coverImageUploadPercent$ = tracker.task.percentageChanges();\r\n    const snap = await tracker.task.then();\r\n    const url = await tracker.ref.getDownloadURL().toPromise();\r\n    this.updateCoverImageUrl(url);\r\n    this.articleSvc.trackUploadedCoverImages(\r\n      this.articleId,\r\n      snap.metadata.fullPath,\r\n      url,\r\n    );\r\n    this.shouldAbortTempCoverImage = false;\r\n    return;\r\n  }\r\n\r\n  cancelUpload(task: AngularFireUploadTask) {\r\n    if (task) {\r\n      task.cancel();\r\n    }\r\n  }\r\n\r\n  updateCoverImageUrl(url) {\r\n    this.articleEditForm.patchValue({ imageUrl: url });\r\n    this.coverImageUrl$.next(url);\r\n  }\r\n\r\n  // Article Tagging\r\n  addTag(event: MatChipInputEvent): void {\r\n    const articleTags = this.articleState.tags;\r\n    const tag = event.value.toUpperCase();\r\n    const isDuplicate = this.isTagDuplicate(tag);\r\n    if (tag.trim() && !isDuplicate) {\r\n      articleTags.push(tag.trim());\r\n      this.articleEditForm.markAsDirty();\r\n      this.articleEditForm.patchValue({ tags: articleTags });\r\n      event.input.value = '';\r\n    }\r\n  }\r\n\r\n  isInvalidTagInput(value): boolean {\r\n    const nonLetterNumberSpace = new RegExp('[^a-zA-Z0-9 ]');\r\n    return nonLetterNumberSpace.test(value) ? true : false;\r\n  }\r\n\r\n  isTagDuplicate(value): boolean {\r\n    const tagIndex = this.articleState.tags.indexOf(value);\r\n    return tagIndex >= 0 ? true : false;\r\n  }\r\n\r\n  removeTag(selectedTag): void {\r\n    const articleTags = this.articleState.tags;\r\n    const tagIndex = articleTags.indexOf(selectedTag);\r\n    if (tagIndex >= 0) {\r\n      articleTags.splice(tagIndex, 1);\r\n      this.articleEditForm.markAsDirty();\r\n      this.articleEditForm.patchValue({ tags: articleTags });\r\n    }\r\n  }\r\n\r\n  // Form Data Handling\r\n  cancelChanges() {\r\n    const response$ = this.openConfirmDialog(\r\n      'Undo Edits',\r\n      'Any unsaved changes will be discarded.',\r\n      'Are you sure?',\r\n    );\r\n    response$.subscribe(shouldReload => {\r\n      if (shouldReload) {\r\n        this.resetEditStates();\r\n        location.reload();\r\n      }\r\n    });\r\n  }\r\n\r\n  async saveChanges() {\r\n    if (this.coverImageFile) {\r\n      await this.saveCoverImage();\r\n      this.coverImageFile = null;\r\n    }\r\n    // Create New Article\r\n    if (!this.articleState.articleId) {\r\n      try {\r\n        await this.articleSvc.createArticle(\r\n          this.loggedInUser,\r\n          this.articleState,\r\n          this.articleId,\r\n        );\r\n        this.articleIsNew = false;\r\n        clearTimeout(this.editSessionTimeout);\r\n        this.resetEditStates(); // Unsaved changes checked upon route change\r\n        this.router.navigate([`article/${this.articleId}`]);\r\n      } catch (error) {\r\n        this.openMessageDialog(\r\n          'Save Error',\r\n          'Oops! There was a problem saving your article.',\r\n          `Error: ${error}`,\r\n        );\r\n      }\r\n      // Update Existing Article\r\n    } else {\r\n      this.articleSvc.updateArticle(\r\n        this.loggedInUser,\r\n        this.articleState,\r\n        this.articleId,\r\n      );\r\n      clearTimeout(this.editSessionTimeout);\r\n      this.resetEditStates();\r\n    }\r\n  }\r\n\r\n  resetEditStates() {\r\n    this.articleSvc.removeArticleEditStatus(\r\n      this.articleId,\r\n      this.loggedInUser.uid,\r\n    );\r\n    this.currentArticleEditors[this.loggedInUser.uid] = false;\r\n    this.articleEditForm.markAsPristine();\r\n    this.coverImageFile = null;\r\n\r\n    this.ctrlBeingEdited = CtrlNames.none;\r\n  }\r\n\r\n  articleHasUnsavedChanges(): boolean {\r\n    return (\r\n      this.userIsEditingArticle() ||\r\n      !!this.coverImageFile ||\r\n      this.articleEditForm.dirty\r\n    );\r\n  }\r\n\r\n  // Editor and User Info Tracking\r\n  watchUserInfo() {\r\n    //  May abstract userInfo out to an ID now that we have user map...\r\n    this.userSvc.userInfo$.subscribe(user => {\r\n      this.loggedInUser = user;\r\n      this.checkIfBookmarked();\r\n      this.mapUserVotes();\r\n    });\r\n    this.userMap = this.userSvc.userMap;\r\n    this.userKeys = Object.keys(this.userMap);\r\n  }\r\n\r\n  watchCurrentEditors() {\r\n    this.articleEditorSubscription = this.articleSvc\r\n      .getEditorsByArticleRef(this.articleId)\r\n      .snapshotChanges()\r\n      .subscribe(snapList => {\r\n        this.currentArticleEditors = {};\r\n        for (const snap of snapList) {\r\n          this.currentArticleEditors[snap.key] = true;\r\n        }\r\n      });\r\n  }\r\n\r\n  addUserEditingStatus() {\r\n    this.articleSvc.setArticleEditStatus(this.articleId, this.loggedInUser.uid);\r\n    this.currentArticleEditors[this.loggedInUser.uid] = true;\r\n  }\r\n\r\n  articleHasEditors(): boolean {\r\n    return Object.keys(this.currentArticleEditors).length > 0;\r\n  }\r\n\r\n  userIsEditingArticle(): boolean {\r\n    return !!this.currentArticleEditors[this.loggedInUser.uid];\r\n  }\r\n\r\n  // Editor Session Management\r\n  setEditSessionTimeout() {\r\n    clearTimeout(this.editSessionTimeout);\r\n    this.editSessionTimeout = setTimeout(() => {\r\n      this.openTimeoutDialog();\r\n    }, 300000);\r\n  }\r\n\r\n  openTimeoutDialog() {\r\n    this.dialogIsOpen.next(true);\r\n    const dialogConfig = new MatDialogConfig();\r\n    dialogConfig.disableClose = true;\r\n\r\n    const dialogRef = this.dialog.open(\r\n      EditTimeoutDialogComponent,\r\n      dialogConfig,\r\n    );\r\n    dialogRef.afterClosed().subscribe(res => {\r\n      this.dialogIsOpen.next(false);\r\n      const editorIsActive = res ? res : false;\r\n      if (editorIsActive) {\r\n        this.setEditSessionTimeout();\r\n      } else {\r\n        this.endEditSession();\r\n      }\r\n    });\r\n  }\r\n\r\n  endEditSession() {\r\n    this.dialogIsOpen.next(true);\r\n    const dialogRef = this.openMessageDialog(\r\n      'Session Timeout',\r\n      'Your changes have been discarded.',\r\n    );\r\n    dialogRef.afterClosed().subscribe(() => {\r\n      this.dialogIsOpen.next(false);\r\n      this.resetEditStates();\r\n      this.router.navigate(['home']);\r\n    });\r\n  }\r\n\r\n  // UI Display\r\n  activateCtrl = async (ctrl: CtrlNames) => {\r\n    if (ctrl === CtrlNames.none) {\r\n      this.ctrlBeingEdited = ctrl;\r\n      return;\r\n    }\r\n    // For now doesn't allow multiple editors. Will change later...\r\n    if (!this.userIsEditingArticle() && this.articleHasEditors()) {\r\n      // Editors is an array so that we can later allow multilple collaborative editors.\r\n      // For now we'll just check the first (only) element in the array\r\n      const uid = Object.keys(this.currentArticleEditors)[0];\r\n      if (!this.userMap[uid]) {\r\n        await this.userSvc.addUserToMap(uid);\r\n      }\r\n      this.openMessageDialog(\r\n        'Edit Locked',\r\n        `The user \"${this.userMap[\r\n          uid\r\n        ].displayName()}\" is currently editing this article.`,\r\n        'Please try again later.',\r\n      );\r\n    } else if (this.authCheck()) {\r\n      this.ctrlBeingEdited = ctrl;\r\n    }\r\n  };\r\n\r\n  toggleCtrl = (ctrl: CtrlNames) => {\r\n    if (this.isCtrlActive(ctrl)) {\r\n      this.activateCtrl(CtrlNames.none);\r\n      return;\r\n    }\r\n    this.activateCtrl(ctrl);\r\n  };\r\n\r\n  isCtrlActive = (ctrl: CtrlNames): boolean => {\r\n    return this.ctrlBeingEdited === ctrl;\r\n  };\r\n\r\n  clickoutCtrl = (ctrl: CtrlNames) => {\r\n    if (ctrl === this.ctrlBeingEdited) {\r\n      this.activateCtrl(CtrlNames.none);\r\n    }\r\n  };\r\n\r\n  authCheck(): boolean {\r\n    if (this.loggedInUser.uid) {\r\n      return true;\r\n    } else {\r\n      this.dialog.open(LoginDialogComponent);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  setCkeditorButtonOffset() {\r\n    const viewportTopOffset = this.ckeditor.config.toolbar.viewportTopOffset;\r\n    const ckeditorTopOffset =\r\n      viewportTopOffset -\r\n      this.ckeditorBoundingBox.nativeElement.getBoundingClientRect().top;\r\n    const ckeditorBottomOffset =\r\n      viewportTopOffset +\r\n      75 -\r\n      this.ckeditorBoundingBox.nativeElement.getBoundingClientRect().bottom;\r\n    this.ckeditor.toggleBtnOffset =\r\n      (ckeditorTopOffset >= 0 ? ckeditorTopOffset : 0) -\r\n      (ckeditorBottomOffset >= 0 ? ckeditorBottomOffset : 0);\r\n  }\r\n\r\n  setStickySaveButton() {\r\n    const formBottomOffset = this.formBoundingBox.nativeElement.getBoundingClientRect()\r\n      .bottom;\r\n    const verticalOverflow = formBottomOffset - window.innerHeight;\r\n    this.saveButtonIsSticky = verticalOverflow > 0 ? true : false;\r\n  }\r\n\r\n  // Bookmarking\r\n  checkIfBookmarked() {\r\n    const ref = this.articleSvc.bookmarkedRef(\r\n      this.loggedInUser.uid,\r\n      this.articleId,\r\n    );\r\n    ref.valueChanges().subscribe(snapshot => {\r\n      if (snapshot && snapshot.toString().length === 13) {\r\n        this.articleIsBookmarked = true;\r\n      } else {\r\n        this.articleIsBookmarked = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  bookmarkToggle() {\r\n    if (this.authCheck()) {\r\n      if (this.articleIsBookmarked) {\r\n        this.articleSvc.unBookmarkArticle(\r\n          this.loggedInUser.uid,\r\n          this.articleId,\r\n        );\r\n      } else {\r\n        this.articleSvc.bookmarkArticle(this.loggedInUser.uid, this.articleId);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Top-Level Commenting\r\n  mapUserVotes() {\r\n    this.commentSvc\r\n      .getUserVotesRef(this.loggedInUser.uid)\r\n      .snapshotChanges()\r\n      .subscribe(snaps => {\r\n        this.userVotesMap = {};\r\n        for (const snap of snaps) {\r\n          this.userVotesMap[snap.key] = snap.payload.val() as any;\r\n        }\r\n      });\r\n  }\r\n\r\n  enterNewCommentMode() {\r\n    this.commentEditInfo.commentKey = null;\r\n    this.newCommentStub = this.commentSvc.createCommentStub(\r\n      this.loggedInUser.uid,\r\n      this.articleId,\r\n      ParentTypes.article,\r\n    );\r\n    this.commentReplyInfo.replyParentKey = this.articleId;\r\n  }\r\n\r\n  onAddComment() {\r\n    this.commentSvc.createComment(this.newCommentStub);\r\n    this.commentReplyInfo.replyParentKey = null;\r\n  }\r\n\r\n  onCancelNewComment() {\r\n    this.commentReplyInfo.replyParentKey = null;\r\n  }\r\n\r\n  // Dialog Helpers\r\n  openMessageDialog(title: string, msg1: string, msg2: string = null) {\r\n    const dialogConfig = this.genericDialogConfig(title, msg1, msg2);\r\n    return this.dialog.open(MessageDialogComponent, dialogConfig);\r\n  }\r\n\r\n  openConfirmDialog(\r\n    title: string,\r\n    msg1: string,\r\n    msg2: string = null,\r\n  ): Observable<boolean> {\r\n    const dialogConfig = this.genericDialogConfig(title, msg1, msg2);\r\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, dialogConfig);\r\n    return dialogRef.afterClosed();\r\n  }\r\n\r\n  genericDialogConfig(\r\n    title: string,\r\n    msg1: string,\r\n    msg2: string = null,\r\n  ): MatDialogConfig {\r\n    const dialogConfig = new MatDialogConfig();\r\n    dialogConfig.disableClose = true;\r\n    dialogConfig.data = {\r\n      dialogTitle: title ? title : null,\r\n      dialogLine1: msg1 ? msg1 : null,\r\n      dialogLine2: msg2 ? msg2 : null,\r\n    };\r\n\r\n    return dialogConfig;\r\n  }\r\n}\r\n\r\nexport interface HtmlInputEvent extends Event {\r\n  target: HTMLInputElement & EventTarget;\r\n}\r\n\r\n// Types and Enums\r\nexport enum CtrlNames {\r\n  coverImage = 'coverImage',\r\n  title = 'title',\r\n  intro = 'intro',\r\n  body = 'body',\r\n  tags = 'tags',\r\n  none = 'none',\r\n}\r\n\r\nexport type orientationDegrees = 0 | 90 | 180 | 270;\r\n","<section class=\"article-cover-image__display\">\r\n  <img\r\n    *ngIf=\"!coverImageUrl\"\r\n    class=\"article-cover-image__image\"\r\n    src=\"../../../assets/images/logo.svg\"\r\n    alt=\"Cover Image\"\r\n  />\r\n  <img\r\n    *ngIf=\"coverImageUrl\"\r\n    class=\"article-cover-image__image\"\r\n    [src]=\"coverImageUrl\"\r\n    [alt]=\"imageAlt\"\r\n  />\r\n  <button\r\n    class=\"mat-icon-btn\"\r\n    [ngClass]=\"{ active: isCtrlActive }\"\r\n    type=\"button\"\r\n    (click)=\"toggleCtrl()\"\r\n  >\r\n    <mat-icon>{{ isCtrlActive ? 'clear' : 'edit' }}</mat-icon>\r\n    <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">{{\r\n      isCtrlActive ? 'Close Image' : 'Edit\r\n      Image'\r\n    }}</span>\r\n  </button>\r\n</section>\r\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'cos-cover-image-display',\r\n  templateUrl: './cover-image-display.component.html',\r\n  styleUrls: ['./cover-image-display.component.scss'],\r\n})\r\nexport class CoverImageDisplayComponent {\r\n  @Input() coverImageUrl: string;\r\n  @Input() imageAlt: string;\r\n  @Input() isCtrlActive: boolean;\r\n\r\n  @Output() onCtrlToggle: EventEmitter<any> = new EventEmitter();\r\n\r\n  toggleCtrl = () => {\r\n    this.onCtrlToggle.emit();\r\n  };\r\n}\r\n","<section\r\n  *ngIf=\"isCtrlActive\"\r\n  [formGroup]=\"parentForm\"\r\n  class=\"article-cover-image__editor\"\r\n>\r\n  <p *ngIf=\"coverImageUploadTask && coverImageUploadPercent$\">\r\n    Progress: {{ coverImageUploadPercent$ | async | number: '2.1-1' }}% Complete\r\n  </p>\r\n  <mat-form-field>\r\n    <label>Image Alt Description</label>\r\n    <input\r\n      #imageAlt\r\n      matInput\r\n      type=\"text\"\r\n      formControlName=\"imageAlt\"\r\n      maxlength=\"100\"\r\n    />\r\n    <mat-hint align=\"end\">{{ imageAlt.value.length }} / 100</mat-hint>\r\n  </mat-form-field>\r\n  <div class=\"file-input flex-center-align\">\r\n    <input accept=\"image/*\" type=\"file\" (change)=\"onSelectCoverImage($event)\" />\r\n  </div>\r\n</section>\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  OnDestroy,\r\n} from '@angular/core';\r\nimport { AngularFireUploadTask } from '@angular/fire/storage';\r\nimport { Observable } from 'rxjs';\r\nimport { HtmlInputEvent } from '../article.component';\r\nimport { ArticleService } from '@services/article.service';\r\nimport { FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'cos-cover-image-edit',\r\n  templateUrl: './cover-image-edit.component.html',\r\n  styleUrls: ['./cover-image-edit.component.scss'],\r\n})\r\nexport class CoverImageEditComponent implements OnDestroy {\r\n  @Input() isCtrlActive: boolean;\r\n  @Input() parentForm: FormGroup;\r\n\r\n  @Input() set shouldAbort(shouldAbort: boolean) {\r\n    if (shouldAbort) {\r\n      this.cancelUpload();\r\n      this.deleteTempCoverImage();\r\n    }\r\n  }\r\n\r\n  @Output() onCoverImageSelected: EventEmitter<{\r\n    url: string;\r\n    coverImageFile: File;\r\n  }> = new EventEmitter();\r\n\r\n  tempCoverImageUploadPath: string;\r\n  coverImageUploadTask: AngularFireUploadTask;\r\n  coverImageUploadPercent$: Observable<number>;\r\n\r\n  constructor(private articleSvc: ArticleService) {}\r\n\r\n  ngOnDestroy() {\r\n    this.cancelUpload();\r\n    this.deleteTempCoverImage();\r\n  }\r\n\r\n  async onSelectCoverImage(e: HtmlInputEvent) {\r\n    const coverImageFile = e.target.files.item(0);\r\n    const tracker = this.articleSvc.uploadTempImage(coverImageFile);\r\n    const task = (this.coverImageUploadTask = tracker.task);\r\n    this.coverImageUploadPercent$ = task.percentageChanges();\r\n    const snap = await tracker.task.then();\r\n    const url = await tracker.ref.getDownloadURL().toPromise();\r\n    this.tempCoverImageUploadPath = snap.metadata.fullPath;\r\n    this.onCoverImageSelected.emit({ url, coverImageFile });\r\n  }\r\n\r\n  deleteTempCoverImage() {\r\n    if (this.tempCoverImageUploadPath) {\r\n      this.articleSvc.deleteFile(this.tempCoverImageUploadPath);\r\n    }\r\n  }\r\n\r\n  cancelUpload() {\r\n    if (this.coverImageUploadTask) {\r\n      this.coverImageUploadTask.cancel();\r\n    }\r\n  }\r\n}\r\n","<h2 *ngIf=\"shouldDisplay\" class=\"static-display\">\r\n  {{ title }}\r\n  <span *ngIf=\"title === ''\">Add a Short, Descriptive Title</span>\r\n</h2>\r\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'cos-title-display',\r\n  templateUrl: './title-display.component.html',\r\n  styleUrls: ['../../article.component.scss', '../title.component.scss'],\r\n})\r\nexport class TitleDisplayComponent {\r\n  @Input() shouldDisplay: boolean;\r\n  @Input() title: string;\r\n}\r\n","<mat-form-field *ngIf=\"shouldDisplay\" [formGroup]=\"parentForm\">\r\n  <h2>\r\n    <input\r\n      #title\r\n      matInput\r\n      type=\"text\"\r\n      formControlName=\"title\"\r\n      maxlength=\"100\"\r\n      required\r\n    />\r\n  </h2>\r\n  <mat-hint align=\"end\">{{ title.value.length }} / 100 </mat-hint>\r\n  <mat-error>Please give your article a title.</mat-error>\r\n</mat-form-field>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'cos-title-edit',\r\n  templateUrl: './title-edit.component.html',\r\n  styleUrls: ['../../article.component.scss', '../title.component.scss'],\r\n})\r\nexport class TitleEditComponent implements OnInit {\r\n  @Input() parentForm: FormGroup;\r\n  @Input() shouldDisplay: boolean;\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit() {}\r\n}\r\n","<cos-title-display\r\n  [shouldDisplay]=\"!isActive\"\r\n  [title]=\"title\"\r\n></cos-title-display>\r\n<cos-title-edit\r\n  [shouldDisplay]=\"isActive\"\r\n  [parentForm]=\"parentForm\"\r\n></cos-title-edit>\r\n<button\r\n  class=\"mat-icon-btn\"\r\n  [ngClass]=\"{ active: isActive }\"\r\n  type=\"button\"\r\n  (click)=\"toggleCtrl()\"\r\n>\r\n  <mat-icon>{{ isActive ? 'clear' : 'edit' }}</mat-icon>\r\n  <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">{{\r\n    isActive ? 'Close Title' : 'Edit Title'\r\n  }}</span>\r\n</button>\r\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'cos-title',\r\n  templateUrl: './title.component.html',\r\n  styleUrls: ['../article.component.scss'],\r\n})\r\nexport class TitleComponent {\r\n  @Input() parentForm: FormGroup;\r\n  @Input() isActive: boolean;\r\n  @Input() title: string;\r\n\r\n  @Output() onCtrlToggle = new EventEmitter();\r\n\r\n  toggleCtrl = () => {\r\n    this.onCtrlToggle.emit();\r\n  };\r\n}\r\n","<div class=\"wrapper\">\r\n    <span style=\"display: inline-flex;\"><h5>Attributions</h5></span>\r\n    <button [class.hidden]=\"!hasTransitioned\" [disabled]=\"!hasTransitioned || transitionRight || transitionLeft\" class=\"transition-btn left-btn\" (click)=\"prevEditorPanel()\">\r\n      <img class=\"transition-img\" \r\n            src=\"../../../../assets/images/chevron_left-24px.svg\" \r\n            alt=\"Next\">\r\n    </button>\r\n    <section class=\"contributors\">\r\n      <div class=\"contributors__set\">\r\n        <div *ngFor=\"let editor of _displayEditorsPrev\" class=\"contributors__elem\" [class.transition-left]=\"transitionLeft\" [class.transition-right]=\"transitionRight\">\r\n          <cos-profile-card [user]=\"userMap[editor.id]\" [shouldHighlight]=\"editor.id === _creatorId\" [displayText]=\"displayText(editor.id)\"></cos-profile-card>\r\n        </div>\r\n      </div>\r\n      <div class=\"contributors__set\">\r\n        <div *ngFor=\"let editor of _displayEditors\" class=\"contributors__elem\" [class.transition-left]=\"transitionLeft\" [class.transition-right]=\"transitionRight\">\r\n          <cos-profile-card [user]=\"userMap[editor.id]\" [shouldHighlight]=\"editor.id === _creatorId\" [displayText]=\"displayText(editor.id)\"></cos-profile-card>\r\n        </div>\r\n      </div>\r\n      <div class=\"contributors__set\">\r\n        <div *ngFor=\"let editor of _displayEditorsNext\" class=\"contributors__elem\" [class.transition-left]=\"transitionLeft\" [class.transition-right]=\"transitionRight\">\r\n          <cos-profile-card [user]=\"userMap[editor.id]\" [shouldHighlight]=\"editor.id === _creatorId\" [displayText]=\"displayText(editor.id)\"></cos-profile-card>\r\n        </div>\r\n      </div>\r\n  </section>\r\n  <button *ngIf=\"_editors?.length > 3\" class=\"transition-btn right-btn\" [disabled]=\"transitionRight || transitionLeft\" (click)=\"nextEditorPanel()\">\r\n    <img class=\"transition-img\" \r\n          src=\"../../../../assets/images/chevron_right-24px.svg\" \r\n          alt=\"Next\">\r\n  </button>\r\n</div>","import { Component, Input, HostListener } from '@angular/core';\r\nimport { UserService } from '@services/user.service';\r\nimport { UserMap } from '@class/user-info';\r\n\r\n@Component({\r\n  selector: 'cos-contributors',\r\n  templateUrl: './contributors.component.html',\r\n  styleUrls: ['./contributors.component.scss']\r\n})\r\nexport class ContributorsComponent {\r\n  @HostListener('window:resize', ['$event'])\r\n  onWindowResize($event: any) {\r\n    this.checkWindowSize();\r\n  }\r\n  userMap: UserMap;\r\n  _creatorId: string;\r\n  _editors: Array<Object>;\r\n  _editorMap: Object;\r\n  _displayEditors: Array<Object>;\r\n  _displayEditorsNext: Array<Object>;\r\n  _displayEditorsPrev: Array<Object>;\r\n  displayEditorsPosition = 0;\r\n  editorPanelCount: number;\r\n  transitionLeft = false;\r\n  transitionRight = false;\r\n  hasTransitioned = false;\r\n  windowMaxWidth = 780;\r\n\r\n  @Input() set creatorId(creatorId: string) {\r\n    if (creatorId && creatorId !== '') {\r\n      this.mapCreator(creatorId);\r\n      this._creatorId = creatorId;\r\n    }\r\n  }\r\n  @Input() set editorMap(editorMap: Object) {\r\n    if (editorMap && editorMap !== {}) {\r\n      const editors = this.mapContributors(editorMap);\r\n      this._editors = editors;\r\n      this._displayEditorsPrev = [];\r\n      this._displayEditors = this._editors.slice(this.displayEditorsPosition, this.editorPanelCount);\r\n      this._displayEditorsNext = this._editors.slice(this.displayEditorsPosition + this.editorPanelCount, this.editorPanelCount * 2);\r\n      this._editorMap = editorMap;\r\n    }\r\n  }\r\n  constructor(private userSvc: UserService) {\r\n    this.checkWindowSize();\r\n    this.userMap = userSvc.userMap;\r\n  }\r\n\r\n  displayText(editorId) {\r\n    let text = `Edits: ${this._editorMap[editorId]}`;\r\n    if (editorId === this._creatorId) {\r\n      text = text + ' (creator)';\r\n    }\r\n    return text;\r\n  }\r\n\r\n  checkWindowSize() {\r\n    window.innerWidth < this.windowMaxWidth ? this.editorPanelCount = 2 : this.editorPanelCount = 3;\r\n  }\r\n\r\n  nextEditorPanel() {\r\n  this.transitionLeft = true;\r\n  this.hasTransitioned = true;\r\n  // wait for profile cards to transition\r\n  setTimeout(() => {\r\n    this.transitionLeft = false;\r\n    // move displayed profile card position up three or reset if at the end\r\n    this.displayEditorsPosition += this.editorPanelCount;\r\n    if (this.displayEditorsPosition >= this._editors.length) {\r\n      this.displayEditorsPosition = 0;\r\n    }\r\n    // set and slice editors to get the prev, display and next segments of the _editors\r\n    this._displayEditorsPrev = this._displayEditors;\r\n    this._displayEditors = this._displayEditorsNext;\r\n    this._displayEditorsNext = this._editors.slice(this.displayEditorsPosition + this.editorPanelCount, this.displayEditorsPosition + this.editorPanelCount * 2);\r\n    // if next is empty set it to the beginning of _editors\r\n    if (this._displayEditorsNext.length <= 0) {\r\n      this._displayEditorsNext = this._editors.slice(0, this.editorPanelCount);\r\n    }\r\n  }, 2000);\r\n}\r\n\r\nprevEditorPanel() {\r\n  this.transitionRight = true;\r\n  // wait for profile cards to transition\r\n  setTimeout(() => {\r\n    this.transitionRight = false;\r\n    const remainder = this._editors.length % this.editorPanelCount;\r\n    // move displayed profile card position up three or reset if at the end\r\n    this.displayEditorsPosition -= this.editorPanelCount;\r\n\r\n    // check that the displayEditorsPosition is still positive\r\n    if (this.displayEditorsPosition < 0 && remainder > 0) {\r\n      // if not positive and if we have a remainder then we want the last remainder(amount) of profile cards from the _editors\r\n      this.displayEditorsPosition = this._editors.length - remainder;\r\n    } else if (this.displayEditorsPosition < 0) {\r\n      // if not positive and if we don't have a remainder then we want the last editorPanelCount(amount) of profile cards from the _editors\r\n      this.displayEditorsPosition = this._editors.length - this.editorPanelCount;\r\n    }\r\n\r\n    // set and slice editors to get the prev, display and next segments of the _editors\r\n    this._displayEditorsNext = this._displayEditors;\r\n    this._displayEditors = this._displayEditorsPrev;\r\n\r\n    // check if prev position is below 0. i.e. if the displayEditorsPosition is less than the amount of cards on display then the prev panel\r\n    // position will be below 0 and thus should get profile cards from the end of the _editors array\r\n    if (this.displayEditorsPosition < this.editorPanelCount && remainder > 0) {\r\n      // if the editorPanelCount does not divide evenly into the length of the _editors array then we take the remainder(number) from the end of the _editors array. \r\n      // i.e. if we have 10 _editors and are displaying 3 cards per panel. the last panel should only have 1 card be cause 3 + 3 + 3 + 1(our remainder) = 10\r\n      this._displayEditorsPrev = this._editors.slice(this._editors.length - remainder, this._editors.length);\r\n    } else if (this.displayEditorsPosition < this.editorPanelCount) {\r\n      // if the editorPanelCount does divide evenly then we want our last panel to have editorPanelCount amount of profile cards in it from the end of the _editors array\r\n      this._displayEditorsPrev = this._editors.slice(this._editors.length - this.editorPanelCount, this._editors.length);\r\n    } else {\r\n      // and if the displayEditorsPosition is greater than the editorPanelCount then you just take the next editorPanelCount amount of profile cards from infront of the displayEditorsPosition index in _editors\r\n      this._displayEditorsPrev = this._editors.slice(this.displayEditorsPosition - this.editorPanelCount, this.displayEditorsPosition);\r\n    }\r\n  }, 2000);\r\n}\r\n\r\n  mapCreator(creatorId: string) {\r\n    this.userSvc.addUserToMap(creatorId);\r\n  }\r\n\r\n  mapContributors(editorMap: Object) {\r\n    const editorArray = [];\r\n    for (const key in editorMap) {\r\n      if (this._creatorId === key) {\r\n        continue;\r\n      }\r\n      this.userSvc.addUserToMap(key);\r\n      editorArray.push({ id: key, editCount: editorMap[key] });\r\n    }\r\n    editorArray.sort((a, b) => {\r\n      if (a.editCount < b.editCount) {\r\n        return 1;\r\n      }\r\n      if (a.editCount > b.editCount) {\r\n        return -1;\r\n      }\r\n      return 0;\r\n    });\r\n    editorArray.unshift({ id: this._creatorId, editCount: editorMap[this._creatorId] });\r\n    return editorArray;\r\n  }\r\n\r\n}\r\n\r\n","<!-- Comment Loop for Current Parent -->\r\n<section *ngFor=\"let key of commentKeys | reverseArray\"\r\n         class=\"comment-wrapper\"\r\n         [ngClass]=\"{'comment-wrapper_root': !isUnderComment}\">\r\n\r\n  <section class=\"comment-container\">\r\n    <div class=\"comment-container__border-decoration\">\r\n      <div class=\"border-endpoint border-endpoint_bottom\"></div>\r\n    </div>\r\n    <section id=\"{{key}}\" class=\"comment-content-region\">\r\n\r\n      <section class=\"comment-rating\">\r\n        <div class=\"comment-rating__score-container\">\r\n          <span class=\"comment-rating__score\"\r\n                [ngClass]=\"{'comment-rating__score_negative': commentMap[key].voteCount < 0}\">\r\n            {{commentMap[key].voteCount}}\r\n          </span>\r\n        </div>\r\n        <button class=\"mat-icon-btn mat-icon-btn_small comment-rating__btn comment-rating__btn_hidden\"\r\n                [ngClass]=\"{'comment-rating__btn_voted': hasUserVoted(key, 'up')}\"\r\n                (click)=\"authCheck() ? onUpvoteComment(key) : null\">\r\n          <mat-icon>expand_less</mat-icon>\r\n          <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_right\">{{hasUserVoted(key, 'up') ? 'Remove Vote' : 'Upvote'}}</span>\r\n        </button>\r\n        <button class=\"mat-icon-btn mat-icon-btn_small comment-rating__btn comment-rating__btn_hidden\"\r\n                [ngClass]=\"{'comment-rating__btn_voted': hasUserVoted(key, 'down')}\"\r\n                (click)=\"authCheck() ? onDownvoteComment(key) : null\">\r\n          <mat-icon>expand_more</mat-icon>\r\n          <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_right\">{{hasUserVoted(key, 'down') ? 'Remove Vote' : 'Downvote'}}</span>\r\n        </button>\r\n      </section>\r\n\r\n      <cos-comment [comment]=\"commentMap[key]\"\r\n                   [loggedInUser]=\"loggedInUser\"\r\n                   [authorInfo]=\"userMap[commentMap[key].authorId]\"\r\n                   [isBeingEdited]=\"commentIsBeingEdited(key) && loggedInUser.uid\">\r\n      </cos-comment>\r\n\r\n      <p *ngIf=\"commentMap[key].replyCount > 0\"\r\n         class=\"comment-reply-count\">\r\n        <a (click)=\"toggleCommentListUnfurl(key)\">\r\n          {{commentListUnfurlMap[key] ? 'Hide' : 'Show'}} {{commentMap[key].replyCount}} {{commentMap[key].replyCount === 1 ? 'Reply' : 'Replies'}}\r\n        </a>\r\n      </p>\r\n\r\n      <section class=\"comment-controls\">\r\n        <button *ngIf=\"!commentIsBeingEdited(key) && commentReplyInfo.replyParentKey !== key || !loggedInUser.uid\"\r\n                class=\"mat-icon-btn mat-icon-btn_small\"\r\n                (click)=\"authCheck() ? enterNewCommentMode(key) : null\">\r\n          <mat-icon class=\"mat-icon_small\">reply</mat-icon>\r\n          <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">Reply</span>\r\n        </button>\r\n        <div *ngIf=\"loggedInUser.uid === commentMap[key].authorId\"\r\n             class=\"comment-controls__btn-group\">\r\n          <button *ngIf=\"!commentIsBeingEdited(key) && commentReplyInfo.replyParentKey !== key\"\r\n                  class=\"mat-icon-btn mat-icon-btn_small\"\r\n                  (click)=\"enterEditMode(key)\">\r\n            <mat-icon class=\"mat-icon_small\">edit</mat-icon>\r\n            <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">Edit</span>\r\n          </button>\r\n          <button *ngIf=\"!commentIsBeingEdited(key) && commentReplyInfo.replyParentKey !== key\"\r\n                  class=\"mat-icon-btn mat-icon-btn_small\"\r\n                  (click)=\"onRemoveComment(key)\">\r\n            <mat-icon class=\"mat-icon_small\">clear</mat-icon>\r\n            <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">Remove</span>\r\n          </button>\r\n          <button *ngIf=\"commentIsBeingEdited(key)\"\r\n                  class=\"mat-icon-btn mat-icon-btn_small\"\r\n                  (click)=\"onSaveEdits()\">\r\n            <mat-icon class=\"mat-icon_small\">check</mat-icon>\r\n            <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">Save</span>\r\n          </button>\r\n          <button *ngIf=\"commentIsBeingEdited(key)\"\r\n                  class=\"mat-icon-btn mat-icon-btn_small\"\r\n                  (click)=\"onCancelEdit()\">\r\n            <mat-icon class=\"mat-icon_small\">clear</mat-icon>\r\n            <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">Cancel</span>\r\n          </button>\r\n        </div>\r\n      </section>\r\n\r\n      <!-- New Reply Stub -->\r\n      <section *ngIf=\"commentReplyInfo.replyParentKey === key && loggedInUser.uid\"\r\n               class=\"comment-container comment-container_new-reply comment-content-region\">\r\n        <div class=\"comment-container__border-decoration\">\r\n          <div class=\"border-endpoint border-endpoint_top border-endpoint_accent-2\"></div>\r\n          <div class=\"border-endpoint border-endpoint_bottom border-endpoint_accent-2\"></div>\r\n        </div>\r\n        <cos-comment [isBeingEdited]=\"true\"\r\n                     [loggedInUser]=\"loggedInUser\"\r\n                     [authorInfo]=\"loggedInUser\"\r\n                     [comment]=\"newCommentStub\">\r\n        </cos-comment>\r\n        <section class=\"comment-controls\">\r\n          <button class=\"mat-icon-btn mat-icon-btn_small\"\r\n                  (click)=\"onAddComment()\">\r\n            <mat-icon class=\"mat-icon_small\">check</mat-icon>\r\n            <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">Save</span>\r\n          </button>\r\n          <button class=\"mat-icon-btn mat-icon-btn_small\"\r\n                  (click)=\"onCancelNewComment()\">\r\n            <mat-icon class=\"mat-icon_small\">clear</mat-icon>\r\n            <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_left\">Cancel</span>\r\n          </button>\r\n        </section>\r\n      </section>\r\n    </section>\r\n\r\n    <!-- List of Nested Comments -->\r\n    <cos-comment-list *ngIf=\"commentListUnfurlMap[key]\"\r\n                      [parentKey]=\"key\"\r\n                      [loggedInUser]=\"loggedInUser\"\r\n                      [userMap]=\"userMap\"\r\n                      [userKeys]=\"userKeys\"\r\n                      [commentReplyInfo]=\"commentReplyInfo\"\r\n                      [commentEditInfo]=\"commentEditInfo\"\r\n                      [userVotesMap]=\"userVotesMap\">\r\n    </cos-comment-list>\r\n  </section>\r\n</section>\r\n","import { Component, OnInit, Input, OnDestroy } from '@angular/core';\r\nimport { CommentService } from '@services/comment.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { UserInfoOpen, UserMap } from '@class/user-info';\r\nimport { Comment, CommentMap, ParentTypes, KeyMap, VoteDirections } from '@class/comment';\r\nimport { MatDialog } from '@angular/material';\r\nimport { LoginDialogComponent } from '@modals/login-dialog/login-dialog.component';\r\n\r\n@Component({\r\n  selector: 'cos-comment-list',\r\n  templateUrl: './comment-list.component.html',\r\n  styleUrls: ['./comment-list.component.scss']\r\n})\r\nexport class CommentListComponent implements OnInit, OnDestroy {\r\n  @Input() isUnderComment = true;\r\n  @Input() parentKey: string;\r\n  @Input() loggedInUser: UserInfoOpen;\r\n  @Input() userMap: UserMap = {};\r\n  @Input() userKeys: string[];\r\n  @Input() userVotesMap: KeyMap<VoteDirections>;\r\n  @Input() commentReplyInfo;\r\n  @Input() commentEditInfo;\r\n\r\n  commentsSubscription: Subscription;\r\n  //  ToDo: FILL THIS WITH OTHER SUBSCRIPTIONS TO BREAK DOWN ON DESTROY\r\n  // commentSubscriptions: Subscription[];\r\n\r\n  newCommentStub: Comment;\r\n\r\n  commentMap: CommentMap = {};\r\n  commentKeys: string[];\r\n  commentListUnfurlMap: KeyMap<boolean> = {};\r\n\r\n  constructor(\r\n    private commentSvc: CommentService,\r\n    private dialog: MatDialog\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fillDataMaps();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.commentsSubscription.unsubscribe();\r\n  }\r\n\r\n  onUpvoteComment(commentKey: string) {\r\n    this.commentSvc.upvoteComment(this.loggedInUser.uid, commentKey, VoteDirections.up);\r\n  }\r\n\r\n  onDownvoteComment(commentKey: string) {\r\n    this.commentSvc.downvoteComment(this.loggedInUser.uid, commentKey, VoteDirections.down);\r\n  }\r\n\r\n  hasUserVoted(commentKey: string, voteDirection: VoteDirections) {\r\n    if (!this.userVotesMap[commentKey]) {\r\n      return false;\r\n    }\r\n    return this.userVotesMap[commentKey] as number === VoteDirections[voteDirection] as any as number;\r\n  }\r\n\r\n  enterEditMode(commentKey: string) {\r\n    this.commentReplyInfo.replyParentKey = null;\r\n    this.commentEditInfo.commentKey = commentKey;\r\n  }\r\n\r\n  enterNewCommentMode(replyParentKey) {\r\n    this.commentEditInfo.commentKey = null;\r\n    this.commentListUnfurlMap[replyParentKey] = true;\r\n    this.newCommentStub = this.commentSvc.createCommentStub(this.loggedInUser.uid, replyParentKey, ParentTypes.comment);\r\n    this.commentReplyInfo.replyParentKey = replyParentKey;\r\n  }\r\n\r\n  authCheck() {\r\n    if (this.loggedInUser.uid) {\r\n      return true;\r\n    } else {\r\n      this.dialog.open(LoginDialogComponent);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  onCancelNewComment() {\r\n    this.commentReplyInfo.replyParentKey = null;\r\n  }\r\n\r\n  onAddComment() {\r\n    this.commentSvc.createComment(this.newCommentStub);\r\n    this.commentReplyInfo.replyParentKey = null;\r\n  }\r\n\r\n  onCancelEdit() {\r\n    this.commentEditInfo.commentKey = null;\r\n  }\r\n\r\n  onRemoveComment(commentKey: string) {\r\n    this.commentSvc.removeComment(commentKey);\r\n  }\r\n\r\n  onSaveEdits() {\r\n    const commentEdited = this.commentMap[this.commentEditInfo.commentKey];\r\n    this.commentSvc.updateComment(commentEdited, this.commentEditInfo.commentKey);\r\n    this.commentEditInfo.commentKey = null;\r\n  }\r\n\r\n  fillDataMaps() {\r\n    // leads to large method call chain - may be candidate for further refactor\r\n    this.commentsSubscription = this.unfurlCommentObservables();\r\n  }\r\n\r\n  unfurlCommentObservables(): Subscription {\r\n    return this.commentSvc.watchCommentsByParent(this.parentKey)\r\n      .subscribe(comments => {\r\n        for (const comment$ of comments) {\r\n          comment$.subscribe(commentSnap => {\r\n            this.mapCommentSnapshot(commentSnap);\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  mapCommentSnapshot(snapshot: any) {\r\n    const val = snapshot.payload.val() as any;\r\n    const comment = new Comment(val.authorId, val.parentKey, val.text, val.lastUpdated, val.timestamp, val.replyCount, val.parentType, val.voteCount);\r\n    this.commentMap[snapshot.key] = comment;\r\n    this.commentKeys = Object.keys(this.commentMap);\r\n    if (!this.userMap[val.authorId]) {\r\n      this.mapUser(val.authorId);\r\n    }\r\n  }\r\n\r\n  async mapUser(userId: string) {\r\n    const authorSnap = await this.commentSvc.getUserInfo(userId);\r\n    if (authorSnap) {\r\n      const authorVal = authorSnap.val();\r\n      const author = new UserInfoOpen(authorVal.alias, authorVal.fName, authorVal.lName, authorSnap.key, authorVal.imageUrl);\r\n      this.userMap[authorSnap.key] = author;\r\n      this.userKeys = Object.keys(this.userMap);\r\n    }\r\n  }\r\n\r\n  commentIsBeingEdited(commentKey) {\r\n    return this.commentEditInfo.commentKey === commentKey;\r\n  }\r\n\r\n  toggleCommentListUnfurl(key) {\r\n    this.commentListUnfurlMap[key] = this.commentListUnfurlMap[key] ? !this.commentListUnfurlMap[key] : true;\r\n  }\r\n\r\n}\r\n","<section class=\"comment\">\r\n  <section *ngIf=\"authorInfo\"\r\n           class=\"comment__header\">\r\n    <img class=\"comment__author-image\"\r\n         [src]=\"authorInfo.displayImageUrl()\"\r\n         alt=\"Author Image\">\r\n    <div class=\"comment__author\">\r\n      <p class=\"comment__author-detail\">Posted by <a [routerLink]=\"['/profile', authorInfo.uid]\"><strong>{{\r\n            authorInfo.displayName() }}</strong></a></p>\r\n      <p class=\"comment__author-detail comment__author-detail_light\"><em>Last Updated</em> {{ comment.lastUpdated |\r\n        date }}</p>\r\n    </div>\r\n  </section>\r\n  <p *ngIf=\"!isBeingEdited\"\r\n     class=\"comment__text\">\r\n    {{ comment.text }}\r\n  </p>\r\n  <mat-form-field *ngIf=\"isBeingEdited\">\r\n    <p class=\"comment__text\">\r\n      <textarea #commentBody\r\n                matInput\r\n                class=\"comment__input\"\r\n                type=\"text\"\r\n                maxlength=\"500\"\r\n                [(ngModel)]=\"comment.text\">\r\n      </textarea>\r\n    </p>\r\n    <mat-hint align=\"end\">{{commentBody.value.length}} / 500</mat-hint>\r\n  </mat-form-field>\r\n</section>","import { Component, Input } from '@angular/core';\r\nimport { UserInfoOpen } from '@class/user-info';\r\nimport { Comment } from '@class/comment';\r\n\r\n@Component({\r\n  selector: 'cos-comment',\r\n  templateUrl: './comment.component.html',\r\n  styleUrls: ['./comment.component.scss']\r\n})\r\nexport class CommentComponent {\r\n  @Input() comment: Comment;\r\n  @Input() loggedInUser: UserInfoOpen;\r\n  @Input() authorInfo: UserInfoOpen;\r\n  @Input() isBeingEdited = false;\r\n\r\n  constructor(\r\n  ) { }\r\n\r\n\r\n\r\n}\r\n","<section class=\"filter-menu-container\"\r\n         [ngStyle]=\"{'height': filterContainerHeight ? filterContainerHeight + 'px' : 'auto'}\"\r\n         (window:scroll)=\"checkScrollPosition()\"\r\n         (window:resize)=\"adjustFilterContainerOnResize()\">\r\n  <ul #filterMenu\r\n      class=\"filter-menu\"\r\n      [ngClass]=\"{'filter-menu_sticky': filterMenuIsSticky}\">\r\n    <li *ngFor=\"let tab of tabList; let i = index\"\r\n        class=\"filter-menu__item\"\r\n        [class.activeArticleState]=\"tab.selected\"\r\n        (click)=\"selectTab(i)\">\r\n      {{ tab.name }}\r\n    </li>\r\n    <!-- Display this in mobile until hover? -->\r\n    <!-- <li class=\"filter-menu__item activeArticleState\">{{ getSelectedTab().name }}</li> -->\r\n  </ul>\r\n</section>","import { Component, Input, Output, SimpleChanges, ViewChild, EventEmitter, OnChanges } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'cos-filter-menu',\r\n  templateUrl: './filter-menu.component.html',\r\n  styleUrls: ['./filter-menu.component.scss']\r\n})\r\nexport class FilterMenuComponent implements OnChanges {\r\n  // ViewChild may not be needed if we go with accordion\r\n  @ViewChild('filterMenu') filterMenu;\r\n  @Input() tabList: TabList = [\r\n    { name: 'Tab 1', selected: true },\r\n    { name: 'Tab 2', selected: false },\r\n  ];\r\n\r\n  @Output() tabSelected = new EventEmitter<number>();\r\n  @Output() tabAdded = new EventEmitter<TabList>();\r\n\r\n  filterContainerHeight: number;\r\n  filterMenuIsSticky: boolean;\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.tabList && changes.tabList.currentValue) {\r\n      this.tabAdded.emit(changes.tabList.currentValue);\r\n    }\r\n  }\r\n\r\n  selectTab(tabIndex: number) {\r\n    for (const tab of this.tabList) {\r\n      tab.selected = false;\r\n    }\r\n    this.tabList[tabIndex].selected = true;\r\n    this.tabSelected.emit(tabIndex);\r\n  }\r\n\r\n  getSelectedTab(): TabItem {\r\n    const matchignTabs = this.tabList.filter(item => {\r\n      return item.selected;\r\n    });\r\n    // Not expecting duplicate tabs anyway, so returning 1st element.\r\n    return matchignTabs[0];\r\n  }\r\n\r\n  getTabByName(name: string): TabItem {\r\n    const matchignTabs = this.tabList.filter(item => {\r\n      return item.name === name;\r\n    });\r\n    // Not expecting duplicate tabs anyway, so returning 1st element.\r\n    return matchignTabs[0];\r\n  }\r\n\r\n  isTabSelected(tabName: string): boolean {\r\n    const tab: TabItem = this.getTabByName(tabName);\r\n    return tab && tab.selected;\r\n  }\r\n\r\n  checkScrollPosition() {\r\n    const yCoordinate = window.scrollY;\r\n    if (document.body.clientWidth >= 482) {\r\n      this.filterMenuIsSticky = yCoordinate >= 200 ? true : false;\r\n    } else {\r\n      this.filterMenuIsSticky = true;\r\n    }\r\n  }\r\n\r\n  adjustFilterContainerOnResize() {\r\n    this.checkScrollPosition();\r\n    this.setFilterContainerHeight();\r\n  }\r\n\r\n  setFilterContainerHeight() {\r\n    // May not be needed if we go with accordion\r\n    this.filterContainerHeight = this.filterMenu.nativeElement.clientHeight;\r\n  }\r\n\r\n}\r\n\r\nexport interface TabItem {\r\n  name: string;\r\n  selected: boolean;\r\n}\r\n\r\nexport interface TabList extends Array<TabItem> { }\r\n","<section class=\"banner\">\r\n  <div class=\"text center\">\r\n    <h2 class=\"banner__title\">Empowering Makers &amp; Hackers of the World</h2>\r\n    <p class=\"text italic\">network, collaborate, and share knowledge with the community you love</p>\r\n  </div>\r\n</section>\r\n\r\n<!-- ARTICLE FILTERS -->\r\n<cos-filter-menu #filterMenu\r\n                 [tabList]=\"filterTabs\"\r\n                 (tabAdded)=\"onFilterTabAdded($event)\"\r\n                 (tabSelected)=\"onFilterTabSelected($event)\">\r\n</cos-filter-menu>\r\n\r\n<!-- ARTICLE COLLECTIONS -->\r\n<section id=\"latest-articles\"\r\n         *ngIf=\"filterMenu.isTabSelected('Latest')\">\r\n  <div class=\"article-grid\">\r\n    <cos-article-preview-card [userId]=\"userId\"\r\n                              [articleData]=\"article\"\r\n                              *ngFor=\"let article of latestArticles | async\">\r\n    </cos-article-preview-card>\r\n  </div>\r\n</section>\r\n\r\n<section id=\"all-articles\"\r\n         *ngIf=\"filterMenu.isTabSelected('All')\">\r\n  <div class=\"article-grid\">\r\n    <cos-article-preview-card [userId]=\"userId\"\r\n                              [articleData]=\"article\"\r\n                              *ngFor=\"let article of allArticles | async\">\r\n    </cos-article-preview-card>\r\n  </div>\r\n</section>\r\n\r\n<section id=\"bookmarked-articles\"\r\n         *ngIf=\"filterMenu.isTabSelected('Bookmarked')\">\r\n  <h3 class=\"collection-text\">You have\r\n    <span class=\"collection-text_accent\">{{bookmarkedArticles.length}}</span>\r\n    {{bookmarkedArticles.length === 1 ? 'bookmark' : 'bookmarks'}}.\r\n  </h3>\r\n  <div class=\"article-grid\">\r\n    <cos-article-preview-card [userId]=\"userId\"\r\n                              [articleData]=\"article\"\r\n                              *ngFor=\"let article of bookmarkedArticles | reverseArray \">\r\n    </cos-article-preview-card>\r\n  </div>\r\n</section>\r\n\r\n<section id=\"searched-articles\"\r\n         *ngIf=\"filterMenu.isTabSelected('Search Results')\">\r\n  <h3 class=\"collection-text\">Found\r\n    <span class=\"collection-text_accent\">{{searchedArticles.length}}</span> {{searchedArticles.length === 1 ? 'result'\r\n    : 'results'}} for\r\n    <span class=\"collection-text_underline\">{{query}}</span>.\r\n  </h3>\r\n  <div class=\"article-grid\">\r\n    <cos-article-preview-card [userId]=\"userId\"\r\n                              [articleData]=\"article\"\r\n                              *ngFor=\"let article of searchedArticles\">\r\n    </cos-article-preview-card>\r\n  </div>\r\n</section>","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Meta, Title } from '@angular/platform-browser';\r\nimport { ArticleService } from '@services/article.service';\r\nimport { ArticlePreview } from '@class/article-info';\r\nimport { AuthService } from '@services/auth.service';\r\nimport { Observable } from 'rxjs';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TabList, TabItem } from '../filter-menu/filter-menu.component';\r\n\r\n@Component({\r\n  selector: 'cos-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.scss'],\r\n  providers: [ArticleService],\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  @ViewChild('filterMenu') filterMenu;\r\n  userId;\r\n\r\n  featuredArticles;\r\n  latestArticles: Observable<ArticlePreview[]>;\r\n  allArticles: Observable<ArticlePreview[]>;\r\n  bookmarkedArticles;\r\n  searchedArticles;\r\n  query: string;\r\n\r\n  filterTabs = [\r\n    { name: 'Latest', selected: true },\r\n    { name: 'All', selected: false },\r\n  ];\r\n\r\n  constructor(\r\n    private articleSvc: ArticleService,\r\n    private authSvc: AuthService,\r\n    private route: ActivatedRoute,\r\n    private meta: Meta,\r\n    private title: Title,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.initializeArticles();\r\n    this.watchAuthInfo();\r\n    this.watchRoutePrams();\r\n    this.updateMetaData();\r\n  }\r\n\r\n  updateMetaData = () => {\r\n    this.title.setTitle('CoSourcery - Discover cool stuff!');\r\n    const description =\r\n      \"CoSourcery is empowering the makers and hackers of the world to discover and share useful information about how to accomplish their goals. We're really into decentralized farming and indoor gardening\";\r\n    this.meta.updateTag({ name: 'description', content: description });\r\n  };\r\n\r\n  initializeArticles() {\r\n    this.latestArticles = this.articleSvc.latestArticlesRef().valueChanges();\r\n    this.allArticles = this.articleSvc.allArticlesRef().valueChanges();\r\n  }\r\n\r\n  watchRoutePrams() {\r\n    this.route.params.subscribe(params => {\r\n      if (params['query']) {\r\n        this.query = params['query'];\r\n        this.addFilterTab({ name: 'Search Results', selected: false });\r\n        this.searchArticles(this.query);\r\n      }\r\n    });\r\n  }\r\n\r\n  watchAuthInfo() {\r\n    this.authSvc.authInfo$.subscribe(authInfo => {\r\n      this.userId = authInfo.uid;\r\n      if (this.userId) {\r\n        this.watchBookmarkedArticles();\r\n        this.addFilterTab({ name: 'Bookmarked', selected: false });\r\n      }\r\n    });\r\n  }\r\n\r\n  watchBookmarkedArticles() {\r\n    this.articleSvc.watchBookmarkedArticles(this.userId).subscribe(articles => {\r\n      this.bookmarkedArticles = articles;\r\n    });\r\n  }\r\n\r\n  searchArticles(query) {\r\n    this.articleSvc.searchArticles(query);\r\n    this.articleSvc.searchedArticles$.subscribe(articles => {\r\n      this.searchedArticles = articles;\r\n    });\r\n  }\r\n\r\n  // UI Data Display\r\n  addFilterTab(tab: TabItem) {\r\n    // Wanted to implemnt this inside filter menu component but chagne detection was wonky\r\n    if (!this.filterMenu.getTabByName(tab.name)) {\r\n      this.filterTabs.push(tab);\r\n    }\r\n  }\r\n\r\n  onFilterTabAdded($event: TabList) {\r\n    // Attempting to select the tab immediately after addFilterTab in watchRouteParams\r\n    // failed because it didn't quite exist yet.\r\n    const lastTabIndex = $event.length - 1;\r\n    const newestTabName = $event[lastTabIndex].name;\r\n    if (newestTabName === 'Search Results') {\r\n      this.filterMenu.selectTab(lastTabIndex);\r\n    }\r\n  }\r\n\r\n  // didn't end up using this (yet)\r\n  onFilterTabSelected($event: number) {\r\n    // console.log('filterTabSelected', $event);\r\n  }\r\n}\r\n","<section class=\"navbar-wrapper\">\r\n  <nav class=\"navbar\">\r\n\r\n    <a class=\"logo\"\r\n       routerLink=\"\">\r\n      <img class=\"logo__image\"\r\n           src=\"../../assets/images/logo.svg\"\r\n           alt=\"CoSourcery Logo\">\r\n      <h1 class=\"logo__text\">CoSourcery</h1>\r\n    </a>\r\n\r\n    <ul class=\"menu\">\r\n\r\n      <li class=\"menu__item\">\r\n        <form class=\"search-bar\">\r\n          <input #searchInput\r\n                 class=\"search-bar__input\"\r\n                 type=\"text\"\r\n                 placeholder=\"Search Articles\"\r\n                 (keyup.enter)=\"onSearch(searchInput.value); searchInput.value=''\">\r\n          <button class=\"mat-icon-btn\"\r\n                  (click)=\"onSearch(searchInput.value); searchInput.value=''\">\r\n            <mat-icon>search</mat-icon>\r\n            <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_below\">Search</span>\r\n          </button>\r\n        </form>\r\n      </li>\r\n\r\n      <li *ngIf=\"authInfo.uid\"\r\n          class=\"menu__item menu__item_collapse\">\r\n        <button class=\"mat-icon-btn\"\r\n                routerLink=\"createarticle\">\r\n          <mat-icon>edit</mat-icon>\r\n          <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_below\">Post Article</span>\r\n        </button>\r\n      </li>\r\n\r\n      <li *ngIf=\"authInfo.uid\"\r\n          class=\"menu__item menu__item_collapse\">\r\n        <button class=\"mat-icon-btn\"\r\n                [routerLink]=\"['/profile', authInfo.uid]\">\r\n          <mat-icon>person</mat-icon>\r\n          <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_below\">Profile</span>\r\n        </button>\r\n      </li>\r\n\r\n      <li *ngIf=\"authInfo.uid\"\r\n          class=\"menu__item menu__item_collapse\">\r\n        <button class=\"cos-btn navbar__cos-btn\"\r\n                (click)=\"onLogout()\">\r\n          Logout\r\n        </button>\r\n      </li>\r\n\r\n      <li *ngIf=\"!authInfo.uid\"\r\n          class=\"menu__item menu__item_collapse\">\r\n        <button class=\"cos-btn navbar__cos-btn\"\r\n                (click)=\"onLogin()\">\r\n          Login\r\n        </button>\r\n      </li>\r\n\r\n      <li *ngIf=\"!authInfo.uid\"\r\n          class=\"menu__item menu__item_collapse\">\r\n        <button class=\"cos-btn cos-btn_color_primary navbar__cos-btn\"\r\n                routerLink=\"register\">\r\n          Register\r\n        </button>\r\n      </li>\r\n\r\n      <!-- Mobile Menus  -->\r\n      <li class=\"menu__item menu__item_mobile\"\r\n          (cosClickOut)=\"showMobileMenu = false\">\r\n        <button class=\"mat-icon-btn\"\r\n                (click)=\"showMobileMenu = !showMobileMenu\">\r\n          <mat-icon>menu</mat-icon>\r\n          <span class=\"mat-icon-btn__tooltip mat-icon-btn__tooltip_below\">Menu</span>\r\n        </button>\r\n\r\n        <!-- Authenticated Mobile Menu -->\r\n        <ul *ngIf=\"showMobileMenu && authInfo.uid\"\r\n            class=\"mobile-menu\">\r\n          <li class=\"mobile-menu__item\">\r\n            <a routerLink=\"createarticle\"\r\n               class=\"mobile-menu__link\"\r\n               (click)=\"showMobileMenu = false\">\r\n              Post Article\r\n            </a>\r\n          </li>\r\n          <li class=\"mobile-menu__item\">\r\n            <a [routerLink]=\"['/profile', authInfo.uid]\"\r\n               class=\"mobile-menu__link\"\r\n               (click)=\"showMobileMenu = false\">\r\n              Profile\r\n            </a>\r\n          </li>\r\n          <li class=\"mobile-menu__item\">\r\n            <a (click)=\"onLogout(); showMobileMenu = false\"\r\n               class=\"mobile-menu__link\">\r\n              Logout\r\n            </a>\r\n          </li>\r\n        </ul>\r\n\r\n        <!-- Un-Authenticated Mobile Menu -->\r\n        <ul *ngIf=\"showMobileMenu && !authInfo.uid\"\r\n            class=\"mobile-menu\">\r\n          <li class=\"mobile-menu__item\">\r\n            <a class=\"mobile-menu__link\"\r\n               (click)=\"onLogin(); showMobileMenu = false\">\r\n              Login\r\n            </a>\r\n          </li>\r\n          <li class=\"mobile-menu__item\">\r\n            <a routerLink=\"register\"\r\n               class=\"mobile-menu__link\"\r\n               (click)=\"showMobileMenu = false\">\r\n              Register\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n\r\n    </ul>\r\n\r\n  </nav>\r\n</section>","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthInfo } from '@class/auth-info';\r\nimport { AuthService } from '@services/auth.service';\r\nimport { MatDialog } from '@angular/material';\r\nimport { LoginDialogComponent } from '@modals/login-dialog/login-dialog.component';\r\n\r\n@Component({\r\n  selector: 'cos-top-nav',\r\n  templateUrl: './top-nav.component.html',\r\n  styleUrls: ['./top-nav.component.scss']\r\n})\r\n\r\nexport class TopNavComponent implements OnInit {\r\n  authInfo: AuthInfo;\r\n  showMobileMenu = false;\r\n\r\n  constructor(\r\n    private authSvc: AuthService,\r\n    private router: Router,\r\n    private dialog: MatDialog\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.authSvc.authInfo$.subscribe(userData => {\r\n      this.authInfo = userData;\r\n    });\r\n  }\r\n\r\n  onSearch(input) {\r\n    this.router.navigate(['search', input]);\r\n  }\r\n\r\n  onLogin() {\r\n    this.dialog.open(LoginDialogComponent);\r\n  }\r\n\r\n  onLogout() {\r\n    this.authSvc.logout();\r\n  }\r\n\r\n}\r\n","<section class=\"unauth\">\r\n  <h2 class=\"unauth__title\">Unauthorized Access</h2>\r\n\r\n  <section class=\"unauth-card\">\r\n    <p>It looks like you tried to go somewhere you're not allowed...</p>\r\n    <button class=\"cos-btn\"\r\n    routerLink=\"/home\">\r\n    Home\r\n    </button>\r\n  </section>\r\n</section>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'cos-unauthorized',\r\n  templateUrl: './unauthorized.component.html',\r\n  styleUrls: ['./unauthorized.component.scss']\r\n})\r\nexport class UnauthorizedComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<section class=\"dialog-box\">\r\n  <h1 class=\"dialog-box__title\">{{dialogTitle}}</h1>\r\n    <p>{{dialogLine1}}</p>\r\n    <p *ngIf=\"dialogLine2\">{{dialogLine2}}</p>\r\n  <div class=\"dialog-box__btn-group\">\r\n    <button class=\"cos-btn\"\r\n            (click)=\"onSelectYes()\">\r\n      Yes\r\n    </button>\r\n    <button class=\"cos-btn\"\r\n            (click)=\"onSelectNo()\">\r\n      No\r\n    </button>\r\n  </div>\r\n</section>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material';\r\n\r\n@Component({\r\n  selector: 'cos-confirm-dialog',\r\n  templateUrl: './confirm-dialog.component.html',\r\n  styleUrls: ['./confirm-dialog.component.scss']\r\n})\r\nexport class ConfirmDialogComponent {\r\n  dialogTitle: string;\r\n  dialogLine1: string;\r\n  dialogLine2: string;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<ConfirmDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) data: {\r\n      dialogTitle: string,\r\n      dialogLine1: string,\r\n      dialogLine2: string\r\n    }\r\n  ) {\r\n    this.dialogTitle = data.dialogTitle ? data.dialogTitle : 'Message Title';\r\n    this.dialogLine1 = data.dialogLine1 ? data.dialogLine1 : 'Message Line 1';\r\n    this.dialogLine2 = data.dialogLine2 ? data.dialogLine2 : null;\r\n  }\r\n\r\n  onSelectNo(): void {\r\n    this.dialogRef.close(false);\r\n  }\r\n\r\n  onSelectYes(): void {\r\n    this.dialogRef.close(true);\r\n  }\r\n\r\n}\r\n","<section class=\"dialog-box\">\r\n  <h1 class=\"dialog-box__title\">Are You Still There?</h1>\r\n    <p>Your changes will be discarded in:</p>\r\n    <p><strong>{{responseWaitTime}}</strong> seconds.</p>\r\n    <p>Would you like to keep editing?</p>\r\n  <div class=\"dialog-box__btn-group\">\r\n    <button class=\"cos-btn\"\r\n            (click)=\"onSelectYes()\">\r\n      Yes\r\n    </button>\r\n    <button class=\"cos-btn\"\r\n            (click)=\"onSelectNo()\">\r\n      No\r\n    </button>\r\n  </div>\r\n</section>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material';\r\n\r\n@Component({\r\n  selector: 'cos-edit-timeout-dialog',\r\n  templateUrl: './edit-timeout-dialog.component.html',\r\n  styleUrls: ['./edit-timeout-dialog.component.scss']\r\n})\r\nexport class EditTimeoutDialogComponent implements OnInit {\r\n\r\n  responseTimer;\r\n  responseWaitTime = 60;\r\n  editorIsActive = false;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<EditTimeoutDialogComponent>\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.responseTimer = setInterval(() => {\r\n      this.responseWaitTime--;\r\n      if (this.responseWaitTime <= 0) {\r\n        clearInterval(this.responseTimer);\r\n        this.dialogRef.close(this.editorIsActive);\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  onSelectNo(): void {\r\n    clearInterval(this.responseTimer);\r\n    this.dialogRef.close(this.editorIsActive);\r\n  }\r\n\r\n  onSelectYes(): void {\r\n    clearInterval(this.responseTimer);\r\n    this.editorIsActive = true;\r\n    this.dialogRef.close(this.editorIsActive);\r\n  }\r\n\r\n}\r\n","<form [formGroup]=\"loginForm\"\r\n      class=\"login-form\">\r\n\r\n  <h2 class=\"login-form__title\">Login</h2>\r\n\r\n  <section class=\"login-card\">\r\n    <mat-form-field class=\"login-card__input\">\r\n      <mat-label>Email</mat-label>\r\n      <input matInput\r\n             type=\"email\"\r\n             formControlName=\"email\"\r\n             required/>\r\n      <mat-error>Please enter your email address.</mat-error>\r\n    </mat-form-field>\r\n\r\n    <mat-form-field class=\"login-card__input\">\r\n      <mat-label>Password</mat-label>\r\n      <input matInput\r\n             type=\"password\"\r\n             formControlName=\"password\"\r\n             required/>\r\n      <mat-error>Please enter your password.</mat-error>\r\n    </mat-form-field>\r\n\r\n    <div class=\"login-form__btn-group\">\r\n      <button class=\"cos-btn cos-btn_color_primary\"\r\n              type=\"submit\"\r\n              [disabled]=\"!loginForm.valid\"\r\n              (click)=\"onLogIn()\">\r\n        Submit\r\n      </button>\r\n      <button class=\"cos-btn\"\r\n              type=\"button\"\r\n              (click)=\"onCancel()\">\r\n        Cancel\r\n      </button>\r\n    </div>\r\n\r\n    <mat-hint *ngIf=\"!loginError\"\r\n              class=\"general-hint\">\r\n      Login or <a routerLink=\"/register\" (click)=\"onCancel()\">Register</a> to use this feature.\r\n    </mat-hint>\r\n    <mat-hint *ngIf=\"loginError\"\r\n              class=\"general-hint general-hint_error\">\r\n      {{loginError}}\r\n    </mat-hint>\r\n  </section>\r\n</form>\r\n","import { Component } from '@angular/core';\r\nimport { AuthService } from '@services/auth.service';\r\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\r\nimport { MatDialogRef } from '@angular/material';\r\n\r\n@Component({\r\n  selector: 'cos-login-dialog',\r\n  templateUrl: './login-dialog.component.html',\r\n  styleUrls: ['./login-dialog.component.scss']\r\n})\r\nexport class LoginDialogComponent {\r\n  loginForm: FormGroup;\r\n  loginError: string = null;\r\n\r\n  constructor(\r\n    private authSvc: AuthService,\r\n    private fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<LoginDialogComponent>\r\n  ) {\r\n    this.loginForm = this.fb.group({\r\n      email: ['', Validators.required],\r\n      password: ['', Validators.required]\r\n    });\r\n  }\r\n\r\n  onLogIn() {\r\n    this.loginError = null;\r\n    const val = this.loginForm.value;\r\n    this.authSvc.login(val.email, val.password).then(() => {\r\n      this.dialogRef.close();\r\n    }).catch(err => {\r\n      this.handleLoginError(err);\r\n    });\r\n  }\r\n\r\n  handleLoginError(err) {\r\n    switch (err.code) {\r\n      case 'auth/user-not-found':\r\n        this.loginError = 'We couldn\\'t find your account. Check your email for typos and try again or create an account.';\r\n        break;\r\n      case 'auth/invalid-email':\r\n        this.loginError = 'That doesn\\'t look like a real email. Please try again or create an account.';\r\n        break;\r\n      case 'auth/wrong-password':\r\n        this.loginError = 'The password you entered doesn\\'t match our records. If you forgot your password please contact info@flight.run.';\r\n        break;\r\n      default:\r\n        this.loginError = 'There was a problem logging in. We\\'re not sure what happened. If you\\'re sure hou have an account please contact info@flight.run';\r\n        break;\r\n    }\r\n  }\r\n\r\n  onCancel() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n","<section class=\"dialog-box\">\r\n  <h1 class=\"dialog-box__title\">{{dialogTitle}}</h1>\r\n    <p>{{dialogLine1}}</p>\r\n    <p *ngIf=\"dialogLine2\">{{dialogLine2}}</p>\r\n  <div class=\"dialog-box__btn-group\">\r\n    <button class=\"cos-btn\"\r\n            (click)=\"onConfirm()\">\r\n      OK\r\n    </button>\r\n  </div>\r\n</section>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material';\r\n\r\n@Component({\r\n  selector: 'cos-message-dialog',\r\n  templateUrl: './message-dialog.component.html',\r\n  styleUrls: ['./message-dialog.component.scss']\r\n})\r\nexport class MessageDialogComponent {\r\n  dialogTitle: string;\r\n  dialogLine1: string;\r\n  dialogLine2: string;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<MessageDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) data: {\r\n      dialogTitle: string,\r\n      dialogLine1: string,\r\n      dialogLine2: string\r\n    }\r\n  ) {\r\n    this.dialogTitle = data.dialogTitle ? data.dialogTitle : 'Message Title';\r\n    this.dialogLine1 = data.dialogLine1 ? data.dialogLine1 : 'Message Line 1';\r\n    this.dialogLine2 = data.dialogLine2 ? data.dialogLine2 : null;\r\n  }\r\n\r\n  onConfirm() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n","import { Directive, ElementRef, Output, EventEmitter, HostListener } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[cosClickOut]'\r\n})\r\nexport class ClickOutDirective {\r\n\r\n  constructor(private elementRef: ElementRef) { }\r\n\r\n  @Output()\r\n  public cosClickOut = new EventEmitter();\r\n\r\n  @HostListener('document:click', ['$event.target'])\r\n  public onClick(targetElement) {\r\n    const clickedInside = this.elementRef.nativeElement.contains(targetElement);\r\n    if (!clickedInside) {\r\n      this.cosClickOut.emit(true);\r\n    }\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\nimport 'firebase/database';\r\nimport 'firebase/firestore';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport {\r\n  ArticleDetail,\r\n  ArticlePreview,\r\n  BodyImageMap,\r\n} from '@class/article-info';\r\nimport { UserInfoOpen } from '@class/user-info';\r\nimport { AngularFireDatabase, AngularFireList } from '@angular/fire/database';\r\nimport {\r\n  AngularFirestore,\r\n  AngularFirestoreDocument,\r\n  AngularFirestoreCollection,\r\n} from '@angular/fire/firestore';\r\nimport {\r\n  AngularFireStorage,\r\n  AngularFireUploadTask,\r\n  AngularFireStorageReference,\r\n} from '@angular/fire/storage';\r\nimport * as algoliasearch from 'algoliasearch/lite';\r\nimport { environment } from 'environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ArticleService {\r\n  searchedArticles$ = new BehaviorSubject<ArticlePreview[]>([]);\r\n  fsServerTimestamp = firebase.firestore.FieldValue.serverTimestamp();\r\n  dbServerTimestamp = firebase.database.ServerValue.TIMESTAMP;\r\n  algoliaClient = algoliasearch(\r\n    '7EELIYF04C',\r\n    'bb88a22504c5bc1a1f0ca58c7763a2b2',\r\n  );\r\n\r\n  constructor(\r\n    private storage: AngularFireStorage,\r\n    private rtdb: AngularFireDatabase,\r\n    private fsdb: AngularFirestore,\r\n  ) {}\r\n\r\n  createVanillaStorageRef(path: string) {\r\n    return firebase.storage().ref(path);\r\n  }\r\n\r\n  latestArticlesRef(): AngularFirestoreCollection<ArticlePreview> {\r\n    return this.fsdb.collection('articleData/articles/previews', ref =>\r\n      ref\r\n        .orderBy('timestamp', 'desc')\r\n        .limit(12)\r\n        .where('isFlagged', '==', false),\r\n    );\r\n  }\r\n\r\n  allArticlesRef(): AngularFirestoreCollection<ArticlePreview> {\r\n    return this.fsdb.collection('articleData/articles/previews', ref =>\r\n      ref.orderBy('lastUpdated', 'desc').where('isFlagged', '==', false),\r\n    );\r\n  }\r\n\r\n  watchBookmarkedArticles(userKey) {\r\n    const articleList$ = new BehaviorSubject<ArticlePreview[]>([]);\r\n    const bookmarksRef = this.rtdb.list(\r\n      `userInfo/articleBookmarksPerUser/${userKey}`,\r\n    );\r\n    bookmarksRef\r\n      .snapshotChanges()\r\n      .pipe(\r\n        map(keySnaps => {\r\n          return keySnaps.map(snap => {\r\n            return this.getPreviewRefById(snap.key).valueChanges();\r\n          });\r\n        }),\r\n      )\r\n      .subscribe(previewObservables => {\r\n        const articleMap = {};\r\n        if (previewObservables.length > 0) {\r\n          for (const article$ of previewObservables) {\r\n            article$.subscribe(article => {\r\n              if (!!article && article.isFlagged === false) {\r\n                articleMap[article.articleId] = article;\r\n                articleList$.next(Object.values(articleMap));\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          articleList$.next(Object.values(articleMap));\r\n        }\r\n      });\r\n    return articleList$;\r\n  }\r\n\r\n  getPreviewRefsByEditor(\r\n    editorId: string,\r\n  ): AngularFirestoreCollection<ArticlePreview> {\r\n    return this.fsdb.collection('articleData/articles/previews', ref =>\r\n      ref.where(`editors.${editorId}`, '>', 0),\r\n    );\r\n  }\r\n\r\n  getPreviewRefsByAuthor(\r\n    authorId: string,\r\n  ): AngularFirestoreCollection<ArticlePreview> {\r\n    return this.fsdb.collection('articleData/articles/previews', ref =>\r\n      ref.where('authorId', '==', authorId),\r\n    );\r\n  }\r\n\r\n  getArticleRefById(\r\n    articleId: string,\r\n  ): AngularFirestoreDocument<ArticleDetail> {\r\n    return this.fsdb.doc(`articleData/articles/articles/${articleId}`);\r\n  }\r\n\r\n  getPreviewRefById(\r\n    articleId: string,\r\n  ): AngularFirestoreDocument<ArticlePreview> {\r\n    return this.fsdb.doc(`articleData/articles/previews/${articleId}`);\r\n  }\r\n\r\n  // This is only used in the article-ppreview-list component that is not currently being used so I did not refactor this yet\r\n  authorRef(uid: string) {\r\n    return this.rtdb.object(`userInfo/open/${uid}`);\r\n  }\r\n\r\n  bookmarkedRef(userKey, articleId) {\r\n    return this.rtdb.object(\r\n      `userInfo/articleBookmarksPerUser/${userKey}/${articleId}`,\r\n    );\r\n  }\r\n\r\n  unBookmarkArticle(userKey, articleId) {\r\n    this.rtdb\r\n      .object(`userInfo/articleBookmarksPerUser/${userKey}/${articleId}`)\r\n      .remove();\r\n    this.rtdb\r\n      .object(`articleData/userBookmarksPerArticle/${articleId}/${userKey}`)\r\n      .remove();\r\n  }\r\n\r\n  bookmarkArticle(userKey, articleId) {\r\n    this.rtdb\r\n      .object(`userInfo/articleBookmarksPerUser/${userKey}/${articleId}`)\r\n      .set(this.dbServerTimestamp);\r\n    this.rtdb\r\n      .object(`articleData/userBookmarksPerArticle/${articleId}/${userKey}`)\r\n      .set(this.dbServerTimestamp);\r\n  }\r\n\r\n  cleanArticleImages(article): BodyImageMap {\r\n    const newBodyImages: BodyImageMap = {};\r\n    for (const imgCode in article.bodyImages) {\r\n      if (\r\n        article.bodyImages.hasOwnProperty(imgCode) &&\r\n        article.body.includes(`%2F${imgCode}`)\r\n      ) {\r\n        newBodyImages[imgCode] = article.bodyImages[imgCode];\r\n      }\r\n    }\r\n    return newBodyImages;\r\n  }\r\n\r\n  updateArticle(\r\n    editor: UserInfoOpen,\r\n    article: ArticleDetail,\r\n    articleId: string,\r\n  ) {\r\n    const articleRef = this.fsdb.doc(\r\n      `articleData/articles/articles/${articleId}`,\r\n    );\r\n\r\n    // Avoids mutating original object\r\n    const articleToSave = { ...article };\r\n    const editors = articleToSave.editors || {};\r\n    const editCount = editors[editor.uid] || 0;\r\n    editors[editor.uid] = editCount + 1;\r\n    articleToSave.lastUpdated = this.fsServerTimestamp;\r\n    articleToSave.version++;\r\n    articleToSave.lastEditorId = editor.uid;\r\n    articleToSave.editors = editors;\r\n    articleToSave.bodyImages = this.cleanArticleImages(articleToSave);\r\n    return articleRef.update(articleToSave);\r\n  }\r\n\r\n  createArticle(author: UserInfoOpen, article: ArticleDetail, articleId) {\r\n    if (!articleId) {\r\n      return;\r\n    }\r\n    const articleRef = this.fsdb.doc(\r\n      `articleData/articles/articles/${articleId}`,\r\n    );\r\n    article.editors = {};\r\n    article.editors[author.uid] = 1;\r\n    article.authorId = author.uid;\r\n    article.articleId = articleId;\r\n    article.lastUpdated = this.fsServerTimestamp;\r\n    article.timestamp = this.fsServerTimestamp;\r\n    article.lastEditorId = author.uid;\r\n    article.authorImageUrl =\r\n      author.imageUrl || '../../assets/images/noUserImage.png';\r\n\r\n    return articleRef.set(article, { merge: true });\r\n  }\r\n\r\n  uploadTempImage(\r\n    file: File,\r\n  ): { task: AngularFireUploadTask; ref: AngularFireStorageReference } {\r\n    const id = this.createArticleId();\r\n    const storageRef = this.storage.ref(`tempImages/${id}`);\r\n    const task = storageRef.put(file);\r\n    return { task: task, ref: storageRef };\r\n  }\r\n\r\n  deleteFile(path: string) {\r\n    const storageRef = this.storage.ref(path);\r\n    storageRef.delete().subscribe(res => {});\r\n  }\r\n\r\n  uploadCoverImage(\r\n    articleId: string,\r\n    file: File,\r\n    isNew = false,\r\n  ): { task: AngularFireUploadTask; ref: AngularFireStorageReference } {\r\n    const storageRef = this.storage.ref(`articleCoverImages/${articleId}`);\r\n    const task = storageRef.put(file);\r\n    return {\r\n      task: task,\r\n      ref: storageRef,\r\n    };\r\n  }\r\n\r\n  trackUploadedCoverImages(articleId, fullPath, url) {\r\n    const docRef = this.fsdb.doc(\r\n      `fileUploads/articleUploads/coverImages/${articleId}`,\r\n    );\r\n    docRef.set({ path: fullPath, downloadUrl: url });\r\n  }\r\n\r\n  async setThumbnailImageUrl(articleId: string) {\r\n    const storagePath = `articleCoverThumbnails/${articleId}`;\r\n    const storageRef = this.storage.ref(storagePath);\r\n    const url = await storageRef.getDownloadURL().toPromise();\r\n    if (!url) {\r\n      return;\r\n    }\r\n    const trackerDocRef = this.fsdb.doc(\r\n      `fileUploads/articleUploads/coverThumbnails/${articleId}`,\r\n    );\r\n    const articleDocRef = this.fsdb.doc(\r\n      `articleData/articles/previews/${articleId}`,\r\n    );\r\n    trackerDocRef.set({\r\n      downloadUrl: url,\r\n      path: storagePath,\r\n    });\r\n    return await articleDocRef.update({ imageUrl: url });\r\n  }\r\n\r\n  createArticleId() {\r\n    return this.fsdb.createId();\r\n  }\r\n\r\n  deleteArticleRef(articleId) {\r\n    const articleRef = this.fsdb.doc(\r\n      `articleData/articles/articles/${articleId}`,\r\n    );\r\n    articleRef.delete();\r\n  }\r\n\r\n  async searchArticles(query) {\r\n    const articleList = new Array<any>();\r\n    this.searchedArticles$.next(articleList);\r\n    const index = this.algoliaClient.initIndex(environment.algoliaIndex);\r\n    const searchResults = await index.search({\r\n      query: query,\r\n      attributesToRetrieve: ['objectId'],\r\n      hitsPerPage: 50,\r\n    });\r\n    if (searchResults.hits.length > 0) {\r\n      const articleIds = [];\r\n      searchResults.hits.forEach(article => {\r\n        // creates array of articleIds from search results\r\n        articleIds.push(article.objectID);\r\n      });\r\n      articleIds.forEach(key => {\r\n        // creates array of articlePreviews\r\n        this.getPreviewRefById(key)\r\n          .valueChanges()\r\n          .subscribe(article => {\r\n            if (article) {\r\n              articleList.push(article);\r\n            }\r\n          });\r\n      });\r\n    }\r\n    this.searchedArticles$.next(articleList);\r\n  }\r\n\r\n  setArticleEditStatus(articleId: string, editorId: string) {\r\n    // onDisconnect not available in AngularFire2 so using vanilla db\r\n    // Solution looks overcomplicated because it is.\r\n    // Future-proofing for case where we allow multiple concurrent editors of single article (gDocs style)\r\n    // Also allowing for one person to have multiple tabs open and be editing multiple articles\r\n    const editorsByArticlePath = `articleData/editStatus/editorsByArticle/${articleId}/${editorId}`;\r\n    const articlesByEditorPath = `articleData/editStatus/articlesByEditor/${editorId}/${articleId}`;\r\n    const updates = {};\r\n    const editorsRef = this.rtdb.database.ref(editorsByArticlePath);\r\n    const articlesRef = this.rtdb.database.ref(articlesByEditorPath);\r\n    updates[editorsByArticlePath] = true;\r\n    updates[articlesByEditorPath] = true;\r\n\r\n    this.rtdb.database.ref().update(updates);\r\n\r\n    editorsRef.onDisconnect().set(null);\r\n    articlesRef.onDisconnect().set(null);\r\n  }\r\n\r\n  removeArticleEditStatus(articleId: string, editorId: string) {\r\n    const editorByArticlePath = `articleData/editStatus/editorsByArticle/${articleId}/${editorId}`;\r\n    const articleByEditorPath = `articleData/editStatus/articlesByEditor/${editorId}/${articleId}`;\r\n    const updates = {};\r\n    updates[editorByArticlePath] = null;\r\n    updates[articleByEditorPath] = null;\r\n    this.rtdb.database.ref().update(updates);\r\n  }\r\n\r\n  getEditorsByArticleRef(articleId: string): AngularFireList<boolean> {\r\n    return this.rtdb.list(\r\n      `articleData/editStatus/editorsByArticle/${articleId}`,\r\n    );\r\n  }\r\n\r\n  // with refactor this is no longer used\r\n  // arrayFromCollectionSnapshot(querySnapshot: any, shouldAttachId: boolean = false) {\r\n  //   const array = [];\r\n  //   querySnapshot.forEach(doc => {\r\n  //     if (shouldAttachId) {\r\n  //       array.push({ id: doc.id, ...doc.data() });\r\n  //     } else {\r\n  //       array.push(doc.data());\r\n  //     }\r\n  //   });\r\n  //   return array;\r\n  // }\r\n\r\n  tempTimestamp() {\r\n    return firebase.firestore.Timestamp.now();\r\n  }\r\n\r\n  flagArticle = (articleId: any) => {\r\n    const previewRef = this.getPreviewRefById(articleId);\r\n    previewRef.update({ isFlagged: true });\r\n  };\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport * as fb from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { take, map } from 'rxjs/operators';\r\nimport { AuthInfo } from '@class/auth-info';\r\nimport { AngularFireDatabase } from '@angular/fire/database';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthService {\r\n  fbAuth = fb.auth();\r\n  authInfo$ = new BehaviorSubject<AuthInfo>(\r\n    new AuthInfo(null, false, null, null),\r\n  );\r\n\r\n  constructor(\r\n    private afAuth: AngularFireAuth,\r\n    private rtdb: AngularFireDatabase,\r\n  ) {\r\n    this.afAuth.user.subscribe(user => {\r\n      if (user) {\r\n        this.authInfo$.next(\r\n          new AuthInfo(\r\n            user.uid,\r\n            user.emailVerified,\r\n            user.displayName,\r\n            user.email,\r\n          ),\r\n        );\r\n      } else {\r\n        this.authInfo$.next(new AuthInfo(null, false, null, null));\r\n      }\r\n    });\r\n  }\r\n\r\n  articlesBeingEditedByUserRef() {\r\n    const uid = this.authInfo$.value.uid;\r\n    return this.rtdb.list(`articleData/editStatus/articlesByEditor/${uid}`);\r\n  }\r\n\r\n  login(email: string, password: string) {\r\n    return this.afAuth.auth.signInWithEmailAndPassword(email, password);\r\n  }\r\n\r\n  async cleanupEditorTrackingInfo() {\r\n    const uid = this.authInfo$.value.uid;\r\n    const updates = {};\r\n    const snapshot = await this.rtdb\r\n      .list(`articleData/editStatus/articlesByEditor/${uid}`)\r\n      .query.once('value');\r\n    const val = snapshot.val();\r\n    if (!val) return;\r\n    const articleIds = Object.keys(val);\r\n    for (let id of articleIds) {\r\n      updates[`articleData/editStatus/editorsByArticle/${id}/${uid}`] = null;\r\n      updates[`articleData/editStatus/articlesByEditor/${uid}/${id}`] = null;\r\n    }\r\n    return this.rtdb.database.ref().update(updates);\r\n  }\r\n\r\n  async logout() {\r\n    await this.cleanupEditorTrackingInfo();\r\n    return this.afAuth.auth.signOut();\r\n  }\r\n\r\n  register(email: string, password: string) {\r\n    return this.afAuth.auth.createUserWithEmailAndPassword(email, password);\r\n  }\r\n\r\n  async isSignedIn(): Promise<boolean> {\r\n    return this.afAuth.authState\r\n      .pipe(\r\n        take(1),\r\n        map(res => {\r\n          return !!res;\r\n        }),\r\n      )\r\n      .toPromise();\r\n  }\r\n\r\n  async sendVerificationEmail() {\r\n    const user = this.afAuth.auth.currentUser;\r\n    try {\r\n      return await user.sendEmailVerification();\r\n    } catch (err) {\r\n      alert(\r\n        'It looks like your verification email was not sent. Please try again or contact support.' +\r\n          err,\r\n      );\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFireDatabase, AngularFireObject } from '@angular/fire/database';\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/database';\r\nimport { combineLatest } from 'rxjs/operators';\r\nimport { Comment, ParentTypes, VoteDirections } from '@class/comment';\r\n\r\nconst serverTimestamp = firebase.database.ServerValue.TIMESTAMP;\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class CommentService {\r\n  constructor(private rtdb: AngularFireDatabase) {}\r\n\r\n  createCommentStub(\r\n    authorId: string,\r\n    parentKey: string,\r\n    parentType: ParentTypes,\r\n  ) {\r\n    const newComment: Comment = {\r\n      authorId: authorId,\r\n      parentKey: parentKey,\r\n      text: '',\r\n      replyCount: 0,\r\n      parentType: parentType,\r\n      voteCount: 0,\r\n    };\r\n    return newComment;\r\n  }\r\n\r\n  getUserVotesRef(userId: string) {\r\n    return this.rtdb.list(`commentData/votesByUser/${userId}`);\r\n  }\r\n\r\n  getVoteRef(\r\n    voterId: string,\r\n    commentKey: string,\r\n  ): AngularFireObject<VoteDirections> {\r\n    return this.rtdb.object(`commentData/votesByUser/${voterId}/${commentKey}`);\r\n  }\r\n\r\n  async getExistingVote(voteRef: AngularFireObject<VoteDirections>) {\r\n    const existingVoteSnap = await voteRef.query.once('value');\r\n    return existingVoteSnap.val();\r\n  }\r\n\r\n  async upvoteComment(\r\n    voterId: string,\r\n    commentKey: string,\r\n    voteDirection: VoteDirections,\r\n  ) {\r\n    const voteRef = this.getVoteRef(voterId, commentKey);\r\n    const oldVote = await this.getExistingVote(voteRef);\r\n    if (oldVote && oldVote === VoteDirections.up) {\r\n      return voteRef.set(null);\r\n    }\r\n    return voteRef.set(VoteDirections.up);\r\n  }\r\n\r\n  async downvoteComment(\r\n    voterId: string,\r\n    commentKey: string,\r\n    voteDirection: VoteDirections,\r\n  ) {\r\n    const voteRef = this.getVoteRef(voterId, commentKey);\r\n    const oldVote = await this.getExistingVote(voteRef);\r\n    if (oldVote && oldVote === VoteDirections.down) {\r\n      return voteRef.set(null);\r\n    }\r\n    return voteRef.set(VoteDirections.down);\r\n  }\r\n\r\n  async createComment(comment: Comment) {\r\n    const commentToSave = {\r\n      authorId: comment.authorId,\r\n      text: comment.text,\r\n      parentKey: comment.parentKey,\r\n      lastUpdated: serverTimestamp,\r\n      timestamp: serverTimestamp,\r\n      parentType: comment.parentType,\r\n      replyCount: comment.replyCount,\r\n      voteCount: comment.voteCount,\r\n    };\r\n\r\n    return this.rtdb.list('commentData/comments').push(commentToSave).key;\r\n  }\r\n\r\n  updateComment(comment: Comment, commentKey: string) {\r\n    const commentToSave = {\r\n      lastUpdated: serverTimestamp,\r\n      text: comment.text,\r\n    };\r\n    return this.rtdb\r\n      .object(`commentData/comments/${commentKey}`)\r\n      .update(commentToSave);\r\n  }\r\n\r\n  removeComment(commentKey) {\r\n    return this.rtdb\r\n      .object(`commentData/comments/${commentKey}`)\r\n      .update({ removedAt: serverTimestamp });\r\n  }\r\n\r\n  watchCommentsByParent(parentKey: string) {\r\n    return (\r\n      this.rtdb\r\n        .list(`commentData/commentsByParent/${parentKey}`)\r\n        .snapshotChanges()\r\n        //  Also works with \".pipe(map(...\" strangely enough. Test with changing data\r\n        // .pipe(map(snapshots => {\r\n        .pipe(\r\n          combineLatest(snapshots => {\r\n            return snapshots.map(snapshot => {\r\n              return this.watchCommentByKey(snapshot.key).snapshotChanges();\r\n            });\r\n          }),\r\n        )\r\n    );\r\n  }\r\n\r\n  watchCommentByKey(key: string): AngularFireObject<{}> {\r\n    return this.rtdb.object(`commentData/comments/${key}`);\r\n  }\r\n\r\n  async getUserInfo(uid): Promise<firebase.database.DataSnapshot> {\r\n    if (uid) {\r\n      return this.rtdb.object(`userInfo/open/${uid}`).query.once('value');\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class NotificationService {\r\n  fsdb = firebase.firestore();\r\n\r\n  constructor() {}\r\n\r\n  // kb: added this\r\n  // maybe store the article id here in the future as well\r\n  createFeatureNotification(authorId: string): void {\r\n    const id = this.fsdb.collection(`userData/${authorId}/notifications`).doc();\r\n    const notification = {\r\n      id: id,\r\n      userId: authorId,\r\n      notificationType: 'articleFeature',\r\n      // timestamp: new Date(),\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n      timeViewed: null,\r\n    };\r\n    this.fsdb.doc(`userData/${authorId}/notifications/${id}`).set(notification);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/database';\r\nimport 'firebase/storage';\r\nimport { Upload } from '@class/upload';\r\n\r\n@Injectable()\r\nexport class UploadService {\r\n  storage = firebase.storage();\r\n  rtdb = firebase.database();\r\n  fsdb = firebase.firestore();\r\n  constructor() {}\r\n\r\n  uploadArticleCoverImage(\r\n    upload: Upload,\r\n    articleId: string,\r\n    newStatus?: boolean,\r\n  ) {\r\n    const storageRef = this.storage.ref(\r\n      `uploads/articleCoverImages/${articleId}`,\r\n    );\r\n    const task = storageRef.put(upload.file);\r\n\r\n    task.on(\r\n      firebase.storage.TaskEvent.STATE_CHANGED,\r\n      async () => {\r\n        const snap = task.snapshot;\r\n        upload.progress = (\r\n          (snap.bytesTransferred / snap.totalBytes) *\r\n          100\r\n        ).toFixed(0);\r\n        const url = await storageRef.getDownloadURL();\r\n        const docRef = this.fsdb.doc(\r\n          `articleData/articles/articles/${articleId}`,\r\n        );\r\n        const imageUrl = { imageUrl: url };\r\n        if (newStatus) {\r\n          docRef.set(imageUrl);\r\n          return url;\r\n        }\r\n        docRef.update(imageUrl);\r\n        return url;\r\n      },\r\n      error => {\r\n        console.error(error);\r\n        alert('trouble uploading the image ' + error.message);\r\n      },\r\n      () => {\r\n        // console.log('article image upload success');\r\n      },\r\n    );\r\n  }\r\n\r\n  // NEEDS REFACTOR\r\n  uploadImage(upload: Upload, uid, basePath, newStatus?: boolean) {\r\n    const storageRef = this.storage.ref(`${basePath}/${uid}`).put(upload.file);\r\n    storageRef.on(\r\n      firebase.storage.TaskEvent.STATE_CHANGED,\r\n      () => {\r\n        const snap = storageRef.snapshot;\r\n        upload.progress = (\r\n          (snap.bytesTransferred / snap.totalBytes) *\r\n          100\r\n        ).toFixed(0);\r\n        snap.ref.getDownloadURL().then(url => {\r\n          if (basePath === 'uploads/articleCoverImages/') {\r\n            if (newStatus === true) {\r\n              this.fsdb\r\n                .collection(`articleData/articles/articles/`)\r\n                .doc(`${uid}`)\r\n                .set({ imageUrl: url });\r\n              return url;\r\n            } else if (newStatus === false) {\r\n              this.fsdb\r\n                .collection(`articleData/articles/articles/`)\r\n                .doc(`${uid}`)\r\n                .update({ imageUrl: url });\r\n              return url;\r\n            }\r\n          } else {\r\n            if (newStatus === true) {\r\n              this.rtdb.ref(`userInfo/open/${uid}`).set({ imageUrl: url });\r\n              return url;\r\n            } else {\r\n              this.rtdb.ref(`userInfo/open/${uid}`).update({ imageUrl: url });\r\n              return url;\r\n            }\r\n          }\r\n        });\r\n      },\r\n      error => {\r\n        console.log('error: ', error.message);\r\n        alert(error);\r\n      },\r\n      () => {\r\n        console.log('image upload success');\r\n      },\r\n    );\r\n  }\r\n}\r\n","import { UserInfoOpen, UserMap } from '@class/user-info';\r\nimport { AuthService } from '@services/auth.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { AngularFireDatabase, AngularFireObject } from '@angular/fire/database';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AngularFireStorage, AngularFireUploadTask, AngularFireStorageReference } from '@angular/fire/storage';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n  private NULL_USER = new UserInfoOpen(null, null, null, null);\r\n  userInfo$: BehaviorSubject<UserInfoOpen> = new BehaviorSubject<UserInfoOpen>(this.NULL_USER);\r\n  // rtdb = firebase.database();\r\n  userMap: UserMap = {};\r\n\r\n  constructor(\r\n    private authSvc: AuthService,\r\n    private storage: AngularFireStorage,\r\n    private rtdb: AngularFireDatabase,\r\n    private fsdb: AngularFirestore\r\n  ) {\r\n    this.authSvc.authInfo$.subscribe(authInfo => {\r\n      if (authInfo.uid) {\r\n        this.userInfoRef(authInfo.uid)\r\n          .valueChanges()\r\n          .subscribe(info => {\r\n            const userInfo = new UserInfoOpen(\r\n              info.alias,\r\n              info.fName,\r\n              info.lName,\r\n              authInfo.uid,\r\n              info.imageUrl,\r\n              info.email,\r\n              info.zipCode,\r\n              info.bio,\r\n              info.city,\r\n              info.state,\r\n            );\r\n            this.userMap[authInfo.uid] = userInfo;\r\n            this.userInfo$.next(userInfo);\r\n          });\r\n      } else {\r\n        this.userInfo$.next(this.NULL_USER);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  uploadTempImage(file: File): UploadTracker {\r\n    const id = this.fsdb.createId();\r\n    const storageRef = this.storage.ref(`tempImages/${id}`);\r\n    const task = storageRef.put(file);\r\n    return { task: task, ref: storageRef };\r\n  }\r\n\r\n  deleteFile(path: string) {\r\n    const storageRef = this.storage.ref(path);\r\n    storageRef.delete().subscribe(res => {\r\n      // console.log('DELETED TEMP IMAGE (maybe), result: ', res);\r\n    });\r\n  }\r\n\r\n  uploadProfileImage(uid: string, file: File): UploadTracker {\r\n    const storageRef = this.storage.ref(`profileImages/${uid}`);\r\n    const task = storageRef.put(file);\r\n    return { task: task, ref: storageRef };\r\n  }\r\n\r\n  trackUploadedProfileImages(uid, fullPath, url) {\r\n    const docRef = this.fsdb.doc(`fileUploads/profileUploads/profileImages/${uid}`);\r\n    docRef.set({ path: fullPath, downloadUrl: url });\r\n  }\r\n\r\n  setUserAccess(accessLevel: number, uid: string) {\r\n    return this.rtdb\r\n      .object(`userInfo/accessLevel/${uid}`)\r\n      .set(accessLevel);\r\n  }\r\n\r\n  createUser(userInfo, uid) {\r\n    this.setUserAccess(10, uid);\r\n    return this.rtdb\r\n      .object(`userInfo/open/${uid}`)\r\n      .set(userInfo);\r\n  }\r\n\r\n  updateUser(userInfo) {\r\n    return this.rtdb\r\n      .object(`userInfo/open/${userInfo.uid}`)\r\n      .update(userInfo);\r\n  }\r\n\r\n  userInfoRef(uid: string): AngularFireObject<UserInfoOpen> {\r\n    return this.rtdb.object(`userInfo/open/${uid}`);\r\n  }\r\n\r\n  async getUserInfo(uid) {\r\n    if (uid) {\r\n      const userRef = await this.rtdb.object(`userInfo/open/${uid}`).query.once(`value`);\r\n      const userData = userRef.val();\r\n      return userData;\r\n    }\r\n  }\r\n\r\n  async addUserToMap(userId) {\r\n    const userData = await this.getUserInfo(userId);\r\n    const { alias, fName, lName, uid, imageUrl, email, zipCode, bio, city, state } = userData;\r\n    const userInfo = new UserInfoOpen(alias, fName, lName, uid, imageUrl, email, zipCode, bio, city, state);\r\n    this.userMap[userId] = userInfo;\r\n  }\r\n\r\n}\r\n\r\nexport interface UploadTracker {\r\n  task: AngularFireUploadTask;\r\n  ref: AngularFireStorageReference;\r\n}\r\n","export class ArticlePreview {\r\n  constructor(\r\n    public articleId: string,\r\n    public authorId: string,\r\n    public title: string,\r\n    public introduction: string,\r\n    public imageUrl: string,\r\n    public imageAlt: string,\r\n    public lastUpdated: any,\r\n    public timestamp: any,\r\n    public version: number,\r\n    public editors: KeyMap<number>,\r\n    public commentCount?: number,\r\n    public viewCount?: number,\r\n    public tags?: string[],\r\n    public isFlagged?: boolean,\r\n  ) {}\r\n}\r\n\r\nexport class ArticleDetail {\r\n  constructor(\r\n    public articleId: string,\r\n    public authorId: string,\r\n    public title: string,\r\n    public introduction: string,\r\n    public body: string,\r\n    public imageUrl: string,\r\n    public imageAlt: string,\r\n    public authorImageUrl: string,\r\n    public lastUpdated: any,\r\n    public timestamp: any,\r\n    public lastEditorId: string,\r\n    public version: number,\r\n    public editors: KeyMap<number>,\r\n    public commentCount?: number,\r\n    public viewCount?: number,\r\n    public tags?: string[],\r\n    public isFeatured?: boolean,\r\n    public isFlagged?: boolean,\r\n    public bodyImages?: BodyImageMap,\r\n  ) {}\r\n}\r\n\r\nexport interface BodyImageMeta {\r\n  orientation: number;\r\n  path: string;\r\n}\r\n\r\nexport interface KeyMap<T> {\r\n  [key: string]: T;\r\n}\r\n\r\nexport interface BodyImageMap extends KeyMap<BodyImageMeta> {}\r\n","export class AuthInfo {\r\n    constructor(\r\n        public uid: string,\r\n        public emailVerified = false,\r\n        public displayName?: string,\r\n        public email?: string\r\n    ) { }\r\n\r\n    isLoggedIn() {\r\n        return !!this.uid;\r\n    }\r\n\r\n    isEmailVerified() {\r\n        return !!this.emailVerified;\r\n    }\r\n}\r\n","export class Comment {\r\n    constructor(\r\n        public authorId?: string,\r\n        public parentKey?: string,\r\n        public text?: string,\r\n        public lastUpdated?: number,\r\n        public timestamp?: number,\r\n        public replyCount?: number,\r\n        public parentType?: ParentTypes,\r\n        public voteCount?: number,\r\n    ) {\r\n        this.text = text || '';\r\n        this.lastUpdated = lastUpdated || new Date().getTime();\r\n    }\r\n}\r\n\r\n//  Very cool: https://stackoverflow.com/questions/13315131/enforcing-the-type-of-the-indexed-members-of-a-typescript-object\r\nexport interface KeyMap<T> { [key: string]: T; }\r\nexport interface CommentMap extends KeyMap<Comment> { }\r\n\r\nexport enum ParentTypes {\r\n    article = 'article',\r\n    comment = 'comment'\r\n  }\r\n\r\nexport enum VoteDirections {\r\n    up = 1,\r\n    down = -1\r\n}\r\n","export class UserInfoOpen {\r\n    constructor(\r\n        public alias: string,\r\n        public fName: string,\r\n        public lName: string,\r\n        public uid?: string,\r\n        public imageUrl?: string,\r\n        public email?: string,\r\n        public zipCode?: string,\r\n        public bio?: string,\r\n        public city?: string,\r\n        public state?: string,\r\n    ) { }\r\n\r\n    displayName() {\r\n        return this.alias ? this.alias : this.fName;\r\n    }\r\n\r\n    displayImageUrl() {\r\n        if (!this.imageUrl || this.imageUrl === '') {\r\n            return 'assets/images/logo.svg';\r\n        }\r\n        return this.imageUrl;\r\n    }\r\n\r\n    // returns true if uid contains a truthy value (is neither null nor an empty string)\r\n    exists() {\r\n        return !!(this.uid);\r\n    }\r\n}\r\n\r\n\r\n\r\nexport interface KeyMap<T> { [key: string]: T; }\r\nexport interface UserMap extends KeyMap<UserInfoOpen> { }\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, Router } from '@angular/router';\r\nimport { AuthService } from '@services/auth.service';\r\nimport { MatDialog, MatDialogConfig } from '@angular/material';\r\nimport { ConfirmDialogComponent } from '@modals/confirm-dialog/confirm-dialog.component';\r\nimport { LoginDialogComponent } from '@modals/login-dialog/login-dialog.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthGuard implements CanActivate {\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private authSvc: AuthService,\r\n    private dialog: MatDialog,\r\n  ) { }\r\n\r\n  canActivate(): Promise<boolean> {\r\n    return this.checkLogin(this.authSvc.isSignedIn());\r\n  }\r\n\r\n  checkLogin(loginStatus: Promise<boolean>): Promise<boolean> {\r\n    const promise = new Promise<boolean>(async (resolve, reject) => {\r\n      const status = await loginStatus;\r\n      if (status) {\r\n        return resolve(true);\r\n      } else {\r\n        const dialogRef = this.openLoginRequiredDialog();\r\n        dialogRef.afterClosed().subscribe(res => {\r\n          if (res) {\r\n            this.router.navigate(['/login']);\r\n            this.dialog.open(LoginDialogComponent);\r\n          } else {\r\n            this.router.navigate(['/unauthorized']);\r\n          }\r\n        });\r\n        return resolve(false);\r\n      }\r\n    });\r\n    return promise;\r\n  }\r\n\r\n  openLoginRequiredDialog() {\r\n    const dialogConfig = new MatDialogConfig();\r\n    dialogConfig.disableClose = true;\r\n    dialogConfig.data = {\r\n      dialogTitle: 'Login Required',\r\n      dialogLine1: 'Would you like to login now?',\r\n      dialogLine2: null\r\n    };\r\n    return this.dialog.open(ConfirmDialogComponent, dialogConfig);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, Observer } from 'rxjs';\r\nimport { CanDeactivate } from '@angular/router';\r\nimport { MatDialog, MatDialogConfig } from '@angular/material';\r\nimport { ArticleComponent } from '@components/articles/article/article.component';\r\nimport { ConfirmDialogComponent } from '@modals/confirm-dialog/confirm-dialog.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UnsavedChangesGuard implements CanDeactivate<ArticleComponent> {\r\n\r\n  constructor(\r\n    private dialog: MatDialog\r\n  ) { }\r\n\r\n  canDeactivate(component: ArticleComponent): Observable<boolean> | boolean {\r\n    if (component.articleHasUnsavedChanges()) {\r\n      const dialogConfig = new MatDialogConfig();\r\n      dialogConfig.disableClose = true;\r\n      dialogConfig.data = {\r\n        dialogTitle: 'Unsaved Changes',\r\n        dialogLine1: 'Are you sure you want to leave without saving?',\r\n        dialogLine2: null\r\n      };\r\n\r\n      return Observable.create((observer: Observer<boolean>) => {\r\n        const dialogRef = this.dialog.open(ConfirmDialogComponent, dialogConfig);\r\n        dialogRef.afterClosed().subscribe(res => {\r\n          observer.next(res);\r\n          observer.complete();\r\n        }, (err) => {\r\n          observer.next(false);\r\n          observer.complete();\r\n        });\r\n        // Give precedence to component modals\r\n        component.dialogIsOpen.subscribe(res => {\r\n          if (res) {\r\n            dialogRef.close(false);\r\n          }\r\n        });\r\n      });\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'reverseArray',\r\n  pure: false\r\n})\r\nexport class ReverseArrayPipe implements PipeTransform {\r\n\r\n  transform(value: any, args?: any): any {\r\n    if (value) {\r\n      return value.slice().reverse();\r\n    }\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'truncateString'\r\n})\r\nexport class TruncateStringPipe implements PipeTransform {\r\n\r\n  transform(value: any, args?: any): any {\r\n    const max = args ? args : 30;\r\n\r\n    if (!value) { return; }\r\n\r\n    if (value.length > max) {\r\n      return `${value.substr(0, max)}...`;\r\n    }\r\n    return value;\r\n  }\r\n\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  fbConfig: {\r\n    apiKey: 'AIzaSyAb3L-t-WB0rf6A9j8gVSRB9STJJvLUEfw',\r\n    authDomain: 'cosourcerytest.firebaseapp.com',\r\n    databaseURL: 'https://cosourcerytest.firebaseio.com',\r\n    projectId: 'cosourcerytest',\r\n    storageBucket: 'cosourcerytest.appspot.com',\r\n    messagingSenderId: '146479623747'\r\n  },\r\n  algoliaIndex: 'dev_articles',\r\n  production: false\r\n};\r\n\r\n/*\r\n * In development mode, to ignore zone related error stack frames such as\r\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\r\n * import the following file, but please comment it out in production mode\r\n * because it will have performance impact when throw error\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","export { AppServerModule } from './app/app.server.module';\r\n","module.exports = require(\"@angular/animations\");","module.exports = require(\"@angular/animations/browser\");","module.exports = require(\"@angular/cdk/a11y\");","module.exports = require(\"@angular/cdk/bidi\");","module.exports = require(\"@angular/cdk/keycodes\");","module.exports = require(\"@angular/cdk/layout\");","module.exports = require(\"@angular/cdk/observers\");","module.exports = require(\"@angular/cdk/overlay\");","module.exports = require(\"@angular/cdk/platform\");","module.exports = require(\"@angular/cdk/portal\");","module.exports = require(\"@angular/cdk/scrolling\");","module.exports = require(\"@angular/cdk/text-field\");","module.exports = require(\"@angular/common\");","module.exports = require(\"@angular/common/http\");","module.exports = require(\"@angular/core\");","module.exports = require(\"@angular/fire\");","module.exports = require(\"@angular/fire/auth\");","module.exports = require(\"@angular/fire/database\");","module.exports = require(\"@angular/fire/firestore\");","module.exports = require(\"@angular/fire/storage\");","module.exports = require(\"@angular/forms\");","module.exports = require(\"@angular/http\");","module.exports = require(\"@angular/material\");","module.exports = require(\"@angular/material/button\");","module.exports = require(\"@angular/material/card\");","module.exports = require(\"@angular/material/chips\");","module.exports = require(\"@angular/material/core\");","module.exports = require(\"@angular/material/dialog\");","module.exports = require(\"@angular/material/form-field\");","module.exports = require(\"@angular/material/icon\");","module.exports = require(\"@angular/material/input\");","module.exports = require(\"@angular/material/menu\");","module.exports = require(\"@angular/material/progress-spinner\");","module.exports = require(\"@angular/material/sidenav\");","module.exports = require(\"@angular/material/tabs\");","module.exports = require(\"@angular/material/toolbar\");","module.exports = require(\"@angular/material/tooltip\");","module.exports = require(\"@angular/platform-browser\");","module.exports = require(\"@angular/platform-browser/animations\");","module.exports = require(\"@angular/platform-server\");","module.exports = require(\"@angular/router\");","module.exports = require(\"@ckeditor/ckeditor5-angular\");","module.exports = require(\"@ckeditor/ckeditor5-build-inline\");","module.exports = require(\"algoliasearch/lite\");","module.exports = require(\"exif-js\");","module.exports = require(\"firebase/app\");","module.exports = require(\"firebase/auth\");","module.exports = require(\"firebase/database\");","module.exports = require(\"firebase/firestore\");","module.exports = require(\"firebase/storage\");","module.exports = require(\"rxjs\");","module.exports = require(\"rxjs/operators\");","module.exports = require(\"tslib\");"],"sourceRoot":""}