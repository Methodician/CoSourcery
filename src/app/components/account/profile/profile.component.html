<section class="profile">

  <h2 class="profile__title">Profile</h2>

  <!-- View only Profile -->
  <div *ngIf="profileId && !editMode"
        class="form-wrapper">
    <div class="top-btn-wrapper">
      <button *ngIf="loggedInUserId === profileId"
              class="cos-btn top-btn"
              type="button"
              (click)="edit()">
        Edit
      </button>
    </div>
    <cos-profile-view [user]="userMap[profileId]"></cos-profile-view>
  </div>

  <!-- Editable Profile Form -->
  <!-- ngIf div wrapper needed to ensure buttons aren't rendered before the profileForm is loaded -->
  <div *ngIf="profileId && editMode"
       class="form-wrapper">
    <div class="top-btn-wrapper">
      <button *ngIf="loggedInUserId"
            class="cos-btn top-btn"
            type="button"
            [disabled]="!formComponent.valid || formComponent.pristine"
            (click)="onSaveProfileChanges()">
        Update
      </button>
    </div>
    <cos-profile-form #formComponent
                      [formUser]="userMap[profileId]"
                      [imageUploadPercent$]="imageUploadPercent$"
                      (profileImageSelected)="onSelectProfileImage($event)"></cos-profile-form>

    <button *ngIf="loggedInUserId"
            class="cos-btn"
            type="button"
            [disabled]="!formComponent.valid || formComponent.pristine"
            (click)="onSaveProfileChanges()">
      Update
    </button>
  </div>
</section>